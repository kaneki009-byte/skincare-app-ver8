var iA=Object.defineProperty;var rA=(t,e,n)=>e in t?iA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>rA(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J0={exports:{}},Ic={},Z0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),oA=Symbol.for("react.portal"),aA=Symbol.for("react.fragment"),lA=Symbol.for("react.strict_mode"),uA=Symbol.for("react.profiler"),cA=Symbol.for("react.provider"),hA=Symbol.for("react.context"),dA=Symbol.for("react.forward_ref"),fA=Symbol.for("react.suspense"),pA=Symbol.for("react.memo"),gA=Symbol.for("react.lazy"),e_=Symbol.iterator;function mA(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var ew={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tw=Object.assign,nw={};function js(t,e,n){this.props=t,this.context=e,this.refs=nw,this.updater=n||ew}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iw(){}iw.prototype=js.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=nw,this.updater=n||ew}var ep=Zf.prototype=new iw;ep.constructor=Zf;tw(ep,js.prototype);ep.isPureReactComponent=!0;var t_=Array.isArray,rw=Object.prototype.hasOwnProperty,tp={current:null},sw={key:!0,ref:!0,__self:!0,__source:!0};function ow(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rw.call(e,i)&&!sw.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:La,type:t,key:s,ref:o,props:r,_owner:tp.current}}function _A(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function np(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function yA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n_=/\/+/g;function Rh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yA(""+t.key):e.toString(36)}function Jl(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case oA:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Rh(o,0):i,t_(r)?(n="",t!=null&&(n=t.replace(n_,"$&/")+"/"),Jl(r,e,n,"",function(c){return c})):r!=null&&(np(r)&&(r=_A(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(n_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",t_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Rh(s,a);o+=Jl(s,e,n,l,r)}else if(l=mA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Rh(s,a++),o+=Jl(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _l(t,e,n){if(t==null)return t;var i=[],r=0;return Jl(t,i,"","",function(s){return e.call(n,s,r++)}),i}function vA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Zl={transition:null},wA={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:tp};function aw(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=js;te.Fragment=aA;te.Profiler=uA;te.PureComponent=Zf;te.StrictMode=lA;te.Suspense=fA;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wA;te.act=aw;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=tw({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rw.call(e,l)&&!sw.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:La,type:t.type,key:r,ref:s,props:i,_owner:o}};te.createContext=function(t){return t={$$typeof:hA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cA,_context:t},t.Consumer=t};te.createElement=ow;te.createFactory=function(t){var e=ow.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:dA,render:t}};te.isValidElement=np;te.lazy=function(t){return{$$typeof:gA,_payload:{_status:-1,_result:t},_init:vA}};te.memo=function(t,e){return{$$typeof:pA,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};te.unstable_act=aw;te.useCallback=function(t,e){return xt.current.useCallback(t,e)};te.useContext=function(t){return xt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};te.useEffect=function(t,e){return xt.current.useEffect(t,e)};te.useId=function(){return xt.current.useId()};te.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return xt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};te.useRef=function(t){return xt.current.useRef(t)};te.useState=function(t){return xt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return xt.current.useTransition()};te.version="18.3.1";Z0.exports=te;var K=Z0.exports;const EA=sA(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=K,SA=Symbol.for("react.element"),IA=Symbol.for("react.fragment"),AA=Object.prototype.hasOwnProperty,xA=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bA={key:!0,ref:!0,__self:!0,__source:!0};function lw(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)AA.call(e,i)&&!bA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:SA,type:t,key:s,ref:o,props:r,_owner:xA.current}}Ic.Fragment=IA;Ic.jsx=lw;Ic.jsxs=lw;J0.exports=Ic;var F=J0.exports,xd={},uw={exports:{}},$t={},cw={exports:{}},hw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,W){var Q=z.length;z.push(W);e:for(;0<Q;){var me=Q-1>>>1,se=z[me];if(0<r(se,W))z[me]=W,z[Q]=se,Q=me;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var W=z[0],Q=z.pop();if(Q!==W){z[0]=Q;e:for(var me=0,se=z.length,_e=se>>>1;me<_e;){var Ze=2*(me+1)-1,Et=z[Ze],et=Ze+1,Mn=z[et];if(0>r(Et,Q))et<se&&0>r(Mn,Et)?(z[me]=Mn,z[et]=Q,me=et):(z[me]=Et,z[Ze]=Q,me=Ze);else if(et<se&&0>r(Mn,Q))z[me]=Mn,z[et]=Q,me=et;else break e}}return W}function r(z,W){var Q=z.sortIndex-W.sortIndex;return Q!==0?Q:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,_=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(z){for(var W=n(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=z)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function R(z){if(E=!1,A(z),!_)if(n(l)!==null)_=!0,de(M);else{var W=n(c);W!==null&&he(R,W.startTime-z)}}function M(z,W){_=!1,E&&(E=!1,v(w),w=-1),m=!0;var Q=p;try{for(A(W),d=n(l);d!==null&&(!(d.expirationTime>W)||z&&!C());){var me=d.callback;if(typeof me=="function"){d.callback=null,p=d.priorityLevel;var se=me(d.expirationTime<=W);W=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&i(l),A(W)}else i(l);d=n(l)}if(d!==null)var _e=!0;else{var Ze=n(c);Ze!==null&&he(R,Ze.startTime-W),_e=!1}return _e}finally{d=null,p=Q,m=!1}}var O=!1,I=null,w=-1,S=5,b=-1;function C(){return!(t.unstable_now()-b<S)}function P(){if(I!==null){var z=t.unstable_now();b=z;var W=!0;try{W=I(!0,z)}finally{W?k():(O=!1,I=null)}}else O=!1}var k;if(typeof y=="function")k=function(){y(P)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ne=Ee.port2;Ee.port1.onmessage=P,k=function(){ne.postMessage(null)}}else k=function(){x(P,0)};function de(z){I=z,O||(O=!0,k())}function he(z,W){w=x(function(){z(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,de(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Q=p;p=W;try{return z()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=p;p=z;try{return W()}finally{p=Q}},t.unstable_scheduleCallback=function(z,W,Q){var me=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?me+Q:me):Q=me,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,z={id:h++,callback:W,priorityLevel:z,startTime:Q,expirationTime:se,sortIndex:-1},Q>me?(z.sortIndex=Q,e(c,z),n(l)===null&&z===n(c)&&(E?(v(w),w=-1):E=!0,he(R,Q-me))):(z.sortIndex=se,e(l,z),_||m||(_=!0,de(M))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var W=p;return function(){var Q=p;p=W;try{return z.apply(this,arguments)}finally{p=Q}}}})(hw);cw.exports=hw;var kA=cw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA=K,Bt=kA;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dw=new Set,sa={};function Vr(t,e){bs(t,e),bs(t+"Capture",e)}function bs(t,e){for(sa[t]=e,t=0;t<e.length;t++)dw.add(e[t])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bd=Object.prototype.hasOwnProperty,PA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i_={},r_={};function RA(t){return bd.call(r_,t)?!0:bd.call(i_,t)?!1:PA.test(t)?r_[t]=!0:(i_[t]=!0,!1)}function DA(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MA(t,e,n,i){if(e===null||typeof e>"u"||DA(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ip=/[\-:]([a-z])/g;function rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ip,rp);ot[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ip,rp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ip,rp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MA(e,n,r,i)&&(n=null),i||r===null?RA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var si=CA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),kd=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),Pd=Symbol.for("react.suspense_list"),lp=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),gw=Symbol.for("react.offscreen"),s_=Symbol.iterator;function po(t){return t===null||typeof t!="object"?null:(t=s_&&t[s_]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Dh;function bo(t){if(Dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dh=e&&e[1]||""}return`
`+Dh+t}var Mh=!1;function Oh(t,e){if(!t||Mh)return"";Mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bo(t):""}function OA(t){switch(t.tag){case 5:return bo(t.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return t=Oh(t.type,!1),t;case 11:return t=Oh(t.type.render,!1),t;case 1:return t=Oh(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case kd:return"Profiler";case op:return"StrictMode";case Cd:return"Suspense";case Pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pw:return(t.displayName||"Context")+".Consumer";case fw:return(t._context.displayName||"Context")+".Provider";case ap:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lp:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function NA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VA(t){var e=mw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=VA(t))}function _w(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dd(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function o_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yw(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function Md(t,e){yw(t,e);var n=$i(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Od(t,e.type,n):e.hasOwnProperty("defaultValue")&&Od(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Od(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ko=Array.isArray;function fs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ko(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function vw(t,e){var n=$i(e.value),i=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function u_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ww(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ww(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wl,Ew=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LA=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){LA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function Tw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function Sw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Tw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var FA=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ld(t,e){if(e){if(FA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Fd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ud=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zd=null,ps=null,gs=null;function c_(t){if(t=za(t)){if(typeof zd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Cc(e),zd(t.stateNode,t.type,e))}}function Iw(t){ps?gs?gs.push(t):gs=[t]:ps=t}function Aw(){if(ps){var t=ps,e=gs;if(gs=ps=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function xw(t,e){return t(e)}function bw(){}var Nh=!1;function kw(t,e,n){if(Nh)return t(e,n);Nh=!0;try{return xw(t,e,n)}finally{Nh=!1,(ps!==null||gs!==null)&&(bw(),Aw())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var i=Cc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var jd=!1;if(Qn)try{var go={};Object.defineProperty(go,"passive",{get:function(){jd=!0}}),window.addEventListener("test",go,go),window.removeEventListener("test",go,go)}catch{jd=!1}function UA(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var jo=!1,xu=null,bu=!1,Bd=null,zA={onError:function(t){jo=!0,xu=t}};function jA(t,e,n,i,r,s,o,a,l){jo=!1,xu=null,UA.apply(zA,arguments)}function BA(t,e,n,i,r,s,o,a,l){if(jA.apply(this,arguments),jo){if(jo){var c=xu;jo=!1,xu=null}else throw Error(U(198));bu||(bu=!0,Bd=c)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function h_(t){if(Lr(t)!==t)throw Error(U(188))}function $A(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return h_(r),t;if(s===i)return h_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Pw(t){return t=$A(t),t!==null?Rw(t):null}function Rw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rw(t);if(e!==null)return e;t=t.sibling}return null}var Dw=Bt.unstable_scheduleCallback,d_=Bt.unstable_cancelCallback,HA=Bt.unstable_shouldYield,WA=Bt.unstable_requestPaint,Le=Bt.unstable_now,qA=Bt.unstable_getCurrentPriorityLevel,cp=Bt.unstable_ImmediatePriority,Mw=Bt.unstable_UserBlockingPriority,ku=Bt.unstable_NormalPriority,KA=Bt.unstable_LowPriority,Ow=Bt.unstable_IdlePriority,Ac=null,In=null;function GA(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Ac,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:XA,QA=Math.log,YA=Math.LN2;function XA(t){return t>>>=0,t===0?32:31-(QA(t)/YA|0)|0}var El=64,Tl=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Co(a):(s&=o,s!==0&&(i=Co(s)))}else o=n&~r,o!==0?i=Co(o):s!==0&&(i=Co(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-dn(e),r=1<<n,i|=t[n],e&=~r;return i}function JA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=JA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nw(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function ex(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-dn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ge=0;function Vw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lw,dp,Fw,Uw,zw,Hd=!1,Sl=[],bi=null,ki=null,Ci=null,la=new Map,ua=new Map,gi=[],tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f_(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function mo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=za(e),e!==null&&dp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function nx(t,e,n,i,r){switch(e){case"focusin":return bi=mo(bi,t,e,n,i,r),!0;case"dragenter":return ki=mo(ki,t,e,n,i,r),!0;case"mouseover":return Ci=mo(Ci,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return la.set(s,mo(la.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ua.set(s,mo(ua.get(s)||null,t,e,n,i,r)),!0}return!1}function jw(t){var e=pr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Cw(n),e!==null){t.blockedOn=e,zw(t.priority,function(){Fw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ud=i,n.target.dispatchEvent(i),Ud=null}else return e=za(n),e!==null&&dp(e),t.blockedOn=n,!1;e.shift()}return!0}function p_(t,e,n){eu(t)&&n.delete(e)}function ix(){Hd=!1,bi!==null&&eu(bi)&&(bi=null),ki!==null&&eu(ki)&&(ki=null),Ci!==null&&eu(Ci)&&(Ci=null),la.forEach(p_),ua.forEach(p_)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Hd||(Hd=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,ix)))}function ca(t){function e(r){return _o(r,t)}if(0<Sl.length){_o(Sl[0],t);for(var n=1;n<Sl.length;n++){var i=Sl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(bi!==null&&_o(bi,t),ki!==null&&_o(ki,t),Ci!==null&&_o(Ci,t),la.forEach(e),ua.forEach(e),n=0;n<gi.length;n++)i=gi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)jw(n),n.blockedOn===null&&gi.shift()}var ms=si.ReactCurrentBatchConfig,Pu=!0;function rx(t,e,n,i){var r=ge,s=ms.transition;ms.transition=null;try{ge=1,fp(t,e,n,i)}finally{ge=r,ms.transition=s}}function sx(t,e,n,i){var r=ge,s=ms.transition;ms.transition=null;try{ge=4,fp(t,e,n,i)}finally{ge=r,ms.transition=s}}function fp(t,e,n,i){if(Pu){var r=Wd(t,e,n,i);if(r===null)qh(t,e,i,Ru,n),f_(t,i);else if(nx(r,t,e,n,i))i.stopPropagation();else if(f_(t,i),e&4&&-1<tx.indexOf(t)){for(;r!==null;){var s=za(r);if(s!==null&&Lw(s),s=Wd(t,e,n,i),s===null&&qh(t,e,i,Ru,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qh(t,e,i,null,n)}}var Ru=null;function Wd(t,e,n,i){if(Ru=null,t=up(i),t=pr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ru=t,null}function Bw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qA()){case cp:return 1;case Mw:return 4;case ku:case KA:return 16;case Ow:return 536870912;default:return 16}default:return 16}}var Ei=null,pp=null,tu=null;function $w(){if(tu)return tu;var t,e=pp,n=e.length,i,r="value"in Ei?Ei.value:Ei.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return tu=r.slice(t,1<i?1-i:void 0)}function nu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function g_(){return!1}function Ht(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Il:g_,this.isPropagationStopped=g_,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=Ht(Bs),Ua=De({},Bs,{view:0,detail:0}),ox=Ht(Ua),Lh,Fh,yo,xc=De({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(Lh=t.screenX-yo.screenX,Fh=t.screenY-yo.screenY):Fh=Lh=0,yo=t),Lh)},movementY:function(t){return"movementY"in t?t.movementY:Fh}}),m_=Ht(xc),ax=De({},xc,{dataTransfer:0}),lx=Ht(ax),ux=De({},Ua,{relatedTarget:0}),Uh=Ht(ux),cx=De({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=Ht(cx),dx=De({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fx=Ht(dx),px=De({},Bs,{data:0}),__=Ht(px),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_x[t])?!!e[t]:!1}function mp(){return yx}var vx=De({},Ua,{key:function(t){if(t.key){var e=gx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(t){return t.type==="keypress"?nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wx=Ht(vx),Ex=De({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y_=Ht(Ex),Tx=De({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),Sx=Ht(Tx),Ix=De({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ax=Ht(Ix),xx=De({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=Ht(xx),kx=[9,13,27,32],_p=Qn&&"CompositionEvent"in window,Bo=null;Qn&&"documentMode"in document&&(Bo=document.documentMode);var Cx=Qn&&"TextEvent"in window&&!Bo,Hw=Qn&&(!_p||Bo&&8<Bo&&11>=Bo),v_=" ",w_=!1;function Ww(t,e){switch(t){case"keyup":return kx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function Px(t,e){switch(t){case"compositionend":return qw(e);case"keypress":return e.which!==32?null:(w_=!0,v_);case"textInput":return t=e.data,t===v_&&w_?null:t;default:return null}}function Rx(t,e){if(ns)return t==="compositionend"||!_p&&Ww(t,e)?(t=$w(),tu=pp=Ei=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hw&&e.locale!=="ko"?null:e.data;default:return null}}var Dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dx[t.type]:e==="textarea"}function Kw(t,e,n,i){Iw(i),e=Du(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var $o=null,ha=null;function Mx(t){rE(t,0)}function bc(t){var e=ss(t);if(_w(e))return t}function Ox(t,e){if(t==="change")return e}var Gw=!1;if(Qn){var zh;if(Qn){var jh="oninput"in document;if(!jh){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),jh=typeof T_.oninput=="function"}zh=jh}else zh=!1;Gw=zh&&(!document.documentMode||9<document.documentMode)}function S_(){$o&&($o.detachEvent("onpropertychange",Qw),ha=$o=null)}function Qw(t){if(t.propertyName==="value"&&bc(ha)){var e=[];Kw(e,ha,t,up(t)),kw(Mx,e)}}function Nx(t,e,n){t==="focusin"?(S_(),$o=e,ha=n,$o.attachEvent("onpropertychange",Qw)):t==="focusout"&&S_()}function Vx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(ha)}function Lx(t,e){if(t==="click")return bc(e)}function Fx(t,e){if(t==="input"||t==="change")return bc(e)}function Ux(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:Ux;function da(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!bd.call(e,r)||!pn(t[r],e[r]))return!1}return!0}function I_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var n=I_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I_(n)}}function Yw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xw(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zx(t){var e=Xw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yw(n.ownerDocument.documentElement,n)){if(i!==null&&yp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=A_(n,s);var o=A_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jx=Qn&&"documentMode"in document&&11>=document.documentMode,is=null,qd=null,Ho=null,Kd=!1;function x_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||is==null||is!==Au(i)||(i=is,"selectionStart"in i&&yp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&da(Ho,i)||(Ho=i,i=Du(qd,"onSelect"),0<i.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=is)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rs={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Bh={},Jw={};Qn&&(Jw=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function kc(t){if(Bh[t])return Bh[t];if(!rs[t])return t;var e=rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jw)return Bh[t]=e[n];return t}var Zw=kc("animationend"),eE=kc("animationiteration"),tE=kc("animationstart"),nE=kc("transitionend"),iE=new Map,b_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){iE.set(t,e),Vr(e,[t])}for(var $h=0;$h<b_.length;$h++){var Hh=b_[$h],Bx=Hh.toLowerCase(),$x=Hh[0].toUpperCase()+Hh.slice(1);er(Bx,"on"+$x)}er(Zw,"onAnimationEnd");er(eE,"onAnimationIteration");er(tE,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(nE,"onTransitionEnd");bs("onMouseEnter",["mouseout","mouseover"]);bs("onMouseLeave",["mouseout","mouseover"]);bs("onPointerEnter",["pointerout","pointerover"]);bs("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function k_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,BA(i,e,void 0,t),t.currentTarget=null}function rE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;k_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;k_(r,a,c),s=l}}}if(bu)throw t=Bd,bu=!1,Bd=null,t}function xe(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var i=t+"__bubble";n.has(i)||(sE(e,t,2,!1),n.add(i))}function Wh(t,e,n){var i=0;e&&(i|=4),sE(n,t,i,e)}var xl="_reactListening"+Math.random().toString(36).slice(2);function fa(t){if(!t[xl]){t[xl]=!0,dw.forEach(function(n){n!=="selectionchange"&&(Hx.has(n)||Wh(n,!1,t),Wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xl]||(e[xl]=!0,Wh("selectionchange",!1,e))}}function sE(t,e,n,i){switch(Bw(e)){case 1:var r=rx;break;case 4:r=sx;break;default:r=fp}n=r.bind(null,e,n,t),r=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qh(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=pr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}kw(function(){var c=s,h=up(n),d=[];e:{var p=iE.get(t);if(p!==void 0){var m=gp,_=t;switch(t){case"keypress":if(nu(n)===0)break e;case"keydown":case"keyup":m=wx;break;case"focusin":_="focus",m=Uh;break;case"focusout":_="blur",m=Uh;break;case"beforeblur":case"afterblur":m=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=m_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Sx;break;case Zw:case eE:case tE:m=hx;break;case nE:m=Ax;break;case"scroll":m=ox;break;case"wheel":m=bx;break;case"copy":case"cut":case"paste":m=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=y_}var E=(e&4)!==0,x=!E&&t==="scroll",v=E?p!==null?p+"Capture":null:p;E=[];for(var y=c,A;y!==null;){A=y;var R=A.stateNode;if(A.tag===5&&R!==null&&(A=R,v!==null&&(R=aa(y,v),R!=null&&E.push(pa(y,R,A)))),x)break;y=y.return}0<E.length&&(p=new m(p,_,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Ud&&(_=n.relatedTarget||n.fromElement)&&(pr(_)||_[Yn]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?pr(_):null,_!==null&&(x=Lr(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(E=m_,R="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=y_,R="onPointerLeave",v="onPointerEnter",y="pointer"),x=m==null?p:ss(m),A=_==null?p:ss(_),p=new E(R,y+"leave",m,n,h),p.target=x,p.relatedTarget=A,R=null,pr(h)===c&&(E=new E(v,y+"enter",_,n,h),E.target=A,E.relatedTarget=x,R=E),x=R,m&&_)t:{for(E=m,v=_,y=0,A=E;A;A=Kr(A))y++;for(A=0,R=v;R;R=Kr(R))A++;for(;0<y-A;)E=Kr(E),y--;for(;0<A-y;)v=Kr(v),A--;for(;y--;){if(E===v||v!==null&&E===v.alternate)break t;E=Kr(E),v=Kr(v)}E=null}else E=null;m!==null&&C_(d,p,m,E,!1),_!==null&&x!==null&&C_(d,x,_,E,!0)}}e:{if(p=c?ss(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=Ox;else if(E_(p))if(Gw)M=Fx;else{M=Vx;var O=Nx}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=Lx);if(M&&(M=M(t,c))){Kw(d,M,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Od(p,"number",p.value)}switch(O=c?ss(c):window,t){case"focusin":(E_(O)||O.contentEditable==="true")&&(is=O,qd=c,Ho=null);break;case"focusout":Ho=qd=is=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,x_(d,n,h);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":x_(d,n,h)}var I;if(_p)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ns?Ww(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Hw&&n.locale!=="ko"&&(ns||w!=="onCompositionStart"?w==="onCompositionEnd"&&ns&&(I=$w()):(Ei=h,pp="value"in Ei?Ei.value:Ei.textContent,ns=!0)),O=Du(c,w),0<O.length&&(w=new __(w,t,null,n,h),d.push({event:w,listeners:O}),I?w.data=I:(I=qw(n),I!==null&&(w.data=I)))),(I=Cx?Px(t,n):Rx(t,n))&&(c=Du(c,"onBeforeInput"),0<c.length&&(h=new __("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}rE(d,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Du(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=aa(t,n),s!=null&&i.unshift(pa(t,s,r)),s=aa(t,e),s!=null&&i.push(pa(t,s,r))),t=t.return}return i}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=aa(n,s),l!=null&&o.unshift(pa(n,l,a))):r||(l=aa(n,s),l!=null&&o.push(pa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wx=/\r\n?/g,qx=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(Wx,`
`).replace(qx,"")}function bl(t,e,n){if(e=P_(e),P_(t)!==e&&n)throw Error(U(425))}function Mu(){}var Gd=null,Qd=null;function Yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(Qx)}:Xd;function Qx(t){setTimeout(function(){throw t})}function Kh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ca(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ca(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Sn="__reactFiber$"+$s,ga="__reactProps$"+$s,Yn="__reactContainer$"+$s,Jd="__reactEvents$"+$s,Yx="__reactListeners$"+$s,Xx="__reactHandles$"+$s;function pr(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D_(t);t!==null;){if(n=t[Sn])return n;t=D_(t)}return e}t=n,n=t.parentNode}return null}function za(t){return t=t[Sn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Cc(t){return t[ga]||null}var Zd=[],os=-1;function tr(t){return{current:t}}function ke(t){0>os||(t.current=Zd[os],Zd[os]=null,os--)}function Ie(t,e){os++,Zd[os]=t.current,t.current=e}var Hi={},vt=tr(Hi),Ot=tr(!1),Ir=Hi;function ks(t,e){var n=t.type.contextTypes;if(!n)return Hi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Nt(t){return t=t.childContextTypes,t!=null}function Ou(){ke(Ot),ke(vt)}function M_(t,e,n){if(vt.current!==Hi)throw Error(U(168));Ie(vt,e),Ie(Ot,n)}function oE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,NA(t)||"Unknown",r));return De({},n,i)}function Nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,Ir=vt.current,Ie(vt,t),Ie(Ot,Ot.current),!0}function O_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=oE(t,e,Ir),i.__reactInternalMemoizedMergedChildContext=t,ke(Ot),ke(vt),Ie(vt,t)):ke(Ot),Ie(Ot,n)}var zn=null,Pc=!1,Gh=!1;function aE(t){zn===null?zn=[t]:zn.push(t)}function Jx(t){Pc=!0,aE(t)}function nr(){if(!Gh&&zn!==null){Gh=!0;var t=0,e=ge;try{var n=zn;for(ge=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zn=null,Pc=!1}catch(r){throw zn!==null&&(zn=zn.slice(t+1)),Dw(cp,nr),r}finally{ge=e,Gh=!1}}return null}var as=[],ls=0,Vu=null,Lu=0,qt=[],Kt=0,Ar=null,Bn=1,$n="";function cr(t,e){as[ls++]=Lu,as[ls++]=Vu,Vu=t,Lu=e}function lE(t,e,n){qt[Kt++]=Bn,qt[Kt++]=$n,qt[Kt++]=Ar,Ar=t;var i=Bn;t=$n;var r=32-dn(i)-1;i&=~(1<<r),n+=1;var s=32-dn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Bn=1<<32-dn(e)+r|n<<r|i,$n=s+t}else Bn=1<<s|n<<r|i,$n=t}function vp(t){t.return!==null&&(cr(t,1),lE(t,1,0))}function wp(t){for(;t===Vu;)Vu=as[--ls],as[ls]=null,Lu=as[--ls],as[ls]=null;for(;t===Ar;)Ar=qt[--Kt],qt[Kt]=null,$n=qt[--Kt],qt[Kt]=null,Bn=qt[--Kt],qt[Kt]=null}var jt=null,zt=null,Ce=!1,ln=null;function uE(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,zt=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ar!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,zt=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(Ce){var e=zt;if(e){var n=e;if(!N_(t,e)){if(ef(t))throw Error(U(418));e=Pi(n.nextSibling);var i=jt;e&&N_(t,e)?uE(i,n):(t.flags=t.flags&-4097|2,Ce=!1,jt=t)}}else{if(ef(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ce=!1,jt=t}}}function V_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function kl(t){if(t!==jt)return!1;if(!Ce)return V_(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yd(t.type,t.memoizedProps)),e&&(e=zt)){if(ef(t))throw cE(),Error(U(418));for(;e;)uE(t,e),e=Pi(e.nextSibling)}if(V_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=jt?Pi(t.stateNode.nextSibling):null;return!0}function cE(){for(var t=zt;t;)t=Pi(t.nextSibling)}function Cs(){zt=jt=null,Ce=!1}function Ep(t){ln===null?ln=[t]:ln.push(t)}var Zx=si.ReactCurrentBatchConfig;function vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Cl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L_(t){var e=t._init;return e(t._payload)}function hE(t){function e(v,y){if(t){var A=v.deletions;A===null?(v.deletions=[y],v.flags|=16):A.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Oi(v,y),v.index=0,v.sibling=null,v}function s(v,y,A){return v.index=A,t?(A=v.alternate,A!==null?(A=A.index,A<y?(v.flags|=2,y):A):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,A,R){return y===null||y.tag!==6?(y=td(A,v.mode,R),y.return=v,y):(y=r(y,A),y.return=v,y)}function l(v,y,A,R){var M=A.type;return M===ts?h(v,y,A.props.children,R,A.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fi&&L_(M)===y.type)?(R=r(y,A.props),R.ref=vo(v,y,A),R.return=v,R):(R=uu(A.type,A.key,A.props,null,v.mode,R),R.ref=vo(v,y,A),R.return=v,R)}function c(v,y,A,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=nd(A,v.mode,R),y.return=v,y):(y=r(y,A.children||[]),y.return=v,y)}function h(v,y,A,R,M){return y===null||y.tag!==7?(y=wr(A,v.mode,R,M),y.return=v,y):(y=r(y,A),y.return=v,y)}function d(v,y,A){if(typeof y=="string"&&y!==""||typeof y=="number")return y=td(""+y,v.mode,A),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yl:return A=uu(y.type,y.key,y.props,null,v.mode,A),A.ref=vo(v,null,y),A.return=v,A;case es:return y=nd(y,v.mode,A),y.return=v,y;case fi:var R=y._init;return d(v,R(y._payload),A)}if(ko(y)||po(y))return y=wr(y,v.mode,A,null),y.return=v,y;Cl(v,y)}return null}function p(v,y,A,R){var M=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:a(v,y,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case yl:return A.key===M?l(v,y,A,R):null;case es:return A.key===M?c(v,y,A,R):null;case fi:return M=A._init,p(v,y,M(A._payload),R)}if(ko(A)||po(A))return M!==null?null:h(v,y,A,R,null);Cl(v,A)}return null}function m(v,y,A,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(A)||null,a(y,v,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case yl:return v=v.get(R.key===null?A:R.key)||null,l(y,v,R,M);case es:return v=v.get(R.key===null?A:R.key)||null,c(y,v,R,M);case fi:var O=R._init;return m(v,y,A,O(R._payload),M)}if(ko(R)||po(R))return v=v.get(A)||null,h(y,v,R,M,null);Cl(y,R)}return null}function _(v,y,A,R){for(var M=null,O=null,I=y,w=y=0,S=null;I!==null&&w<A.length;w++){I.index>w?(S=I,I=null):S=I.sibling;var b=p(v,I,A[w],R);if(b===null){I===null&&(I=S);break}t&&I&&b.alternate===null&&e(v,I),y=s(b,y,w),O===null?M=b:O.sibling=b,O=b,I=S}if(w===A.length)return n(v,I),Ce&&cr(v,w),M;if(I===null){for(;w<A.length;w++)I=d(v,A[w],R),I!==null&&(y=s(I,y,w),O===null?M=I:O.sibling=I,O=I);return Ce&&cr(v,w),M}for(I=i(v,I);w<A.length;w++)S=m(I,v,w,A[w],R),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?w:S.key),y=s(S,y,w),O===null?M=S:O.sibling=S,O=S);return t&&I.forEach(function(C){return e(v,C)}),Ce&&cr(v,w),M}function E(v,y,A,R){var M=po(A);if(typeof M!="function")throw Error(U(150));if(A=M.call(A),A==null)throw Error(U(151));for(var O=M=null,I=y,w=y=0,S=null,b=A.next();I!==null&&!b.done;w++,b=A.next()){I.index>w?(S=I,I=null):S=I.sibling;var C=p(v,I,b.value,R);if(C===null){I===null&&(I=S);break}t&&I&&C.alternate===null&&e(v,I),y=s(C,y,w),O===null?M=C:O.sibling=C,O=C,I=S}if(b.done)return n(v,I),Ce&&cr(v,w),M;if(I===null){for(;!b.done;w++,b=A.next())b=d(v,b.value,R),b!==null&&(y=s(b,y,w),O===null?M=b:O.sibling=b,O=b);return Ce&&cr(v,w),M}for(I=i(v,I);!b.done;w++,b=A.next())b=m(I,v,w,b.value,R),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?w:b.key),y=s(b,y,w),O===null?M=b:O.sibling=b,O=b);return t&&I.forEach(function(P){return e(v,P)}),Ce&&cr(v,w),M}function x(v,y,A,R){if(typeof A=="object"&&A!==null&&A.type===ts&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case yl:e:{for(var M=A.key,O=y;O!==null;){if(O.key===M){if(M=A.type,M===ts){if(O.tag===7){n(v,O.sibling),y=r(O,A.props.children),y.return=v,v=y;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fi&&L_(M)===O.type){n(v,O.sibling),y=r(O,A.props),y.ref=vo(v,O,A),y.return=v,v=y;break e}n(v,O);break}else e(v,O);O=O.sibling}A.type===ts?(y=wr(A.props.children,v.mode,R,A.key),y.return=v,v=y):(R=uu(A.type,A.key,A.props,null,v.mode,R),R.ref=vo(v,y,A),R.return=v,v=R)}return o(v);case es:e:{for(O=A.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){n(v,y.sibling),y=r(y,A.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=nd(A,v.mode,R),y.return=v,v=y}return o(v);case fi:return O=A._init,x(v,y,O(A._payload),R)}if(ko(A))return _(v,y,A,R);if(po(A))return E(v,y,A,R);Cl(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,A),y.return=v,v=y):(n(v,y),y=td(A,v.mode,R),y.return=v,v=y),o(v)):n(v,y)}return x}var Ps=hE(!0),dE=hE(!1),Fu=tr(null),Uu=null,us=null,Tp=null;function Sp(){Tp=us=Uu=null}function Ip(t){var e=Fu.current;ke(Fu),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function _s(t,e){Uu=t,Tp=us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Tp!==t)if(t={context:t,memoizedValue:e,next:null},us===null){if(Uu===null)throw Error(U(308));us=t,Uu.dependencies={lanes:0,firstContext:t}}else us=us.next=t;return e}var gr=null;function Ap(t){gr===null?gr=[t]:gr.push(t)}function fE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ap(e)):(n.next=r.next,r.next=n),e.interleaved=n,Xn(t,i)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function xp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Xn(t,n)}return r=i.interleaved,r===null?(e.next=e,Ap(i)):(e.next=r.next,r.next=e),i.interleaved=e,Xn(t,n)}function iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hp(t,n)}}function F_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,i){var r=t.updateQueue;pi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(p=e,m=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){d=_.call(m,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,p=typeof _=="function"?_.call(m,d,p):_,p==null)break e;d=De({},d,p);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);br|=o,t.lanes=o,t.memoizedState=d}}function U_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var ja={},An=tr(ja),ma=tr(ja),_a=tr(ja);function mr(t){if(t===ja)throw Error(U(174));return t}function bp(t,e){switch(Ie(_a,e),Ie(ma,t),Ie(An,ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}ke(An),Ie(An,e)}function Rs(){ke(An),ke(ma),ke(_a)}function gE(t){mr(_a.current);var e=mr(An.current),n=Vd(e,t.type);e!==n&&(Ie(ma,t),Ie(An,n))}function kp(t){ma.current===t&&(ke(An),ke(ma))}var Pe=tr(0);function ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qh=[];function Cp(){for(var t=0;t<Qh.length;t++)Qh[t]._workInProgressVersionPrimary=null;Qh.length=0}var ru=si.ReactCurrentDispatcher,Yh=si.ReactCurrentBatchConfig,xr=0,Re=null,He=null,Xe=null,Bu=!1,Wo=!1,ya=0,eb=0;function ht(){throw Error(U(321))}function Pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Rp(t,e,n,i,r,s){if(xr=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ru.current=t===null||t.memoizedState===null?rb:sb,t=n(i,r),Wo){s=0;do{if(Wo=!1,ya=0,25<=s)throw Error(U(301));s+=1,Xe=He=null,e.updateQueue=null,ru.current=ob,t=n(i,r)}while(Wo)}if(ru.current=$u,e=He!==null&&He.next!==null,xr=0,Xe=He=Re=null,Bu=!1,e)throw Error(U(300));return t}function Dp(){var t=ya!==0;return ya=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function en(){if(He===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?Re.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function va(t,e){return typeof e=="function"?e(t):e}function Xh(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((xr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Re.lanes|=h,br|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,pn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Re.lanes|=s,br|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jh(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);pn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function mE(){}function _E(t,e){var n=Re,i=en(),r=e(),s=!pn(i.memoizedState,r);if(s&&(i.memoizedState=r,Dt=!0),i=i.queue,Mp(wE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,wa(9,vE.bind(null,n,i,r,e),void 0,null),Je===null)throw Error(U(349));xr&30||yE(n,e,r)}return r}function yE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vE(t,e,n,i){e.value=n,e.getSnapshot=i,EE(e)&&TE(t)}function wE(t,e,n){return n(function(){EE(e)&&TE(t)})}function EE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function TE(t){var e=Xn(t,1);e!==null&&fn(e,t,1,-1)}function z_(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=ib.bind(null,Re,t),[e.memoizedState,t]}function wa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function SE(){return en().memoizedState}function su(t,e,n,i){var r=vn();Re.flags|=t,r.memoizedState=wa(1|e,n,void 0,i===void 0?null:i)}function Rc(t,e,n,i){var r=en();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&Pp(i,o.deps)){r.memoizedState=wa(e,n,s,i);return}}Re.flags|=t,r.memoizedState=wa(1|e,n,s,i)}function j_(t,e){return su(8390656,8,t,e)}function Mp(t,e){return Rc(2048,8,t,e)}function IE(t,e){return Rc(4,2,t,e)}function AE(t,e){return Rc(4,4,t,e)}function xE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bE(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4,4,xE.bind(null,e,t),n)}function Op(){}function kE(t,e){var n=en();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function CE(t,e){var n=en();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function PE(t,e,n){return xr&21?(pn(n,e)||(n=Nw(),Re.lanes|=n,br|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function tb(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var i=Yh.transition;Yh.transition={};try{t(!1),e()}finally{ge=n,Yh.transition=i}}function RE(){return en().memoizedState}function nb(t,e,n){var i=Mi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},DE(t))ME(e,n);else if(n=fE(t,e,n,i),n!==null){var r=At();fn(n,t,i,r),OE(n,e,i)}}function ib(t,e,n){var i=Mi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(DE(t))ME(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,pn(a,o)){var l=e.interleaved;l===null?(r.next=r,Ap(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=fE(t,e,r,i),n!==null&&(r=At(),fn(n,t,i,r),OE(n,e,i))}}function DE(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function ME(t,e){Wo=Bu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hp(t,n)}}var $u={readContext:Zt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},rb={readContext:Zt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:j_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,su(4194308,4,xE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return su(4194308,4,t,e)},useInsertionEffect:function(t,e){return su(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=vn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=nb.bind(null,Re,t),[i.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:z_,useDebugValue:Op,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=z_(!1),e=t[0];return t=tb.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Re,r=vn();if(Ce){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Je===null)throw Error(U(349));xr&30||yE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,j_(wE.bind(null,i,s,t),[t]),i.flags|=2048,wa(9,vE.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=vn(),e=Je.identifierPrefix;if(Ce){var n=$n,i=Bn;n=(i&~(1<<32-dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sb={readContext:Zt,useCallback:kE,useContext:Zt,useEffect:Mp,useImperativeHandle:bE,useInsertionEffect:IE,useLayoutEffect:AE,useMemo:CE,useReducer:Xh,useRef:SE,useState:function(){return Xh(va)},useDebugValue:Op,useDeferredValue:function(t){var e=en();return PE(e,He.memoizedState,t)},useTransition:function(){var t=Xh(va)[0],e=en().memoizedState;return[t,e]},useMutableSource:mE,useSyncExternalStore:_E,useId:RE,unstable_isNewReconciler:!1},ob={readContext:Zt,useCallback:kE,useContext:Zt,useEffect:Mp,useImperativeHandle:bE,useInsertionEffect:IE,useLayoutEffect:AE,useMemo:CE,useReducer:Jh,useRef:SE,useState:function(){return Jh(va)},useDebugValue:Op,useDeferredValue:function(t){var e=en();return He===null?e.memoizedState=t:PE(e,He.memoizedState,t)},useTransition:function(){var t=Jh(va)[0],e=en().memoizedState;return[t,e]},useMutableSource:mE,useSyncExternalStore:_E,useId:RE,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dc={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=At(),r=Mi(t),s=Kn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(fn(e,t,r,i),iu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=At(),r=Mi(t),s=Kn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(fn(e,t,r,i),iu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),i=Mi(t),r=Kn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ri(t,r,i),e!==null&&(fn(e,t,i,n),iu(e,t,i))}};function B_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!da(n,i)||!da(r,s):!0}function NE(t,e,n){var i=!1,r=Hi,s=e.contextType;return typeof s=="object"&&s!==null?s=Zt(s):(r=Nt(e)?Ir:vt.current,i=e.contextTypes,s=(i=i!=null)?ks(t,r):Hi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function $_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Dc.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},xp(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zt(s):(s=Nt(e)?Ir:vt.current,r.context=ks(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Dc.enqueueReplaceState(r,r.state,null),zu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",i=e;do n+=OA(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Zh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ab=typeof WeakMap=="function"?WeakMap:Map;function VE(t,e,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wu||(Wu=!0,mf=i),of(t,e)},n}function LE(t,e,n){n=Kn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){of(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof i!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function H_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ab;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Eb.bind(null,t,e,n),e.then(t,t))}function W_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function q_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kn(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var lb=si.ReactCurrentOwner,Dt=!1;function It(t,e,n,i){e.child=t===null?dE(e,null,n,i):Ps(e,t.child,n,i)}function K_(t,e,n,i,r){n=n.render;var s=e.ref;return _s(e,r),i=Rp(t,e,n,i,s,r),n=Dp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Jn(t,e,r)):(Ce&&n&&vp(e),e.flags|=1,It(t,e,i,r),e.child)}function G_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Bp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FE(t,e,s,i,r)):(t=uu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:da,n(o,i)&&t.ref===e.ref)return Jn(t,e,r)}return e.flags|=1,t=Oi(s,i),t.ref=e.ref,t.return=e,e.child=t}function FE(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(da(s,i)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Jn(t,e,r)}return af(t,e,n,i,r)}function UE(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(hs,Ut),Ut|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(hs,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(hs,Ut),Ut|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(hs,Ut),Ut|=i;return It(t,e,r,n),e.child}function zE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,i,r){var s=Nt(n)?Ir:vt.current;return s=ks(e,s),_s(e,r),n=Rp(t,e,n,i,s,r),i=Dp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Jn(t,e,r)):(Ce&&i&&vp(e),e.flags|=1,It(t,e,n,r),e.child)}function Q_(t,e,n,i,r){if(Nt(n)){var s=!0;Nu(e)}else s=!1;if(_s(e,r),e.stateNode===null)ou(t,e),NE(e,n,i),sf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=Nt(n)?Ir:vt.current,c=ks(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&$_(e,o,i,c),pi=!1;var p=e.memoizedState;o.state=p,zu(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Ot.current||pi?(typeof h=="function"&&(rf(e,n,h,i),l=e.memoizedState),(a=pi||B_(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,pE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:on(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zt(l):(l=Nt(n)?Ir:vt.current,l=ks(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&$_(e,o,i,l),pi=!1,p=e.memoizedState,o.state=p,zu(e,i,o,r);var _=e.memoizedState;a!==d||p!==_||Ot.current||pi?(typeof m=="function"&&(rf(e,n,m,i),_=e.memoizedState),(c=pi||B_(e,n,c,i,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return lf(t,e,n,i,s,r)}function lf(t,e,n,i,r,s){zE(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&O_(e,n,!1),Jn(t,e,s);i=e.stateNode,lb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ps(e,t.child,null,s),e.child=Ps(e,null,a,s)):It(t,e,a,s),e.memoizedState=i.state,r&&O_(e,n,!0),e.child}function jE(t){var e=t.stateNode;e.pendingContext?M_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&M_(t,e.context,!1),bp(t,e.containerInfo)}function Y_(t,e,n,i,r){return Cs(),Ep(r),e.flags|=256,It(t,e,n,i),e.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function BE(t,e,n){var i=e.pendingProps,r=Pe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Pe,r&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nc(o,i,0,null),t=wr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cf(n),e.memoizedState=uf,t):Np(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ub(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Oi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Oi(a,s):(s=wr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=uf,i}return s=t.child,t=s.sibling,i=Oi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Np(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,i){return i!==null&&Ep(i),Ps(e,t.child,null,n),t=Np(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ub(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Zh(Error(U(422))),Pl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nc({mode:"visible",children:i.children},r,0,null),s=wr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ps(e,t.child,null,o),e.child.memoizedState=cf(o),e.memoizedState=uf,s);if(!(e.mode&1))return Pl(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Zh(s,i,void 0),Pl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Dt||a){if(i=Je,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Xn(t,r),fn(i,t,r,-1))}return jp(),i=Zh(Error(U(421))),Pl(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Tb.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,zt=Pi(r.nextSibling),jt=e,Ce=!0,ln=null,t!==null&&(qt[Kt++]=Bn,qt[Kt++]=$n,qt[Kt++]=Ar,Bn=t.id,$n=t.overflow,Ar=e),e=Np(e,i.children),e.flags|=4096,e)}function X_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),nf(t.return,e,n)}function ed(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function $E(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(It(t,e,i.children,n),i=Pe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X_(t,n,e);else if(t.tag===19)X_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(Pe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ju(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ed(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ju(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ed(e,!0,n,null,s);break;case"together":ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cb(t,e,n){switch(e.tag){case 3:jE(e),Cs();break;case 5:gE(e);break;case 1:Nt(e.type)&&Nu(e);break;case 4:bp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(Fu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?BE(t,e,n):(Ie(Pe,Pe.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);Ie(Pe,Pe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return $E(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Pe,Pe.current),i)break;return null;case 22:case 23:return e.lanes=0,UE(t,e,n)}return Jn(t,e,n)}var HE,hf,WE,qE;HE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};WE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,mr(An.current);var s=null;switch(n){case"input":r=Dd(t,r),i=Dd(t,i),s=[];break;case"select":r=De({},r,{value:void 0}),i=De({},i,{value:void 0}),s=[];break;case"textarea":r=Nd(t,r),i=Nd(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Mu)}Ld(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};qE=function(t,e,n,i){n!==i&&(e.flags|=4)};function wo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function hb(t,e,n){var i=e.pendingProps;switch(wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Nt(e.type)&&Ou(),dt(e),null;case 3:return i=e.stateNode,Rs(),ke(Ot),ke(vt),Cp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(vf(ln),ln=null))),hf(t,e),dt(e),null;case 5:kp(e);var r=mr(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)WE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return dt(e),null}if(t=mr(An.current),kl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Sn]=e,i[ga]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(r=0;r<Po.length;r++)xe(Po[r],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":o_(i,s),xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xe("invalid",i);break;case"textarea":l_(i,s),xe("invalid",i)}Ld(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&bl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bl(i.textContent,a,t),r=["children",""+a]):sa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",i)}switch(n){case"input":vl(i),a_(i,s,!0);break;case"textarea":vl(i),u_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Mu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ww(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Sn]=e,t[ga]=i,HE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fd(n,i),n){case"dialog":xe("cancel",t),xe("close",t),r=i;break;case"iframe":case"object":case"embed":xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Po.length;r++)xe(Po[r],t);r=i;break;case"source":xe("error",t),r=i;break;case"img":case"image":case"link":xe("error",t),xe("load",t),r=i;break;case"details":xe("toggle",t),r=i;break;case"input":o_(t,i),r=Dd(t,i),xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=De({},i,{value:void 0}),xe("invalid",t);break;case"textarea":l_(t,i),r=Nd(t,i),xe("invalid",t);break;default:r=i}Ld(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Sw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ew(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oa(t,l):typeof l=="number"&&oa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&sp(t,s,l,o))}switch(n){case"input":vl(t),a_(t,i,!1);break;case"textarea":vl(t),u_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$i(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?fs(t,!!i.multiple,s,!1):i.defaultValue!=null&&fs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Mu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)qE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=mr(_a.current),mr(An.current),kl(e)){if(i=e.stateNode,n=e.memoizedProps,i[Sn]=e,(s=i.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:bl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sn]=e,e.stateNode=i}return dt(e),null;case 13:if(ke(Pe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&zt!==null&&e.mode&1&&!(e.flags&128))cE(),Cs(),e.flags|=98560,s=!1;else if(s=kl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Sn]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else ln!==null&&(vf(ln),ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?qe===0&&(qe=3):jp())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Rs(),hf(t,e),t===null&&fa(e.stateNode.containerInfo),dt(e),null;case 10:return Ip(e.type._context),dt(e),null;case 17:return Nt(e.type)&&Ou(),dt(e),null;case 19:if(ke(Pe),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)wo(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ju(t),o!==null){for(e.flags|=128,wo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Ms&&(e.flags|=128,i=!0,wo(s,!1),e.lanes=4194304)}else{if(!i)if(t=ju(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return dt(e),null}else 2*Le()-s.renderingStartTime>Ms&&n!==1073741824&&(e.flags|=128,i=!0,wo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Pe.current,Ie(Pe,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return zp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ut&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function db(t,e){switch(wp(e),e.tag){case 1:return Nt(e.type)&&Ou(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rs(),ke(Ot),ke(vt),Cp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kp(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return Rs(),null;case 10:return Ip(e.type._context),null;case 22:case 23:return zp(),null;case 24:return null;default:return null}}var Rl=!1,mt=!1,fb=typeof WeakSet=="function"?WeakSet:Set,H=null;function cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ne(t,e,i)}else n.current=null}function df(t,e,n){try{n()}catch(i){Ne(t,e,i)}}var J_=!1;function pb(t,e){if(Gd=Pu,t=Xw(),yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qd={focusedElem:t,selectionRange:n},Pu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,x=_.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:on(e.type,E),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Ne(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return _=J_,J_=!1,_}function qo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&df(e,n,s)}r=r.next}while(r!==i)}}function Mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KE(t){var e=t.alternate;e!==null&&(t.alternate=null,KE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[ga],delete e[Jd],delete e[Yx],delete e[Xx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GE(t){return t.tag===5||t.tag===3||t.tag===4}function Z_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mu));else if(i!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function gf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}var nt=null,an=!1;function ci(t,e,n){for(n=n.child;n!==null;)QE(t,e,n),n=n.sibling}function QE(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Ac,n)}catch{}switch(n.tag){case 5:mt||cs(n,e);case 6:var i=nt,r=an;nt=null,ci(t,e,n),nt=i,an=r,nt!==null&&(an?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(an?(t=nt,n=n.stateNode,t.nodeType===8?Kh(t.parentNode,n):t.nodeType===1&&Kh(t,n),ca(t)):Kh(nt,n.stateNode));break;case 4:i=nt,r=an,nt=n.stateNode.containerInfo,an=!0,ci(t,e,n),nt=i,an=r;break;case 0:case 11:case 14:case 15:if(!mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&df(n,e,o),r=r.next}while(r!==i)}ci(t,e,n);break;case 1:if(!mt&&(cs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ne(n,e,a)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(mt=(i=mt)||n.memoizedState!==null,ci(t,e,n),mt=i):ci(t,e,n);break;default:ci(t,e,n)}}function ey(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fb),e.forEach(function(i){var r=Sb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,an=!1;break e;case 3:nt=a.stateNode.containerInfo,an=!0;break e;case 4:nt=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(nt===null)throw Error(U(160));QE(s,o,r),nt=null,an=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ne(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YE(e,t),e=e.sibling}function YE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),mn(t),i&4){try{qo(3,t,t.return),Mc(3,t)}catch(E){Ne(t,t.return,E)}try{qo(5,t,t.return)}catch(E){Ne(t,t.return,E)}}break;case 1:sn(e,t),mn(t),i&512&&n!==null&&cs(n,n.return);break;case 5:if(sn(e,t),mn(t),i&512&&n!==null&&cs(n,n.return),t.flags&32){var r=t.stateNode;try{oa(r,"")}catch(E){Ne(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yw(r,s),Fd(a,o);var c=Fd(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Sw(r,d):h==="dangerouslySetInnerHTML"?Ew(r,d):h==="children"?oa(r,d):sp(r,h,d,c)}switch(a){case"input":Md(r,s);break;case"textarea":vw(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?fs(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?fs(r,!!s.multiple,s.defaultValue,!0):fs(r,!!s.multiple,s.multiple?[]:"",!1))}r[ga]=s}catch(E){Ne(t,t.return,E)}}break;case 6:if(sn(e,t),mn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(E){Ne(t,t.return,E)}}break;case 3:if(sn(e,t),mn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ca(e.containerInfo)}catch(E){Ne(t,t.return,E)}break;case 4:sn(e,t),mn(t);break;case 13:sn(e,t),mn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Fp=Le())),i&4&&ey(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(c=mt)||h,sn(e,t),mt=c):sn(e,t),mn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:qo(4,p,p.return);break;case 1:cs(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){Ne(i,n,E)}}break;case 5:cs(p,p.return);break;case 22:if(p.memoizedState!==null){ny(d);continue}}m!==null?(m.return=p,H=m):ny(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Tw("display",o))}catch(E){Ne(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Ne(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(e,t),mn(t),i&4&&ey(t);break;case 21:break;default:sn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GE(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(oa(r,""),i.flags&=-33);var s=Z_(t);gf(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Z_(t);pf(t,a,o);break;default:throw Error(U(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gb(t,e,n){H=t,XE(t)}function XE(t,e,n){for(var i=(t.mode&1)!==0;H!==null;){var r=H,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Rl;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||mt;a=Rl;var c=mt;if(Rl=o,(mt=l)&&!c)for(H=r;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?iy(r):l!==null?(l.return=o,H=l):iy(r);for(;s!==null;)H=s,XE(s),s=s.sibling;H=r,Rl=a,mt=c}ty(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,H=s):ty(t)}}function ty(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Mc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&U_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}U_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ca(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}mt||e.flags&512&&ff(e)}catch(p){Ne(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function ny(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function iy(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mc(4,e)}catch(l){Ne(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ne(e,r,l)}}var s=e.return;try{ff(e)}catch(l){Ne(e,s,l)}break;case 5:var o=e.return;try{ff(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var mb=Math.ceil,Hu=si.ReactCurrentDispatcher,Vp=si.ReactCurrentOwner,Jt=si.ReactCurrentBatchConfig,le=0,Je=null,ze=null,st=0,Ut=0,hs=tr(0),qe=0,Ea=null,br=0,Oc=0,Lp=0,Ko=null,Pt=null,Fp=0,Ms=1/0,Un=null,Wu=!1,mf=null,Di=null,Dl=!1,Ti=null,qu=0,Go=0,_f=null,au=-1,lu=0;function At(){return le&6?Le():au!==-1?au:au=Le()}function Mi(t){return t.mode&1?le&2&&st!==0?st&-st:Zx.transition!==null?(lu===0&&(lu=Nw()),lu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:Bw(t.type)),t):1}function fn(t,e,n,i){if(50<Go)throw Go=0,_f=null,Error(U(185));Fa(t,n,i),(!(le&2)||t!==Je)&&(t===Je&&(!(le&2)&&(Oc|=n),qe===4&&mi(t,st)),Vt(t,i),n===1&&le===0&&!(e.mode&1)&&(Ms=Le()+500,Pc&&nr()))}function Vt(t,e){var n=t.callbackNode;ZA(t,e);var i=Cu(t,t===Je?st:0);if(i===0)n!==null&&d_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&d_(n),e===1)t.tag===0?Jx(ry.bind(null,t)):aE(ry.bind(null,t)),Gx(function(){!(le&6)&&nr()}),n=null;else{switch(Vw(i)){case 1:n=cp;break;case 4:n=Mw;break;case 16:n=ku;break;case 536870912:n=Ow;break;default:n=ku}n=sT(n,JE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JE(t,e){if(au=-1,lu=0,le&6)throw Error(U(327));var n=t.callbackNode;if(ys()&&t.callbackNode!==n)return null;var i=Cu(t,t===Je?st:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ku(t,i);else{e=i;var r=le;le|=2;var s=eT();(Je!==t||st!==e)&&(Un=null,Ms=Le()+500,vr(t,e));do try{vb();break}catch(a){ZE(t,a)}while(!0);Sp(),Hu.current=s,le=r,ze!==null?e=0:(Je=null,st=0,e=qe)}if(e!==0){if(e===2&&(r=$d(t),r!==0&&(i=r,e=yf(t,r))),e===1)throw n=Ea,vr(t,0),mi(t,i),Vt(t,Le()),n;if(e===6)mi(t,i);else{if(r=t.current.alternate,!(i&30)&&!_b(r)&&(e=Ku(t,i),e===2&&(s=$d(t),s!==0&&(i=s,e=yf(t,s))),e===1))throw n=Ea,vr(t,0),mi(t,i),Vt(t,Le()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:hr(t,Pt,Un);break;case 3:if(mi(t,i),(i&130023424)===i&&(e=Fp+500-Le(),10<e)){if(Cu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){At(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Xd(hr.bind(null,t,Pt,Un),e);break}hr(t,Pt,Un);break;case 4:if(mi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-dn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*mb(i/1960))-i,10<i){t.timeoutHandle=Xd(hr.bind(null,t,Pt,Un),i);break}hr(t,Pt,Un);break;case 5:hr(t,Pt,Un);break;default:throw Error(U(329))}}}return Vt(t,Le()),t.callbackNode===n?JE.bind(null,t):null}function yf(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(vr(t,e).flags|=256),t=Ku(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&vf(e)),t}function vf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function _b(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!pn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~Lp,e&=~Oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),i=1<<n;t[n]=-1,e&=~i}}function ry(t){if(le&6)throw Error(U(327));ys();var e=Cu(t,0);if(!(e&1))return Vt(t,Le()),null;var n=Ku(t,e);if(t.tag!==0&&n===2){var i=$d(t);i!==0&&(e=i,n=yf(t,i))}if(n===1)throw n=Ea,vr(t,0),mi(t,e),Vt(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,Pt,Un),Vt(t,Le()),null}function Up(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ms=Le()+500,Pc&&nr())}}function kr(t){Ti!==null&&Ti.tag===0&&!(le&6)&&ys();var e=le;le|=1;var n=Jt.transition,i=ge;try{if(Jt.transition=null,ge=1,t)return t()}finally{ge=i,Jt.transition=n,le=e,!(le&6)&&nr()}}function zp(){Ut=hs.current,ke(hs)}function vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kx(n)),ze!==null)for(n=ze.return;n!==null;){var i=n;switch(wp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ou();break;case 3:Rs(),ke(Ot),ke(vt),Cp();break;case 5:kp(i);break;case 4:Rs();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:Ip(i.type._context);break;case 22:case 23:zp()}n=n.return}if(Je=t,ze=t=Oi(t.current,null),st=Ut=e,qe=0,Ea=null,Lp=Oc=br=0,Pt=Ko=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}gr=null}return t}function ZE(t,e){do{var n=ze;try{if(Sp(),ru.current=$u,Bu){for(var i=Re.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Bu=!1}if(xr=0,Xe=He=Re=null,Wo=!1,ya=0,Vp.current=null,n===null||n.return===null){qe=1,Ea=e,ze=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=W_(o);if(m!==null){m.flags&=-257,q_(m,o,a,s,e),m.mode&1&&H_(s,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){H_(s,c,e),jp();break e}l=Error(U(426))}}else if(Ce&&a.mode&1){var x=W_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),q_(x,o,a,s,e),Ep(Ds(l,a));break e}}s=l=Ds(l,a),qe!==4&&(qe=2),Ko===null?Ko=[s]:Ko.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=VE(s,l,e);F_(s,v);break e;case 1:a=l;var y=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Di===null||!Di.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=LE(s,a,e);F_(s,R);break e}}s=s.return}while(s!==null)}nT(n)}catch(M){e=M,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function eT(){var t=Hu.current;return Hu.current=$u,t===null?$u:t}function jp(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(br&268435455)&&!(Oc&268435455)||mi(Je,st)}function Ku(t,e){var n=le;le|=2;var i=eT();(Je!==t||st!==e)&&(Un=null,vr(t,e));do try{yb();break}catch(r){ZE(t,r)}while(!0);if(Sp(),le=n,Hu.current=i,ze!==null)throw Error(U(261));return Je=null,st=0,qe}function yb(){for(;ze!==null;)tT(ze)}function vb(){for(;ze!==null&&!HA();)tT(ze)}function tT(t){var e=rT(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?nT(t):ze=e,Vp.current=null}function nT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=db(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,ze=null;return}}else if(n=hb(n,e,Ut),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);qe===0&&(qe=5)}function hr(t,e,n){var i=ge,r=Jt.transition;try{Jt.transition=null,ge=1,wb(t,e,n,i)}finally{Jt.transition=r,ge=i}return null}function wb(t,e,n,i){do ys();while(Ti!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ex(t,s),t===Je&&(ze=Je=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,sT(ku,function(){return ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=ge;ge=1;var a=le;le|=4,Vp.current=null,pb(t,n),YE(n,t),zx(Qd),Pu=!!Gd,Qd=Gd=null,t.current=n,gb(n),WA(),le=a,ge=o,Jt.transition=s}else t.current=n;if(Dl&&(Dl=!1,Ti=t,qu=r),s=t.pendingLanes,s===0&&(Di=null),GA(n.stateNode),Vt(t,Le()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wu)throw Wu=!1,t=mf,mf=null,t;return qu&1&&t.tag!==0&&ys(),s=t.pendingLanes,s&1?t===_f?Go++:(Go=0,_f=t):Go=0,nr(),null}function ys(){if(Ti!==null){var t=Vw(qu),e=Jt.transition,n=ge;try{if(Jt.transition=null,ge=16>t?16:t,Ti===null)var i=!1;else{if(t=Ti,Ti=null,qu=0,le&6)throw Error(U(331));var r=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:qo(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var p=h.sibling,m=h.return;if(KE(h),h===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var x=E.sibling;E.sibling=null,E=x}while(E!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qo(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,H=v;break e}H=s.return}}var y=t.current;for(H=y;H!==null;){o=H;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,H=A;else e:for(o=y;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mc(9,a)}}catch(M){Ne(a,a.return,M)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(le=r,nr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Ac,t)}catch{}i=!0}return i}finally{ge=n,Jt.transition=e}}return!1}function sy(t,e,n){e=Ds(n,e),e=VE(t,e,1),t=Ri(t,e,1),e=At(),t!==null&&(Fa(t,1,e),Vt(t,e))}function Ne(t,e,n){if(t.tag===3)sy(t,t,n);else for(;e!==null;){if(e.tag===3){sy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Di===null||!Di.has(i))){t=Ds(n,t),t=LE(e,t,1),e=Ri(e,t,1),t=At(),e!==null&&(Fa(e,1,t),Vt(e,t));break}}e=e.return}}function Eb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Le()-Fp?vr(t,0):Lp|=n),Vt(t,e)}function iT(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=At();t=Xn(t,e),t!==null&&(Fa(t,e,n),Vt(t,n))}function Tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iT(t,n)}function Sb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),iT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,cb(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ce&&e.flags&1048576&&lE(e,Lu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ou(t,e),t=e.pendingProps;var r=ks(e,vt.current);_s(e,n),r=Rp(null,e,i,t,r,n);var s=Dp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(i)?(s=!0,Nu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,xp(e),r.updater=Dc,e.stateNode=r,r._reactInternals=e,sf(e,i,t,n),e=lf(null,e,i,!0,s,n)):(e.tag=0,Ce&&s&&vp(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ou(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Ab(i),t=on(i,t),r){case 0:e=af(null,e,i,t,n);break e;case 1:e=Q_(null,e,i,t,n);break e;case 11:e=K_(null,e,i,t,n);break e;case 14:e=G_(null,e,i,on(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),af(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),Q_(t,e,i,r,n);case 3:e:{if(jE(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,pE(t,e),zu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ds(Error(U(423)),e),e=Y_(t,e,i,n,r);break e}else if(i!==r){r=Ds(Error(U(424)),e),e=Y_(t,e,i,n,r);break e}else for(zt=Pi(e.stateNode.containerInfo.firstChild),jt=e,Ce=!0,ln=null,n=dE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),i===r){e=Jn(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return gE(e),t===null&&tf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Yd(i,r)?o=null:s!==null&&Yd(i,s)&&(e.flags|=32),zE(t,e),It(t,e,o,n),e.child;case 6:return t===null&&tf(e),null;case 13:return BE(t,e,n);case 4:return bp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ps(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),K_(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(Fu,i._currentValue),i._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===r.children&&!Ot.current){e=Jn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Kn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,_s(e,n),r=Zt(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=on(i,e.pendingProps),r=on(i.type,r),G_(t,e,i,r,n);case 15:return FE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),ou(t,e),e.tag=1,Nt(i)?(t=!0,Nu(e)):t=!1,_s(e,n),NE(e,i,r),sf(e,i,r,n),lf(null,e,i,!0,t,n);case 19:return $E(t,e,n);case 22:return UE(t,e,n)}throw Error(U(156,e.tag))};function sT(t,e){return Dw(t,e)}function Ib(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,i){return new Ib(t,e,n,i)}function Bp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ab(t){if(typeof t=="function")return Bp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ap)return 11;if(t===lp)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Bp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return wr(n.children,r,s,e);case op:o=8,r|=8;break;case kd:return t=Yt(12,n,e,r|2),t.elementType=kd,t.lanes=s,t;case Cd:return t=Yt(13,n,e,r),t.elementType=Cd,t.lanes=s,t;case Pd:return t=Yt(19,n,e,r),t.elementType=Pd,t.lanes=s,t;case gw:return Nc(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fw:o=10;break e;case pw:o=9;break e;case ap:o=11;break e;case lp:o=14;break e;case fi:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function wr(t,e,n,i){return t=Yt(7,t,i,e),t.lanes=n,t}function Nc(t,e,n,i){return t=Yt(22,t,i,e),t.elementType=gw,t.lanes=n,t.stateNode={isHidden:!1},t}function td(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function nd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function $p(t,e,n,i,r,s,o,a,l){return t=new xb(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xp(s),t}function bb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function oT(t){if(!t)return Hi;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return oE(t,n,e)}return e}function aT(t,e,n,i,r,s,o,a,l){return t=$p(n,i,!0,t,r,s,o,a,l),t.context=oT(null),n=t.current,i=At(),r=Mi(n),s=Kn(i,r),s.callback=e??null,Ri(n,s,r),t.current.lanes=r,Fa(t,r,i),Vt(t,i),t}function Vc(t,e,n,i){var r=e.current,s=At(),o=Mi(r);return n=oT(n),e.context===null?e.context=n:e.pendingContext=n,e=Kn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ri(r,e,o),t!==null&&(fn(t,r,o,s),iu(t,r,o)),o}function Gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){oy(t,e),(t=t.alternate)&&oy(t,e)}function kb(){return null}var lT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wp(t){this._internalRoot=t}Lc.prototype.render=Wp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Vc(t,e,null,null)};Lc.prototype.unmount=Wp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kr(function(){Vc(null,t,null,null)}),e[Yn]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gi.length&&e!==0&&e<gi[n].priority;n++);gi.splice(n,0,t),n===0&&jw(t)}};function qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ay(){}function Cb(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Gu(o);s.call(c)}}var o=aT(e,i,t,0,null,!1,!1,"",ay);return t._reactRootContainer=o,t[Yn]=o.current,fa(t.nodeType===8?t.parentNode:t),kr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Gu(l);a.call(c)}}var l=$p(t,0,!1,null,null,!1,!1,"",ay);return t._reactRootContainer=l,t[Yn]=l.current,fa(t.nodeType===8?t.parentNode:t),kr(function(){Vc(e,l,n,i)}),l}function Uc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Gu(o);a.call(l)}}Vc(e,o,t,r)}else o=Cb(n,e,t,r,i);return Gu(o)}Lw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(hp(e,n|1),Vt(e,Le()),!(le&6)&&(Ms=Le()+500,nr()))}break;case 13:kr(function(){var i=Xn(t,1);if(i!==null){var r=At();fn(i,t,1,r)}}),Hp(t,1)}};dp=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=At();fn(e,t,134217728,n)}Hp(t,134217728)}};Fw=function(t){if(t.tag===13){var e=Mi(t),n=Xn(t,e);if(n!==null){var i=At();fn(n,t,e,i)}Hp(t,e)}};Uw=function(){return ge};zw=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};zd=function(t,e,n){switch(e){case"input":if(Md(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Cc(i);if(!r)throw Error(U(90));_w(i),Md(i,r)}}}break;case"textarea":vw(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};xw=Up;bw=kr;var Pb={usingClientEntryPoint:!1,Events:[za,ss,Cc,Iw,Aw,Up]},Eo={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rb={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pw(t),t===null?null:t.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||kb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{Ac=Ml.inject(Rb),In=Ml}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pb;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(e))throw Error(U(200));return bb(t,e,null,n)};$t.createRoot=function(t,e){if(!qp(t))throw Error(U(299));var n=!1,i="",r=lT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=$p(t,1,!1,null,null,n,!1,i,r),t[Yn]=e.current,fa(t.nodeType===8?t.parentNode:t),new Wp(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Pw(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return kr(t)};$t.hydrate=function(t,e,n){if(!Fc(e))throw Error(U(200));return Uc(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!qp(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=lT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aT(e,null,t,1,n??null,r,!1,s,o),t[Yn]=e.current,fa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Lc(e)};$t.render=function(t,e,n){if(!Fc(e))throw Error(U(200));return Uc(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Fc(t))throw Error(U(40));return t._reactRootContainer?(kr(function(){Uc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};$t.unstable_batchedUpdates=Up;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Fc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Uc(t,e,n,!1,i)};$t.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(t){console.error(t)}}uT(),uw.exports=$t;var Db=uw.exports,ly=Db;xd.createRoot=ly.createRoot,xd.hydrateRoot=ly.hydrateRoot;const uy=[{value:"done",label:""},{value:"not_done",label:""},{value:"na",label:""}],Mb=({assessorOptions:t,loading:e,onSave:n})=>{const[i,r]=K.useState(t.length?"select":"custom"),[s,o]=K.useState(""),[a,l]=K.useState(""),[c,h]=K.useState("done"),[d,p]=K.useState("done"),[m,_]=K.useState(""),[E,x]=K.useState(""),[v,y]=K.useState(""),[A,R]=K.useState(null),M=K.useMemo(()=>i==="select"?"":"",[i]),O=K.useMemo(()=>{const S=parseFloat(E),b=parseFloat(v);if(!S||!b)return null;const C=S/100;if(C<=0)return null;const P=b/(C*C);return Number.isFinite(P)?P:null},[E,v]),I=O!==null&&O<=18.5;K.useEffect(()=>{t.length&&!s&&o(t[0])},[t,s]);const w=async S=>{S.preventDefault(),R(null);const b=i==="select"?s:a.trim();if(!b){R("");return}const C={assessor:b,boneProtection:c,incontinenceCare:d,notes:m.trim(),assessmentDate:new Date().toISOString()};await n(C),_(""),h("done"),p("done"),x(""),y("")};return F.jsxs("form",{className:"card",onSubmit:w,children:[F.jsxs("section",{className:"card-section",children:[F.jsxs("div",{className:"section-header",children:[F.jsx("h2",{children:""}),F.jsxs("div",{className:"chip-group",children:[F.jsx("button",{type:"button",className:`chip ${i==="select"?"selected":""}`,onClick:()=>r("select"),disabled:!t.length,children:""}),F.jsx("button",{type:"button",className:`chip ${i==="custom"?"selected":""}`,onClick:()=>r("custom"),children:""})]})]}),i==="select"?F.jsxs("label",{className:"field",children:[F.jsx("span",{children:M}),F.jsxs("select",{value:s,onChange:S=>o(S.target.value),children:[F.jsx("option",{value:"",children:""}),t.map(S=>F.jsx("option",{value:S,children:S},S))]})]}):F.jsxs("label",{className:"field",children:[F.jsx("span",{children:M}),F.jsx("input",{type:"text",value:a,placeholder:"",onChange:S=>l(S.target.value),autoComplete:"name"})]})]}),F.jsxs("section",{className:"card-section",children:[F.jsx("h2",{children:""}),F.jsxs("div",{className:"bmi-panel",children:[F.jsxs("div",{className:"field",children:[F.jsx("span",{children:" (cm)"}),F.jsx("input",{type:"number",min:"0",step:"0.1",inputMode:"decimal",value:E,onChange:S=>x(S.target.value),placeholder:"160"})]}),F.jsxs("div",{className:"field",children:[F.jsx("span",{children:" (kg)"}),F.jsx("input",{type:"number",min:"0",step:"0.1",inputMode:"decimal",value:v,onChange:S=>y(S.target.value),placeholder:"45.5"})]}),O!==null&&F.jsxs("div",{className:"bmi-result",children:[F.jsxs("p",{children:["BMI: ",F.jsx("strong",{children:O.toFixed(1)})]}),F.jsx("span",{className:`bmi-flag ${I?"alert":"muted"}`,children:I?"":""})]})]}),F.jsxs("div",{className:"field",children:[F.jsxs("div",{className:"field-label",children:[F.jsx("strong",{children:"A. /"}),F.jsx("p",{children:""})]}),F.jsx("div",{className:"status-options",children:uy.map(S=>F.jsxs("label",{children:[F.jsx("input",{type:"radio",name:"boneProtection",value:S.value,checked:c===S.value,onChange:()=>h(S.value)}),S.label]},S.value))})]}),F.jsxs("div",{className:"field",children:[F.jsxs("div",{className:"field-label",children:[F.jsx("strong",{children:"B. "}),F.jsx("p",{children:""})]}),F.jsx("div",{className:"status-options",children:uy.map(S=>F.jsxs("label",{children:[F.jsx("input",{type:"radio",name:"incontinenceCare",value:S.value,checked:d===S.value,onChange:()=>p(S.value)}),S.label]},S.value))})]}),F.jsxs("label",{className:"field",children:[F.jsx("span",{children:"C. "}),F.jsx("textarea",{rows:4,value:m,onChange:S=>_(S.target.value),placeholder:""})]})]}),A&&F.jsx("p",{className:"error",children:A}),F.jsx("button",{type:"submit",className:"primary",disabled:e,children:e?"...":""})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ba(t){return t+.5|0}const Si=(t,e,n)=>Math.max(Math.min(t,n),e);function Ro(t){return Si(Ba(t*2.55),0,255)}function Ni(t){return Si(Ba(t*255),0,255)}function jn(t){return Si(Ba(t/2.55)/100,0,1)}function cy(t){return Si(Ba(t*100),0,100)}const Wt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wf=[..."0123456789ABCDEF"],Ob=t=>wf[t&15],Nb=t=>wf[(t&240)>>4]+wf[t&15],Ol=t=>(t&240)>>4===(t&15),Vb=t=>Ol(t.r)&&Ol(t.g)&&Ol(t.b)&&Ol(t.a);function Lb(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Wt[t[1]]*17,g:255&Wt[t[2]]*17,b:255&Wt[t[3]]*17,a:e===5?Wt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Wt[t[1]]<<4|Wt[t[2]],g:Wt[t[3]]<<4|Wt[t[4]],b:Wt[t[5]]<<4|Wt[t[6]],a:e===9?Wt[t[7]]<<4|Wt[t[8]]:255})),n}const Fb=(t,e)=>t<255?e(t):"";function Ub(t){var e=Vb(t)?Ob:Nb;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Fb(t.a,e):void 0}const zb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cT(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function jb(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Bb(t,e,n){const i=cT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function $b(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Kp(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=$b(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Gp(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ni)}function Qp(t,e,n){return Gp(cT,t,e,n)}function Hb(t,e,n){return Gp(Bb,t,e,n)}function Wb(t,e,n){return Gp(jb,t,e,n)}function hT(t){return(t%360+360)%360}function qb(t){const e=zb.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ro(+e[5]):Ni(+e[5]));const r=hT(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Hb(r,s,o):e[1]==="hsv"?i=Wb(r,s,o):i=Qp(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function Kb(t,e){var n=Kp(t);n[0]=hT(n[0]+e),n=Qp(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Gb(t){if(!t)return;const e=Kp(t),n=e[0],i=cy(e[1]),r=cy(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${jn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const hy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Qb(){const t={},e=Object.keys(dy),n=Object.keys(hy);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,hy[s]);s=parseInt(dy[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Nl;function Yb(t){Nl||(Nl=Qb(),Nl.transparent=[0,0,0,0]);const e=Nl[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Xb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Jb(t){const e=Xb.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ro(o):Si(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ro(i):Si(i,0,255)),r=255&(e[4]?Ro(r):Si(r,0,255)),s=255&(e[6]?Ro(s):Si(s,0,255)),{r:i,g:r,b:s,a:n}}}function Zb(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${jn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const id=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Gr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ek(t,e,n){const i=Gr(jn(t.r)),r=Gr(jn(t.g)),s=Gr(jn(t.b));return{r:Ni(id(i+n*(Gr(jn(e.r))-i))),g:Ni(id(r+n*(Gr(jn(e.g))-r))),b:Ni(id(s+n*(Gr(jn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Vl(t,e,n){if(t){let i=Kp(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Qp(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function dT(t,e){return t&&Object.assign(e||{},t)}function fy(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ni(t[3]))):(e=dT(t,{r:0,g:0,b:0,a:1}),e.a=Ni(e.a)),e}function tk(t){return t.charAt(0)==="r"?Jb(t):qb(t)}class Ta{constructor(e){if(e instanceof Ta)return e;const n=typeof e;let i;n==="object"?i=fy(e):n==="string"&&(i=Lb(e)||Yb(e)||tk(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=dT(this._rgb);return e&&(e.a=jn(e.a)),e}set rgb(e){this._rgb=fy(e)}rgbString(){return this._valid?Zb(this._rgb):void 0}hexString(){return this._valid?Ub(this._rgb):void 0}hslString(){return this._valid?Gb(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=ek(this._rgb,e._rgb,n)),this}clone(){return new Ta(this.rgb)}alpha(e){return this._rgb.a=Ni(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ba(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vl(this._rgb,2,e),this}darken(e){return Vl(this._rgb,2,-e),this}saturate(e){return Vl(this._rgb,1,e),this}desaturate(e){return Vl(this._rgb,1,-e),this}rotate(e){return Kb(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Vn(){}const nk=(()=>{let t=0;return()=>t++})();function we(t){return t==null}function We(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ue(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function tn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _n(t,e){return tn(t)?t:e}function ae(t,e){return typeof t>"u"?e:t}const ik=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,fT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function be(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pe(t,e,n,i){let r,s,o;if(We(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ue(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Qu(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Yu(t){if(We(t))return t.map(Yu);if(ue(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Yu(t[n[r]]);return e}return t}function pT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function rk(t,e,n,i){if(!pT(t))return;const r=e[t],s=n[t];ue(r)&&ue(s)?Sa(r,s,i):e[t]=Yu(s)}function Sa(t,e,n){const i=We(e)?e:[e],r=i.length;if(!ue(t))return t;n=n||{};const s=n.merger||rk;let o;for(let a=0;a<r;++a){if(o=i[a],!ue(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Qo(t,e){return Sa(t,e,{merger:sk})}function sk(t,e,n){if(!pT(t))return;const i=e[t],r=n[t];ue(i)&&ue(r)?Qo(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Yu(r))}const py={"":t=>t,x:t=>t.x,y:t=>t.y};function ok(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function ak(t){const e=ok(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Cr(t,e){return(py[e]||(py[e]=ak(e)))(t)}function Yp(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ia=t=>typeof t<"u",Wi=t=>typeof t=="function",gy=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function lk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ve=Math.PI,Be=2*ve,Xu=Number.POSITIVE_INFINITY,uk=ve/180,Ke=ve/2,ar=ve/4,my=ve*2/3,gT=Math.log10,Vi=Math.sign;function cu(t,e,n){return Math.abs(t-e)<n}function _y(t){const e=Math.round(t);t=cu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gT(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function ck(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function hk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ju(t){return!hk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function dk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function fk(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hn(t){return t*(ve/180)}function pk(t){return t*(180/ve)}function yy(t){if(!tn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function mT(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ve&&(s+=Be),{angle:s,distance:r}}function gk(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function En(t){return(t%Be+Be)%Be}function Zu(t,e,n,i){const r=En(t),s=En(e),o=En(n),a=En(s-r),l=En(o-r),c=En(r-s),h=En(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function Mt(t,e,n){return Math.max(e,Math.min(n,t))}function mk(t){return Mt(t,-32768,32767)}function _r(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Xp(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Ef=(t,e,n,i)=>Xp(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),_k=(t,e,n)=>Xp(t,n,i=>t[i][e]>=n);function yk(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const _T=["push","pop","shift","splice","unshift"];function vk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_T.forEach(n=>{const i="_onData"+Yp(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function vy(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(_T.forEach(s=>{delete t[s]}),delete t._chartjs)}function yT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const vT=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function wT(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,vT.call(window,()=>{i=!1,t.apply(e,n)}))}}function wk(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Jp=t=>t==="start"?"left":t==="end"?"right":"center",pt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Ek=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,Ll=t=>t===0||t===1,wy=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Be/n)),Ey=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Be/n)+1,Yo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ke)+1,easeOutSine:t=>Math.sin(t*Ke),easeInOutSine:t=>-.5*(Math.cos(ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ll(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ll(t)?t:wy(t,.075,.3),easeOutElastic:t=>Ll(t)?t:Ey(t,.075,.3),easeInOutElastic(t){return Ll(t)?t:t<.5?.5*wy(t*2,.1125,.45):.5+.5*Ey(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Yo.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Yo.easeInBounce(t*2)*.5:Yo.easeOutBounce(t*2-1)*.5+.5};function ET(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ty(t){return ET(t)?t:new Ta(t)}function rd(t){return ET(t)?t:new Ta(t).saturate(.5).darken(.1).hexString()}const Tk=["x","y","borderWidth","radius","tension"],Sk=["color","borderColor","backgroundColor"];function Ik(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Sk},numbers:{type:"number",properties:Tk}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Ak(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Sy=new Map;function xk(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Sy.get(n);return i||(i=new Intl.NumberFormat(t,e),Sy.set(n,i)),i}function Zp(t,e,n){return xk(e,n).format(t)}const bk={values(t){return We(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=kk(t,n)}const o=gT(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zp(t,i,l)}};function kk(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var TT={formatters:bk};function Ck(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Pr=Object.create(null),Tf=Object.create(null);function Xo(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function sd(t,e,n){return typeof e=="string"?Sa(Xo(t,e),n):Sa(Xo(t,""),e)}class Pk{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>rd(r.backgroundColor),this.hoverBorderColor=(i,r)=>rd(r.borderColor),this.hoverColor=(i,r)=>rd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sd(this,e,n)}get(e){return Xo(this,e)}describe(e,n){return sd(Tf,e,n)}override(e,n){return sd(Pr,e,n)}route(e,n,i,r){const s=Xo(this,e),o=Xo(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ue(l)?Object.assign({},c,l):ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new Pk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ik,Ak,Ck]);function Rk(t){return!t||we(t.size)||we(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Iy(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function lr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Ay(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function xy(t,e,n,i){ST(t,e,n,i,null)}function ST(t,e,n,i,r){let s,o,a,l,c,h,d,p;const m=e.pointStyle,_=e.rotation,E=e.radius;let x=(_||0)*uk;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,E,0,0,Be):t.arc(n,i,E,0,Be),t.closePath();break;case"triangle":h=r?r/2:E,t.moveTo(n+Math.sin(x)*h,i-Math.cos(x)*E),x+=my,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*E),x+=my,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(x+ar)*l,d=Math.cos(x+ar)*(r?r/2-c:l),a=Math.sin(x+ar)*l,p=Math.sin(x+ar)*(r?r/2-c:l),t.arc(n-d,i-a,c,x-ve,x-Ke),t.arc(n+p,i-o,c,x-Ke,x),t.arc(n+d,i+a,c,x,x+Ke),t.arc(n-p,i+o,c,x+Ke,x+ve),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*E,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}x+=ar;case"rectRot":d=Math.cos(x)*(r?r/2:E),o=Math.cos(x)*E,a=Math.sin(x)*E,p=Math.sin(x)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+p,i-o),t.lineTo(n+d,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":x+=ar;case"cross":d=Math.cos(x)*(r?r/2:E),o=Math.cos(x)*E,a=Math.sin(x)*E,p=Math.sin(x)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":d=Math.cos(x)*(r?r/2:E),o=Math.cos(x)*E,a=Math.sin(x)*E,p=Math.sin(x)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),x+=ar,d=Math.cos(x)*(r?r/2:E),o=Math.cos(x)*E,a=Math.sin(x)*E,p=Math.sin(x)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=r?r/2:Math.cos(x)*E,a=Math.sin(x)*E,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(r?r/2:E),i+Math.sin(x)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function IT(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function eg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function tg(t){t.restore()}function Dk(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),we(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Mk(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function Ok(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Aa(t,e,n,i,r,s={}){const o=We(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Dk(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Ok(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),we(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Mk(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function ec(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ve,ve,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ve,Ke,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ke,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ke,!0),t.lineTo(n+o.topLeft,i)}const Nk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Lk(t,e){const n=(""+t).match(Nk);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Fk=t=>+t||0;function ng(t,e){const n={},i=ue(e),r=i?Object.keys(e):e,s=ue(t)?i?o=>ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Fk(s(o));return n}function AT(t){return ng(t,{top:"y",right:"x",bottom:"y",left:"x"})}function vs(t){return ng(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nn(t){const e=AT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yt(t,e){t=t||{},e=e||Fe.font;let n=ae(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ae(t.style,e.style);i&&!(""+i).match(Vk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ae(t.family,e.family),lineHeight:Lk(ae(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ae(t.weight,e.weight),string:""};return r.string=Rk(r),r}function Fl(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Uk(t,e,n){const{min:i,max:r}=t,s=fT(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Hs(t,e){return Object.assign(Object.create(t),e)}function ig(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=CT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ig([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return bT(a,l,()=>Kk(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ky(a).includes(l)},ownKeys(a){return ky(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Os(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:xT(t,i),setContext:s=>Os(t,s,n,i),override:s=>Os(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return bT(s,o,()=>jk(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function xT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Wi(n)?n:()=>n,isIndexable:Wi(i)?i:()=>i}}const zk=(t,e)=>t?t+Yp(e):e,rg=(t,e)=>ue(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function bT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function jk(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Wi(a)&&o.isScriptable(e)&&(a=Bk(e,a,t,n)),We(a)&&a.length&&(a=$k(e,a,t,o.isIndexable)),rg(e,a)&&(a=Os(a,r,s&&s[e],o)),a}function Bk(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),rg(t,l)&&(l=sg(r._scopes,r,t,l)),l}function $k(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ue(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=sg(c,r,t,h);e.push(Os(d,s,o&&o[t],a))}}return e}function kT(t,e,n){return Wi(t)?t(e,n):t}const Hk=(t,e)=>t===!0?e:typeof t=="string"?Cr(e,t):void 0;function Wk(t,e,n,i,r){for(const s of e){const o=Hk(n,s);if(o){t.add(o);const a=kT(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function sg(t,e,n,i){const r=e._rootScopes,s=kT(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=by(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=by(a,o,s,l,i),l===null)?!1:ig(Array.from(a),[""],r,s,()=>qk(e,n,i))}function by(t,e,n,i,r){for(;n;)n=Wk(t,e,n,i,r);return n}function qk(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return We(r)&&ue(n)?n:r||{}}function Kk(t,e,n,i){let r;for(const s of e)if(r=CT(zk(s,t),n),typeof r<"u")return rg(t,r)?sg(n,i,t,r):r}function CT(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function ky(t){let e=t._keys;return e||(e=t._keys=Gk(t._scopes)),e}function Gk(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function og(){return typeof window<"u"&&typeof document<"u"}function ag(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function tc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const zc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Qk(t,e){return zc(t).getPropertyValue(e)}const Yk=["top","right","bottom","left"];function Er(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Yk[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Xk=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Jk(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Xk(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function dr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=zc(n),s=r.boxSizing==="border-box",o=Er(r,"padding"),a=Er(r,"border","width"),{x:l,y:c,box:h}=Jk(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:_}=e;return s&&(m-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-p)/_*n.height/i)}}function Zk(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&ag(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=zc(s),l=Er(a,"border","width"),c=Er(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=tc(a.maxWidth,s,"clientWidth"),r=tc(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Xu,maxHeight:r||Xu}}const Ii=t=>Math.round(t*10)/10;function eC(t,e,n,i){const r=zc(t),s=Er(r,"margin"),o=tc(r.maxWidth,t,"clientWidth")||Xu,a=tc(r.maxHeight,t,"clientHeight")||Xu,l=Zk(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const p=Er(r,"border","width"),m=Er(r,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=Ii(Math.min(c,o,l.maxWidth)),h=Ii(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ii(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Ii(Math.floor(h*i))),{width:c,height:h}}function Cy(t,e,n){const i=e||1,r=Ii(t.height*i),s=Ii(t.width*i);t.height=Ii(t.height),t.width=Ii(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const tC=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};og()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Py(t,e){const n=Qk(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const nC=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},iC=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ws(t,e,n){return t?nC(e,n):iC()}function PT(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function RT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ul(t,e,n){return t.options.clip?t[n]:e[n]}function rC(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Ul(n,e,"left"),right:Ul(n,e,"right"),top:Ul(i,e,"top"),bottom:Ul(i,e,"bottom")}:e}function sC(t,e){const n=e._clip;if(n.disabled)return!1;const i=rC(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class oC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=vT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ln=new oC;const Ry="transparent",aC={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Ty(t||Ry),r=i.valid&&Ty(e||Ry);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class lC{constructor(e,n,i,r){const s=n[i];r=Fl([e.to,r,s,e.from]);const o=Fl([e.from,s,r]);this._active=!0,this._fn=e.fn||aC[e.type||typeof o],this._easing=Yo[e.easing]||Yo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Fl([e.to,n,r,e.from]),this._from=Fl([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class DT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ue(e))return;const n=Object.keys(Fe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const o={};for(const a of n)o[a]=s[a];(We(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=cC(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&uC(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=i.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new lC(p,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ln.add(this._chart,i),!0}}function uC(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function cC(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Dy(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function hC(t,e,n){if(n===!1)return!1;const i=Dy(t,n),r=Dy(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function dC(t){let e,n,i,r;return ue(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function MT(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function My(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],tn(c)&&(s||e===0||Vi(e)===Vi(c))&&(e+=c)}return!h&&!i.all?0:e}function fC(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function od(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function pC(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function gC(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function mC(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Oy(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Ny(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=pC(s,o,i),d=e.length;let p;for(let m=0;m<d;++m){const _=e[m],{[l]:E,[c]:x}=_,v=_._stacks||(_._stacks={});p=v[c]=mC(r,h,E),p[a]=x,p._top=Oy(p,o,!0,i.type),p._bottom=Oy(p,o,!1,i.type);const y=p._visualValues||(p._visualValues={});y[a]=x}}function ad(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function _C(t,e){return Hs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yC(t,e,n){return Hs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function To(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const ld=t=>t==="reset"||t==="none",Vy=(t,e)=>e?t:Object.assign({},t),vC=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:MT(n,!0),values:null};class Es{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=od(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&To(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,p,m,_)=>d==="x"?p:d==="r"?_:m,s=n.xAxisID=ae(i.xAxisID,ad(e,"x")),o=n.yAxisID=ae(i.yAxisID,ad(e,"y")),a=n.rAxisID=ae(i.rAxisID,ad(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&vy(this._data,this),e._stacked&&To(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ue(n)){const r=this._cachedMeta;this._data=fC(n,r)}else if(i!==n){if(i){vy(i,this);const r=this._cachedMeta;To(r),r._parsed=[]}n&&Object.isExtensible(n)&&vk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=od(n.vScale,n),n.stack!==i.stack&&(r=!0,To(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Ny(this,n._parsed),n._stacked=od(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,p;if(this._parsing===!1)i._parsed=r,i._sorted=!0,p=r;else{We(r[e])?p=this.parseArrayData(i,r,e,n):ue(r[e])?p=this.parseObjectData(i,r,e,n):p=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=p[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&Ny(this,p)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let p,m,_;for(p=0,m=r;p<m;++p)_=p+i,d[p]={[a]:h||s.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,p,m;for(h=0,d=r;h<d;++h)p=h+i,m=n[p],c[h]={x:s.parse(Cr(m,a),p),y:o.parse(Cr(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:MT(r,!0),values:n._stacks[e.axis]._visualValues};return My(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=My(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=vC(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=gC(a);let p,m;function _(){m=r[p];const E=m[a.axis];return!tn(m[e.axis])||h>E||d<E}for(p=0;p<o&&!(!_()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!_()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],tn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=dC(ae(this.options.clip,hC(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=yC(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=_C(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Ia(i);if(a)return Vy(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Fe.elements[e]),_=()=>this.getContext(i,r,n),E=c.resolveNamedOptions(p,m,_,d);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(Vy(E,l))),E}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,i,n))}const c=new DT(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ld(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){ld(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!ld(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&To(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(Es,"defaults",{}),Y(Es,"datasetElementType",null),Y(Es,"dataElementType",null);function wC(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=yT(i.sort((r,s)=>r-s))}return t._cache.$bar}function EC(t){const e=t.iScale,n=wC(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Ia(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function TC(t,e,n,i){const r=n.barThickness;let s,o;return we(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function SC(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function IC(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function OT(t,e,n,i){return We(t)?IC(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Ly(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,d,p;for(c=n,h=n+i;c<h;++c)p=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(OT(p,d,s,c));return l}function ud(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function AC(t,e,n){return t!==0?Vi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function xC(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function bC(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=xC(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[Fy(h,o,a,l)]=!0,r=c)),s[Fy(r,o,a,l)]=!0,t.borderSkipped=s}function Fy(t,e,n,i){return i?(t=kC(t,e,n),t=Uy(t,n,e)):t=Uy(t,e,n),t}function kC(t,e,n){return t===e?n:t===n?e:t}function Uy(t,e,n){return t==="start"?e:t==="end"?n:t}function CC(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class hu extends Es{parsePrimitiveData(e,n,i,r){return Ly(e,n,i,r)}parseArrayData(e,n,i,r){return Ly(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let p,m,_,E;for(p=i,m=i+r;p<m;++p)E=n[p],_={},_[s.axis]=s.parse(Cr(E,c),p),d.push(OT(Cr(E,h),_,o,p));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=ud(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,r);for(let m=n;m<n+i;m++){const _=this.getParsed(m),E=s||we(_[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,h),v=(_._stacks||{})[a.axis],y={horizontal:c,base:E.base,enableBorderRadius:!v||ud(_._custom)||o===v._top||o===v._bottom,x:c?E.head:x.center,y:c?x.center:E.head,height:c?x.size:Math.abs(E.size),width:c?Math.abs(E.size):x.size};p&&(y.options=d||this.resolveDataElementOptions(m,e[m].active?"active":r));const A=y.options||e[m].options;bC(y,A,v,o),CC(y,A,h.ratio),this.updateElement(e[m],m,y,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(m=>m[i.axis]===l),p=d&&d[h.vScale.axis];if(we(p)||isNaN(p))return!0};for(const h of r)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[ae(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||EC(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=ud(c);let d=l[n.axis],p=0,m=i?this.applyStack(n,l,i):d,_,E;m!==d&&(p=m-d,m=d),h&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&Vi(d)!==Vi(c.barEnd)&&(p=0),p+=d);const x=!we(s)&&!h?s:p;let v=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?_=n.getPixelForValue(p+m):_=v,E=_-v,Math.abs(E)<o){E=AC(E,n,a)*o,d===a&&(v-=E/2);const y=n.getPixelForDecimal(0),A=n.getPixelForDecimal(1),R=Math.min(y,A),M=Math.max(y,A);v=Math.max(Math.min(v,M),R),_=v+E,i&&!h&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(_)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const y=Vi(E)*n.getLineWidthForValue(a)/2;v+=y,E-=y}return{size:E,base:v,head:_,center:_+E/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=ae(r.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const h=s?this._getStackCount(e):n.stackCount,d=r.barThickness==="flex"?SC(e,n,r,h*c):TC(e,n,r,h*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ae(p,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=d.start+d.chunk*_+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}Y(hu,"id","bar"),Y(hu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(hu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function PC(t,e,n){let i=1,r=1,s=0,o=0;if(e<Be){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),p=Math.sin(l),m=(A,R,M)=>Zu(A,a,l,!0)?1:Math.max(R,R*n,M,M*n),_=(A,R,M)=>Zu(A,a,l,!0)?-1:Math.min(R,R*n,M,M*n),E=m(0,c,d),x=m(Ke,h,p),v=_(ve,c,d),y=_(ve+Ke,h,p);i=(E-v)/2,r=(x-y)/2,s=-(E+v)/2,o=-(x+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Do extends Es{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(ue(i[e])){const{key:l="value"}=this._parsing;s=c=>+Cr(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Hn(this.options.rotation-90)}_getCircumference(){return Hn(this.options.circumference)}_getRotationExtents(){let e=Be,n=-Be;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(ik(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:_,offsetY:E}=PC(d,h,l),x=(i.width-o)/p,v=(i.height-o)/m,y=Math.max(Math.min(x,v)/2,0),A=fT(this.options.radius,y),R=Math.max(A*l,0),M=(A-R)/this._getVisibleDatasetWeightTotal();this.offsetX=_*A,this.offsetY=E*A,r.total=this.calculateTotal(),this.outerRadius=A-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Be)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=s&&c.animateScale,m=p?0:this.innerRadius,_=p?0:this.outerRadius,{sharedOptions:E,includeOptions:x}=this._getSharedOptions(n,r);let v=this._getRotation(),y;for(y=0;y<n;++y)v+=this._circumference(y,s);for(y=n;y<n+i;++y){const A=this._circumference(y,s),R=e[y],M={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+A,circumference:A,outerRadius:_,innerRadius:m};x&&(M.options=E||this.resolveDataElementOptions(y,R.active?"active":r)),v+=A,this.updateElement(R,y,M,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Be*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Zp(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ae(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(Do,"id","doughnut"),Y(Do,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(Do,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(Do,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:i,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});function ur(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lg{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(lg.prototype,e)}init(){}formats(){return ur()}parse(){return ur()}format(){return ur()}add(){return ur()}diff(){return ur()}startOf(){return ur()}endOf(){return ur()}}var RC={_date:lg};function DC(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?_k:Ef;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),m=c(s,e,n+d);return{lo:p.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:p}=t,m=p.slice(0,h.lo+1).reverse().findIndex(E=>!we(E[d.axis]));h.lo-=Math.max(0,m);const _=p.slice(h.hi).findIndex(E=>!we(E[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:s.length-1}}function jc(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=DC(s[a],e,o,r);for(let m=d;m<=p;++m){const _=h[m];_.skip||i(_,c,m)}}}function MC(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function cd(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||jc(t,n,e,function(a,l,c){!r&&!IT(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function OC(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=mT(o,{x:e.x,y:e.y});Zu(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return jc(t,n,e,s),r}function NC(t,e,n,i,r,s){let o=[];const a=MC(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const _=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(_))&&!m)return;const x=a(e,_);x<l?(o=[{element:h,datasetIndex:d,index:p}],l=x):x===l&&o.push({element:h,datasetIndex:d,index:p})}return jc(t,n,e,c),o}function hd(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?OC(t,e,n,r):NC(t,e,n,i,r,s)}function zy(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return jc(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var VC={modes:{index(t,e,n,i){const r=dr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?cd(t,r,s,i,o):hd(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=dr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?cd(t,r,s,i,o):hd(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=dr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return cd(t,r,s,i,o)},nearest(t,e,n,i){const r=dr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hd(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=dr(e,t);return zy(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=dr(e,t);return zy(t,r,"y",n.intersect,i)}}};const NT=["left","top","right","bottom"];function So(t,e){return t.filter(n=>n.pos===e)}function jy(t,e){return t.filter(n=>NT.indexOf(n.pos)===-1&&n.box.axis===e)}function Io(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function LC(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function FC(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!NT.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function UC(t,e){const n=FC(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function zC(t){const e=LC(t),n=Io(e.filter(c=>c.box.fullSize),!0),i=Io(So(e,"left"),!0),r=Io(So(e,"right")),s=Io(So(e,"top"),!0),o=Io(So(e,"bottom")),a=jy(e,"x"),l=jy(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:So(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function By(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function VT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function jC(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ue(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&VT(o,s.getPadding());const a=Math.max(0,e.outerWidth-By(o,t,"left","right")),l=Math.max(0,e.outerHeight-By(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function BC(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function $C(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Mo(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,$C(a.horizontal,e));const{same:d,other:p}=jC(e,n,a,i);c|=d&&r.length,h=h||p,l.fullSize||r.push(a)}return c&&Mo(r,e,n,i)||h}function zl(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function $y(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;Ia(c.start)&&(o=c.start),l.fullSize?zl(l,r.left,o,n.outerWidth-r.right-r.left,p):zl(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;Ia(c.start)&&(s=c.start),l.fullSize?zl(l,s,r.top,p,n.outerHeight-r.bottom-r.top):zl(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Xt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=nn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=zC(t.boxes),l=a.vertical,c=a.horizontal;pe(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,x)=>x.box.options&&x.box.options.display===!1?E:E+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);VT(p,nn(i));const m=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),_=UC(l.concat(c),d);Mo(a.fullSize,m,d,_),Mo(l,m,d,_),Mo(c,m,d,_)&&Mo(l,m,d,_),BC(m),$y(a.leftAndTop,m,d,_),m.x+=m.w,m.y+=m.h,$y(a.rightAndBottom,m,d,_),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},pe(a.chartArea,E=>{const x=E.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class LT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class HC extends LT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const du="$chartjs",WC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hy=t=>t===null||t==="";function qC(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[du]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Hy(r)){const s=Py(t,"width");s!==void 0&&(t.width=s)}if(Hy(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Py(t,"height");s!==void 0&&(t.height=s)}return t}const FT=tC?{passive:!0}:!1;function KC(t,e,n){t&&t.addEventListener(e,n,FT)}function GC(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,FT)}function QC(t,e){const n=WC[t.type]||t.type,{x:i,y:r}=dr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function nc(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function YC(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||nc(a.addedNodes,i),o=o&&!nc(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function XC(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||nc(a.removedNodes,i),o=o&&!nc(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const xa=new Map;let Wy=0;function UT(){const t=window.devicePixelRatio;t!==Wy&&(Wy=t,xa.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function JC(t,e){xa.size||window.addEventListener("resize",UT),xa.set(t,e)}function ZC(t){xa.delete(t),xa.size||window.removeEventListener("resize",UT)}function eP(t,e,n){const i=t.canvas,r=i&&ag(i);if(!r)return;const s=wT((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),JC(t,s),o}function dd(t,e,n){n&&n.disconnect(),e==="resize"&&ZC(t)}function tP(t,e,n){const i=t.canvas,r=wT(s=>{t.ctx!==null&&n(QC(s,t))},t);return KC(i,e,r),r}class nP extends LT{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(qC(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[du])return!1;const i=n[du].initial;["height","width"].forEach(s=>{const o=i[s];we(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[du],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:YC,detach:XC,resize:eP}[n]||tP;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:dd,detach:dd,resize:dd}[n]||GC)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return eC(e,n,i,r)}isAttached(e){const n=e&&ag(e);return!!(n&&n.isConnected)}}function iP(t){return!og()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?HC:nP}class Zn{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Ju(this.x)&&Ju(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Y(Zn,"defaults",{}),Y(Zn,"defaultRoutes");function rP(t,e){const n=t.options.ticks,i=sP(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?aP(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return lP(e,c,s,o/r),c;const h=oP(s,e,r);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(jl(e,c,h,we(m)?0:a-m,a),d=0,p=o-1;d<p;d++)jl(e,c,h,s[d],s[d+1]);return jl(e,c,h,l,we(m)?e.length:l+m),c}return jl(e,c,h),c}function sP(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function oP(t,e,n){const i=uP(t),r=e.length/n;if(!i)return Math.max(r,1);const s=ck(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function aP(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function lP(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function jl(t,e,n,i,r){const s=ae(i,0),o=Math.min(ae(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function uP(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const cP=t=>t==="left"?"right":t==="right"?"left":t,qy=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Ky=(t,e)=>Math.min(e||t,t);function Gy(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function hP(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function dP(t,e){pe(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Ao(t){return t.drawTicks?t.tickLength:0}function Qy(t,e){if(!t.display)return 0;const n=yt(t.font,e),i=nn(t.padding);return(We(t.text)?t.text.length:1)*n.lineHeight+i.height}function fP(t,e){return Hs(t,{scale:e,type:"scale"})}function pP(t,e,n){return Hs(t,{tick:n,index:e,type:"tick"})}function gP(t,e,n){let i=Jp(t);return(n&&e!=="right"||!n&&e==="right")&&(i=cP(i)),i}function mP(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,m,_;const E=o-r,x=a-s;if(t.isHorizontal()){if(m=pt(i,s,a),ue(n)){const v=Object.keys(n)[0],y=n[v];_=h[v].getPixelForValue(y)+E-e}else n==="center"?_=(c.bottom+c.top)/2+E-e:_=qy(t,n,e);p=a-s}else{if(ue(n)){const v=Object.keys(n)[0],y=n[v];m=h[v].getPixelForValue(y)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=qy(t,n,e);_=pt(i,o,r),d=n==="left"?-Ke:Ke}return{titleX:m,titleY:_,maxWidth:p,rotation:d}}class Ws extends Zn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=_n(e,Number.POSITIVE_INFINITY),n=_n(n,Number.NEGATIVE_INFINITY),i=_n(i,Number.POSITIVE_INFINITY),r=_n(r,Number.NEGATIVE_INFINITY),{min:_n(e,i),max:_n(n,r),minDefined:tn(e),maxDefined:tn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:_n(n,_n(i,n)),max:_n(i,_n(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Uk(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Gy(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=rP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=be(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Ky(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=Mt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Ao(e.grid)-n.padding-Qy(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=pk(Math.min(Math.asin(Mt((h.highest.height+6)/a,-1,1)),Math.asin(Mt(l/c,-1,1))-Math.asin(Mt(p/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Qy(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ao(s)+l):(e.height=this.maxHeight,e.width=Ao(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),m=i.padding*2,_=Hn(this.labelRotation),E=Math.cos(_),x=Math.sin(_);if(a){const v=i.mirror?0:x*d.width+E*p.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=i.mirror?0:E*d.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(c,h,x,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=r*e.width,m=i*n.height):(p=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)we(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Gy(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Ky(n,i));let c=0,h=0,d,p,m,_,E,x,v,y,A,R,M;for(d=0;d<n;d+=l){if(_=e[d].label,E=this._resolveTickFontOptions(d),r.font=x=E.string,v=s[x]=s[x]||{data:{},gc:[]},y=E.lineHeight,A=R=0,!we(_)&&!We(_))A=Iy(r,v.data,v.gc,A,_),R=y;else if(We(_))for(p=0,m=_.length;p<m;++p)M=_[p],!we(M)&&!We(M)&&(A=Iy(r,v.data,v.gc,A,M),R+=y);o.push(A),a.push(R),c=Math.max(A,c),h=Math.max(R,h)}dP(s,n);const O=o.indexOf(c),I=a.indexOf(h),w=S=>({width:o[S]||0,height:a[S]||0});return{first:w(0),last:w(n-1),widest:w(O),highest:w(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return mk(this._alignToPixels?lr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=pP(this.getContext(),e,i))}return this.$context||(this.$context=fP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=Ao(s),m=[],_=a.setContext(this.getContext()),E=_.display?_.width:0,x=E/2,v=function(de){return lr(i,de,E)};let y,A,R,M,O,I,w,S,b,C,P,k;if(o==="top")y=v(this.bottom),I=this.bottom-p,S=y-x,C=v(e.top)+x,k=e.bottom;else if(o==="bottom")y=v(this.top),C=e.top,k=v(e.bottom)-x,I=y+x,S=this.top+p;else if(o==="left")y=v(this.right),O=this.right-p,w=y-x,b=v(e.left)+x,P=e.right;else if(o==="right")y=v(this.left),b=e.left,P=v(e.right)-x,O=y+x,w=this.left+p;else if(n==="x"){if(o==="center")y=v((e.top+e.bottom)/2+.5);else if(ue(o)){const de=Object.keys(o)[0],he=o[de];y=v(this.chart.scales[de].getPixelForValue(he))}C=e.top,k=e.bottom,I=y+x,S=I+p}else if(n==="y"){if(o==="center")y=v((e.left+e.right)/2);else if(ue(o)){const de=Object.keys(o)[0],he=o[de];y=v(this.chart.scales[de].getPixelForValue(he))}O=y-x,w=O-p,b=e.left,P=e.right}const Ee=ae(r.ticks.maxTicksLimit,d),ne=Math.max(1,Math.ceil(d/Ee));for(A=0;A<d;A+=ne){const de=this.getContext(A),he=s.setContext(de),z=a.setContext(de),W=he.lineWidth,Q=he.color,me=z.dash||[],se=z.dashOffset,_e=he.tickWidth,Ze=he.tickColor,Et=he.tickBorderDash||[],et=he.tickBorderDashOffset;R=hP(this,A,l),R!==void 0&&(M=lr(i,R,W),c?O=w=b=P=M:I=S=C=k=M,m.push({tx1:O,ty1:I,tx2:w,ty2:S,x1:b,y1:C,x2:P,y2:k,width:W,color:Q,borderDash:me,borderDashOffset:se,tickWidth:_e,tickColor:Ze,tickBorderDash:Et,tickBorderDashOffset:et}))}return this._ticksLength=d,this._borderValue=y,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=Ao(i.grid),m=p+h,_=d?-h:m,E=-Hn(this.labelRotation),x=[];let v,y,A,R,M,O,I,w,S,b,C,P,k="middle";if(r==="top")O=this.bottom-_,I=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+_,I=this._getXAxisLabelAlignment();else if(r==="left"){const ne=this._getYAxisLabelAlignment(p);I=ne.textAlign,M=ne.x}else if(r==="right"){const ne=this._getYAxisLabelAlignment(p);I=ne.textAlign,M=ne.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(ue(r)){const ne=Object.keys(r)[0],de=r[ne];O=this.chart.scales[ne].getPixelForValue(de)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(ue(r)){const ne=Object.keys(r)[0],de=r[ne];M=this.chart.scales[ne].getPixelForValue(de)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const Ee=this._getLabelSizes();for(v=0,y=a.length;v<y;++v){A=a[v],R=A.label;const ne=s.setContext(this.getContext(v));w=this.getPixelForTick(v)+s.labelOffset,S=this._resolveTickFontOptions(v),b=S.lineHeight,C=We(R)?R.length:1;const de=C/2,he=ne.color,z=ne.textStrokeColor,W=ne.textStrokeWidth;let Q=I;o?(M=w,I==="inner"&&(v===y-1?Q=this.options.reverse?"left":"right":v===0?Q=this.options.reverse?"right":"left":Q="center"),r==="top"?c==="near"||E!==0?P=-C*b+b/2:c==="center"?P=-Ee.highest.height/2-de*b+b:P=-Ee.highest.height+b/2:c==="near"||E!==0?P=b/2:c==="center"?P=Ee.highest.height/2-de*b:P=Ee.highest.height-C*b,d&&(P*=-1),E!==0&&!ne.showLabelBackdrop&&(M+=b/2*Math.sin(E))):(O=w,P=(1-C)*b/2);let me;if(ne.showLabelBackdrop){const se=nn(ne.backdropPadding),_e=Ee.heights[v],Ze=Ee.widths[v];let Et=P-se.top,et=0-se.left;switch(k){case"middle":Et-=_e/2;break;case"bottom":Et-=_e;break}switch(I){case"center":et-=Ze/2;break;case"right":et-=Ze;break;case"inner":v===y-1?et-=Ze:v>0&&(et-=Ze/2);break}me={left:et,top:Et,width:Ze+se.width,height:_e+se.height,color:ne.backdropColor}}x.push({label:R,font:S,textOffset:P,options:{rotation:E,color:he,strokeColor:z,strokeWidth:W,textAlign:Q,textBaseline:k,translation:[M,O],backdrop:me}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=lr(e,this.left,o)-o/2,h=lr(e,this.right,a)+a/2,d=p=l):(d=lr(e,this.top,o)-o/2,p=lr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&eg(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Aa(i,c,0,h,l,a)}r&&tg(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=yt(i.font),o=nn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ue(n)?(l+=o.bottom,We(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=mP(this,l,n,a);Aa(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:gP(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ae(e.grid&&e.grid.z,-1),r=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ws.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bl{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;vP(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,_P(e,o,i),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Fe[r]&&(delete Fe[r][i],this.override&&delete Pr[i])}}function _P(t,e,n){const i=Sa(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,i),t.defaultRoutes&&yP(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function yP(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(s,r,l,a)})}function vP(t){return"id"in t&&"defaults"in t}class wP{constructor(){this.controllers=new Bl(Es,"datasets",!0),this.elements=new Bl(Zn,"elements"),this.plugins=new Bl(Object,"plugins"),this.scales=new Bl(Ws,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):pe(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Yp(e);be(i["before"+r],[],i),n[e](i),be(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var wn=new wP;class EP{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(be(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){we(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ae(i.options&&i.options.plugins,{}),s=TP(i);return r===!1&&!n?[]:IP(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function TP(t){const e={},n=[],i=Object.keys(wn.plugins.items);for(let s=0;s<i.length;s++)n.push(wn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SP(t,e){return!e&&t===!1?null:t===!0?{}:t}function IP(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=SP(i[l],r);c!==null&&s.push({plugin:a,options:AP(t.config,{plugin:a,local:n[l]},c,o)})}return s}function AP(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Sf(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function xP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function bP(t,e){return t===e?"_index_":"_value_"}function Yy(t){if(t==="x"||t==="y"||t==="r")return t}function kP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function If(t,...e){if(Yy(t))return t;for(const n of e){const i=n.axis||kP(n.position)||t.length>1&&Yy(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Xy(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function CP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Xy(t,"x",n[0])||Xy(t,"y",n[0])}return{}}function PP(t,e){const n=Pr[t.type]||{scales:{}},i=e.scales||{},r=Sf(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=If(o,a,CP(o,t),Fe.scales[a.type]),c=bP(l,r),h=n.scales||{};s[o]=Qo(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Sf(a,e),h=(Pr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=xP(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),Qo(s[m],[{axis:p},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Qo(a,[Fe.scales[a.type],Fe.scale])}),s}function zT(t){const e=t.options||(t.options={});e.plugins=ae(e.plugins,{}),e.scales=PP(t,e)}function jT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function RP(t){return t=t||{},t.data=jT(t.data),zT(t),t}const Jy=new Map,BT=new Set;function $l(t,e){let n=Jy.get(t);return n||(n=e(),Jy.set(t,n),BT.add(n)),n}const xo=(t,e,n)=>{const i=Cr(e,n);i!==void 0&&t.add(i)};class DP{constructor(e){this._config=RP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=jT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),zT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $l(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $l(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $l(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return $l(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>xo(l,e,d))),h.forEach(d=>xo(l,r,d)),h.forEach(d=>xo(l,Pr[s]||{},d)),h.forEach(d=>xo(l,Fe,d)),h.forEach(d=>xo(l,Tf,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),BT.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Pr[n]||{},Fe.datasets[n]||{},{type:n},Fe,Tf]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Zy(this._resolverCache,e,r);let l=o;if(OP(o,n)){s.$shared=!1,i=Wi(i)?i():i;const c=this.createResolver(e,i,a);l=Os(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Zy(this._resolverCache,e,i);return ue(n)?Os(s,n,void 0,r):s}}function Zy(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:ig(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const MP=t=>ue(t)&&Object.getOwnPropertyNames(t).some(e=>Wi(t[e]));function OP(t,e){const{isScriptable:n,isIndexable:i}=xT(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Wi(a)||MP(a))||o&&We(a))return!0}return!1}var NP="4.5.1";const VP=["top","bottom","left","right","chartArea"];function ev(t,e){return t==="top"||t==="bottom"||VP.indexOf(t)===-1&&e==="x"}function tv(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function nv(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),be(n&&n.onComplete,[t],e)}function LP(t){const e=t.chart,n=e.options.animation;be(n&&n.onProgress,[t],e)}function $T(t){return og()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fu={},iv=t=>{const e=$T(t);return Object.values(fu).filter(n=>n.canvas===e).pop()};function FP(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function UP(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var di;let Bc=(di=class{static register(...e){wn.add(...e),rv()}static unregister(...e){wn.remove(...e),rv()}constructor(e,n){const i=this.config=new DP(n),r=$T(e),s=iv(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||iP(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=nk(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wk(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],fu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ln.listen(this,"complete",nv),Ln.listen(this,"progress",LP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return we(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ay(this.canvas,this.ctx),this}stop(){return Ln.stop(this),this}resize(e,n){Ln.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Cy(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pe(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=If(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),pe(s,o=>{const a=o.options,l=a.id,c=If(l,a),h=ae(a.type,o.dtype);(a.position===void 0||ev(a.position,c)!==ev(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const p=wn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),pe(r,(o,a)=>{o||delete i[a]}),pe(i,o=>{Xt.configure(this,o,o.options),Xt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(tv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Sf(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=wn.getController(a),{datasetElementType:c,dataElementType:h}=Fe.datasets[a];Object.assign(l,{dataElementType:wn.getElement(h),datasetElementType:c&&wn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||pe(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tv("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pe(this.scales,e=>{Xt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!gy(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;FP(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!gy(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],pe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Wi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ln.has(this)?this.attached&&!Ln.running(this)&&Ln.start(this):(this.draw(),nv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=sC(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&eg(n,r),e.controller.draw(),r&&tg(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return IT(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=VC.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Hs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Ia(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ln.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ay(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete fu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};pe(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Qu(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=lk(e),c=UP(e,this._lastEvent,i,l);i&&(this._lastEvent=null,be(s.onHover,[e,a,this],this),l&&be(s.onClick,[e,a,this],this));const h=!Qu(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},Y(di,"defaults",Fe),Y(di,"instances",fu),Y(di,"overrides",Pr),Y(di,"registry",wn),Y(di,"version",NP),Y(di,"getChart",iv),di);function rv(){return pe(Bc.instances,t=>t._plugins.invalidate())}function zP(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,En(i-n));if(t.beginPath(),t.arc(r,s,o-c/2,i+d/2,n-d/2),a>0){const p=Math.min(c/a,En(i-n));t.arc(r,s,a+c/2,n-p/2,i+p/2,!0)}else{const p=Math.min(c/2,o*En(i-n));if(h==="round")t.arc(r,s,p,n-ve/2,i+ve/2,!0);else if(h==="bevel"){const m=2*p*p,_=-m*Math.cos(n+ve/2)+r,E=-m*Math.sin(n+ve/2)+s,x=m*Math.cos(i+ve/2)+r,v=m*Math.sin(i+ve/2)+s;t.lineTo(_,E),t.lineTo(x,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function jP(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ke,i-Ke),t.closePath(),t.clip()}function BP(t){return ng(t,["outerStart","outerEnd","innerStart","innerEnd"])}function $P(t,e,n,i){const r=BP(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return Mt(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Mt(r.innerStart,0,o),innerEnd:Mt(r.innerEnd,0,o)}}function Qr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function ic(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+i+n-c,0),p=h>0?h+i+n+c:0;let m=0;const _=r-l;if(i){const ne=h>0?h-i:0,de=d>0?d-i:0,he=(ne+de)/2,z=he!==0?_*he/(he+i):_;m=(_-z)/2}const E=Math.max(.001,_*d-n/ve)/d,x=(_-E)/2,v=l+x+m,y=r-x-m,{outerStart:A,outerEnd:R,innerStart:M,innerEnd:O}=$P(e,p,d,y-v),I=d-A,w=d-R,S=v+A/I,b=y-R/w,C=p+M,P=p+O,k=v+M/C,Ee=y-O/P;if(t.beginPath(),s){const ne=(S+b)/2;if(t.arc(o,a,d,S,ne),t.arc(o,a,d,ne,b),R>0){const W=Qr(w,b,o,a);t.arc(W.x,W.y,R,b,y+Ke)}const de=Qr(P,y,o,a);if(t.lineTo(de.x,de.y),O>0){const W=Qr(P,Ee,o,a);t.arc(W.x,W.y,O,y+Ke,Ee+Math.PI)}const he=(y-O/p+(v+M/p))/2;if(t.arc(o,a,p,y-O/p,he,!0),t.arc(o,a,p,he,v+M/p,!0),M>0){const W=Qr(C,k,o,a);t.arc(W.x,W.y,M,k+Math.PI,v-Ke)}const z=Qr(I,v,o,a);if(t.lineTo(z.x,z.y),A>0){const W=Qr(I,S,o,a);t.arc(W.x,W.y,A,v-Ke,S)}}else{t.moveTo(o,a);const ne=Math.cos(S)*d+o,de=Math.sin(S)*d+a;t.lineTo(ne,de);const he=Math.cos(b)*d+o,z=Math.sin(b)*d+a;t.lineTo(he,z)}t.closePath()}function HP(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ic(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Be||Be))}return ic(t,e,n,i,l,r),t.fill(),l}function WP(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:p,borderRadius:m}=l,_=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=p,_?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let E=e.endAngle;if(s){ic(t,e,n,i,E,r);for(let x=0;x<s;++x)t.stroke();isNaN(a)||(E=o+(a%Be||Be))}_&&jP(t,e,E),l.selfJoin&&E-o>=ve&&m===0&&h!=="miter"&&zP(t,e,E),s||(ic(t,e,n,i,E,r),t.stroke())}class Oo extends Zn{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=mT(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,_=ae(p,c-l),E=Zu(o,l,c)&&l!==c,x=_>=Be||E,v=_r(a,h+m,d+m);return x&&v}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,p=(a+l+h+c)/2;return{x:i+Math.cos(d)*p,y:r+Math.sin(d)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Be?Math.floor(r/Be):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ve,r||0)),h=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,HP(n,this,h,o,a),WP(n,this,h,o,a),n.restore()}}Y(Oo,"id","arc"),Y(Oo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Y(Oo,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Oo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function HT(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,h=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function Ai(t,e,n,i){return t?0:Mt(e,n,i)}function qP(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=AT(i);return{t:Ai(r.top,s.top,0,n),r:Ai(r.right,s.right,0,e),b:Ai(r.bottom,s.bottom,0,n),l:Ai(r.left,s.left,0,e)}}function KP(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=vs(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ue(r);return{topLeft:Ai(!l||a.top||a.left,s.topLeft,0,o),topRight:Ai(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ai(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ai(!l||a.bottom||a.right,s.bottomRight,0,o)}}function GP(t){const e=HT(t),n=e.right-e.left,i=e.bottom-e.top,r=qP(t,n/2,i/2),s=KP(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function fd(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&HT(t,i);return a&&(r||_r(e,a.left,a.right))&&(s||_r(n,a.top,a.bottom))}function QP(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function YP(t,e){t.rect(e.x,e.y,e.w,e.h)}function pd(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class pu extends Zn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=GP(this),a=QP(o.radius)?ec:YP;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,pd(o,n,s)),e.clip(),a(e,pd(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,pd(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return fd(this,e,n,i)}inXRange(e,n){return fd(this,e,null,n)}inYRange(e,n){return fd(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(pu,"id","bar"),Y(pu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(pu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const sv=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},XP=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ov extends Zn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=be(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=yt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sv(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((_,E)=>{const x=i+n/2+s.measureText(_.text).width;(E===0||c[c.length-1]+x+2*a>o)&&(d+=h,c[c.length-(E>0?0:1)]=0,m+=h,p++),l[E]={left:0,top:m,row:p,width:x,height:r},c[c.length-1]+=x+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,m=0,_=0,E=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:y,itemHeight:A}=JP(i,n,s,x,r);v>0&&m+A+2*a>h&&(d+=p+a,c.push({width:p,height:m}),_+=p+a,E++,p=m=0),l[v]={left:_,top:m,col:E,width:y,height:A},p=Math.max(p,y),m+=A+a}),d+=p,c.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ws(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=pt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=pt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;eg(e,this),this._draw(),tg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Fe.color,l=ws(e.rtl,this.left,this.width),c=yt(o.font),{padding:h}=o,d=c.size,p=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:_,boxHeight:E,itemHeight:x}=sv(o,d),v=function(O,I,w){if(isNaN(_)||_<=0||isNaN(E)||E<0)return;r.save();const S=ae(w.lineWidth,1);if(r.fillStyle=ae(w.fillStyle,a),r.lineCap=ae(w.lineCap,"butt"),r.lineDashOffset=ae(w.lineDashOffset,0),r.lineJoin=ae(w.lineJoin,"miter"),r.lineWidth=S,r.strokeStyle=ae(w.strokeStyle,a),r.setLineDash(ae(w.lineDash,[])),o.usePointStyle){const b={radius:E*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:S},C=l.xPlus(O,_/2),P=I+p;ST(r,b,C,P,o.pointStyleWidth&&_)}else{const b=I+Math.max((d-E)/2,0),C=l.leftForLtr(O,_),P=vs(w.borderRadius);r.beginPath(),Object.values(P).some(k=>k!==0)?ec(r,{x:C,y:b,w:_,h:E,radius:P}):r.rect(C,b,_,E),r.fill(),S!==0&&r.stroke()}r.restore()},y=function(O,I,w){Aa(r,w.text,O,I+x/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},A=this.isHorizontal(),R=this._computeTitleHeight();A?m={x:pt(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:pt(s,this.top+R+h,this.bottom-n[0].height),line:0},PT(this.ctx,e.textDirection);const M=x+h;this.legendItems.forEach((O,I)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const w=r.measureText(O.text).width,S=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),b=_+p+w;let C=m.x,P=m.y;l.setWidth(this.width),A?I>0&&C+b+h>this.right&&(P=m.y+=M,m.line++,C=m.x=pt(s,this.left+h,this.right-i[m.line])):I>0&&P+M>this.bottom&&(C=m.x=C+n[m.line].width+h,m.line++,P=m.y=pt(s,this.top+R+h,this.bottom-n[m.line].height));const k=l.x(C);if(v(k,P,O),C=Ek(S,C+_+p,A?C+b:this.right,e.rtl),y(l.x(C),P,O),A)m.x+=b+h;else if(typeof O.text!="string"){const Ee=c.lineHeight;m.y+=WT(O,Ee)+h}else m.y+=M}),RT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=yt(n.font),r=nn(n.padding);if(!n.display)return;const s=ws(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=pt(e.align,d,this.right-p);else{const _=this.columnSizes.reduce((E,x)=>Math.max(E,x.height),0);h=c+pt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const m=pt(a,d,d+p);o.textAlign=s.textAlign(Jp(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Aa(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=yt(e.font),i=nn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(_r(e,this.left,this.right)&&_r(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],_r(e,r.left,r.left+r.width)&&_r(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!tR(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=XP(r,i);r&&!s&&be(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&be(n.onHover,[e,i,this],this)}else i&&be(n.onClick,[e,i,this],this)}}function JP(t,e,n,i,r){const s=ZP(i,t,e,n),o=eR(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function ZP(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function eR(t,e,n){let i=t;return typeof e.text!="string"&&(i=WT(e,n)),i}function WT(t,e){const n=t.text?t.text.length:0;return e*n}function tR(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nR={id:"legend",_element:ov,start(t,e,n){const i=t.legend=new ov({ctx:t.ctx,options:n,chart:t});Xt.configure(t,i,n),Xt.addBox(t,i)},stop(t){Xt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Xt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=nn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class qT extends Zn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=We(i.text)?i.text.length:1;this._padding=nn(i.padding);const s=r*yt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=pt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=pt(a,r,n),l=ve*-.5):(h=s-e,d=pt(a,n,r),l=ve*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=yt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Aa(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Jp(n.align),textBaseline:"middle",translation:[o,a]})}}function iR(t,e){const n=new qT({ctx:t.ctx,options:e,chart:t});Xt.configure(t,n,e),Xt.addBox(t,n),t.titleBlock=n}var rR={id:"title",_element:qT,start(t,e,n){iR(t,n)},stop(t){const e=t.titleBlock;Xt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Xt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const No={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=gk(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function yn(t,e){return e&&(We(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function sR(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function av(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=yt(e.bodyFont),c=yt(e.titleFont),h=yt(e.footerFont),d=s.length,p=r.length,m=i.length,_=nn(e.padding);let E=_.height,x=0,v=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(E+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*R+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}p&&(E+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let y=0;const A=function(R){x=Math.max(x,n.measureText(R).width+y)};return n.save(),n.font=c.string,pe(t.title,A),n.font=l.string,pe(t.beforeBody.concat(t.afterBody),A),y=e.displayColors?o+2+e.boxPadding:0,pe(i,R=>{pe(R.before,A),pe(R.lines,A),pe(R.after,A)}),y=0,n.font=h.string,pe(t.footer,A),n.restore(),x+=_.width,{width:x,height:E}}function oR(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function aR(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function lR(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),aR(c,t,e,n)&&(c="center"),c}function lv(t,e,n){const i=n.yAlign||e.yAlign||oR(t,n);return{xAlign:n.xAlign||e.xAlign||lR(t,e,n,i),yAlign:i}}function uR(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function cR(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function uv(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=vs(o);let _=uR(e,a);const E=cR(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,p)+r:a==="right"&&(_+=Math.max(d,m)+r),{x:Mt(_,0,i.width-e.width),y:Mt(E,0,i.height-e.height)}}function Hl(t,e,n){const i=nn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function cv(t){return yn([],Fn(t))}function hR(t,e,n){return Hs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hv(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const KT={beforeTitle:Vn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Vn,beforeBody:Vn,beforeLabel:Vn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return we(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vn,afterBody:Vn,beforeFooter:Vn,footer:Vn,afterFooter:Vn};function kt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?KT[e].call(n,i):r}class Af extends Zn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new DT(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=hR(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=kt(i,"beforeTitle",this,e),s=kt(i,"title",this,e),o=kt(i,"afterTitle",this,e);let a=[];return a=yn(a,Fn(r)),a=yn(a,Fn(s)),a=yn(a,Fn(o)),a}getBeforeBody(e,n){return cv(kt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return pe(e,s=>{const o={before:[],lines:[],after:[]},a=hv(i,s);yn(o.before,Fn(kt(a,"beforeLabel",this,s))),yn(o.lines,kt(a,"label",this,s)),yn(o.after,Fn(kt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return cv(kt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=kt(i,"beforeFooter",this,e),s=kt(i,"footer",this,e),o=kt(i,"afterFooter",this,e);let a=[];return a=yn(a,Fn(r)),a=yn(a,Fn(s)),a=yn(a,Fn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(sR(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),pe(a,h=>{const d=hv(e.callbacks,h);r.push(kt(d,"labelColor",this,h)),s.push(kt(d,"labelPointStyle",this,h)),o.push(kt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=No[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=av(this,i),c=Object.assign({},a,l),h=lv(this.chart,i,c),d=uv(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=vs(a),{x:p,y:m}=e,{width:_,height:E}=n;let x,v,y,A,R,M;return s==="center"?(R=m+E/2,r==="left"?(x=p,v=x-o,A=R+o,M=R-o):(x=p+_,v=x+o,A=R-o,M=R+o),y=x):(r==="left"?v=p+Math.max(l,h)+o:r==="right"?v=p+_-Math.max(c,d)-o:v=this.caretX,s==="top"?(A=m,R=A-o,x=v-o,y=v+o):(A=m+E,R=A+o,x=v+o,y=v-o),M=A),{x1:x,x2:v,x3:y,y1:A,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=ws(i.rtl,this.x,this.width);for(e.x=Hl(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=yt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=yt(s.bodyFont),d=Hl(this,"left",s),p=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=r.leftForLtr(p,c)+c/2,v=_+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,xy(e,E,x,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,xy(e,E,x,v)}else{e.lineWidth=ue(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=r.leftForLtr(p,c),x=r.leftForLtr(r.xPlus(p,1),c-2),v=vs(o.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,ec(e,{x:E,y:_,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ec(e,{x,y:_+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,_,c,l),e.strokeRect(E,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=yt(i.bodyFont);let p=d.lineHeight,m=0;const _=ws(i.rtl,this.x,this.width),E=function(w){n.fillText(w,_.x(e.x+m),e.y+p/2),e.y+=p+s},x=_.textAlign(o);let v,y,A,R,M,O,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Hl(this,x,i),n.fillStyle=i.bodyColor,pe(this.beforeBody,E),m=a&&x!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,O=r.length;R<O;++R){for(v=r[R],y=this.labelTextColors[R],n.fillStyle=y,pe(v.before,E),A=v.lines,a&&A.length&&(this._drawColorBox(n,e,R,_,i),p=Math.max(d.lineHeight,l)),M=0,I=A.length;M<I;++M)E(A[M]),p=d.lineHeight;pe(v.after,E)}m=0,p=d.lineHeight,pe(this.afterBody,E),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=ws(i.rtl,this.x,this.width);for(e.x=Hl(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=yt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:_}=vs(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=No[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=av(this,e),l=Object.assign({},o,this._size),c=lv(n,e,l),h=uv(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=nn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),PT(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),RT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Qu(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Qu(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=No[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}Y(Af,"positioners",No);var dR={id:"tooltip",_element:Af,positioners:No,afterInit(t,e,n){n&&(t.tooltip=new Af({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:KT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fR=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function pR(t,e,n,i){const r=t.indexOf(e);if(r===-1)return fR(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const gR=(t,e)=>t===null?null:Mt(Math.round(t),0,e);function dv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class xf extends Ws{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(we(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:pR(i,e,ae(n,e),this._addedLabels),gR(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return dv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(xf,"id","category"),Y(xf,"defaults",{ticks:{callback:dv}});function mR(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,m=s||1,_=h-1,{min:E,max:x}=e,v=!we(o),y=!we(a),A=!we(c),R=(x-E)/(d+1);let M=_y((x-E)/_/m)*m,O,I,w,S;if(M<1e-14&&!v&&!y)return[{value:E},{value:x}];S=Math.ceil(x/M)-Math.floor(E/M),S>_&&(M=_y(S*M/_/m)*m),we(l)||(O=Math.pow(10,l),M=Math.ceil(M*O)/O),r==="ticks"?(I=Math.floor(E/M)*M,w=Math.ceil(x/M)*M):(I=E,w=x),v&&y&&s&&dk((a-o)/s,M/1e3)?(S=Math.round(Math.min((a-o)/M,h)),M=(a-o)/S,I=o,w=a):A?(I=v?o:I,w=y?a:w,S=c-1,M=(w-I)/S):(S=(w-I)/M,cu(S,Math.round(S),M/1e3)?S=Math.round(S):S=Math.ceil(S));const b=Math.max(yy(M),yy(I));O=Math.pow(10,we(l)?b:l),I=Math.round(I*O)/O,w=Math.round(w*O)/O;let C=0;for(v&&(p&&I!==o?(n.push({value:o}),I<o&&C++,cu(Math.round((I+C*M)*O)/O,o,fv(o,R,t))&&C++):I<o&&C++);C<S;++C){const P=Math.round((I+C*M)*O)/O;if(y&&P>a)break;n.push({value:P})}return y&&p&&w!==a?n.length&&cu(n[n.length-1].value,a,fv(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!y||w===a)&&n.push({value:w}),n}function fv(t,e,{horizontal:n,minRotation:i}){const r=Hn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class _R extends Ws{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return we(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Vi(r),c=Vi(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=mR(r,s);return e.bounds==="ticks"&&fk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Zp(e,this.chart.options.locale,this.options.ticks.format)}}class bf extends _R{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=tn(e)?e:0,this.max=tn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Hn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(bf,"id","linear"),Y(bf,"defaults",{ticks:{callback:TT.formatters.numeric}});const $c={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rt=Object.keys($c);function pv(t,e){return t-e}function gv(t,e){if(we(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),tn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Ju(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function mv(t,e,n,i){const r=Rt.length;for(let s=Rt.indexOf(t);s<r-1;++s){const o=$c[Rt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Rt[s]}return Rt[r-1]}function yR(t,e,n,i,r){for(let s=Rt.length-1;s>=Rt.indexOf(n);s--){const o=Rt[s];if($c[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Rt[n?Rt.indexOf(n):0]}function vR(t){for(let e=Rt.indexOf(t)+1,n=Rt.length;e<n;++e)if($c[Rt[e]].common)return Rt[e]}function _v(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Xp(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function wR(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function yv(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:wR(t,i,r,n)}class rc extends Ws{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new RC._date(e.adapters.date);r.init(n),Qo(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=tn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=tn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=yk(r,s,o);return this._unit=n.unit||(i.autoSkip?mv(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):yR(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:vR(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),yv(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Mt(n,0,o),i=Mt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||mv(s.minUnit,n,i,this._getLabelCapacity(n)),a=ae(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Ju(l)||l===!0,h={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const _=r.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<i;p=+e.add(p,a,o),m++)_v(h,p,_);return(p===i||r.bounds==="ticks"||m===1)&&_v(h,p,_),Object.keys(h).sort(pv).map(E=>+E)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return be(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=i[n],m=c&&d&&p&&p.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Hn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,yv(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(gv(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return yT(e.sort(pv))}}Y(rc,"id","time"),Y(rc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wl(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Ef(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Ef(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class vv extends rc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wl(n,this.min),this._tableRange=Wl(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Wl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Wl(this._table,i*this._tableRange+this._minPos,!0)}}Y(vv,"id","timeseries"),Y(vv,"defaults",rc.defaults);const GT="label";function wv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function ER(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function QT(t,e){t.labels=e}function YT(t,e,n=GT){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function TR(t,e=GT){const n={labels:[],datasets:[]};return QT(n,t.labels),YT(n,t.datasets,e),n}function SR(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,m=K.useRef(null),_=K.useRef(null),E=()=>{m.current&&(_.current=new Bc(m.current,{type:o,data:TR(a,s),options:l&&{...l},plugins:c}),wv(e,_.current))},x=()=>{wv(e,null),_.current&&(_.current.destroy(),_.current=null)};return K.useEffect(()=>{!r&&_.current&&l&&ER(_.current,l)},[r,l]),K.useEffect(()=>{!r&&_.current&&QT(_.current.config.data,a.labels)},[r,a.labels]),K.useEffect(()=>{!r&&_.current&&a.datasets&&YT(_.current.config.data,a.datasets,s)},[r,a.datasets]),K.useEffect(()=>{_.current&&(r?(x(),setTimeout(E)):_.current.update(d))},[r,l,a.labels,a.datasets,d]),K.useEffect(()=>{_.current&&(x(),setTimeout(E))},[o]),K.useEffect(()=>(E(),()=>x()),[]),F.jsx("canvas",{ref:m,role:"img",height:n,width:i,...p,children:h})}const IR=K.forwardRef(SR);function XT(t,e){return Bc.register(e),K.forwardRef((n,i)=>F.jsx(IR,{...n,ref:i,type:t}))}const AR=XT("bar",hu),xR=XT("doughnut",Do);Bc.register(Oo,pu,xf,bf,dR,nR,rR);const bR=t=>{const e=t?new Date(t):new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},kR=({loading:t,monthlySummary:e,records:n})=>{var m;const[i,r]=K.useState("");K.useEffect(()=>{i&&!e.some(_=>_.monthKey===i)&&r("")},[e,i]);const s=((m=e[e.length-1])==null?void 0:m.monthKey)??"",o=i||s,a=K.useMemo(()=>o?n.filter(_=>bR(_.assessmentDate)===o):n,[n,o]),l=K.useMemo(()=>o?e.filter(_=>_.monthKey===o):e,[e,o]),c=K.useMemo(()=>a.reduce((_,E)=>(_.total+=1,_.done+=+(E.boneProtection==="done")+ +(E.incontinenceCare==="done"),_.notDone+=+(E.boneProtection==="not_done")+ +(E.incontinenceCare==="not_done"),_.na+=+(E.boneProtection==="na")+ +(E.incontinenceCare==="na"),_),{total:0,done:0,notDone:0,na:0}),[a]),h=K.useMemo(()=>({labels:l.map(E=>E.label),datasets:[{label:"",backgroundColor:"#1ab286",data:l.map(E=>E.done)},{label:"",backgroundColor:"#f97316",data:l.map(E=>E.notDone)},{label:"",backgroundColor:"#94a3b8",data:l.map(E=>E.na)}]}),[l]),d=K.useMemo(()=>({labels:["","",""],datasets:[{data:[c.done,c.notDone,c.na],backgroundColor:["#1ab286","#f97316","#94a3b8"],hoverOffset:4}]}),[c]);if(t)return F.jsx("p",{className:"subtle",children:"..."});if(!n.length)return F.jsx("p",{className:"subtle",children:""});if(!a.length)return F.jsx("p",{className:"subtle",children:""});const p=e.map(_=>({value:_.monthKey,label:_.label}));return F.jsxs("div",{className:"dashboard-grid",children:[F.jsxs("section",{className:"card",children:[F.jsxs("div",{className:"section-header",children:[F.jsx("h2",{children:""}),p.length>0&&F.jsxs("label",{className:"field month-filter",children:[F.jsx("span",{children:""}),F.jsx("select",{value:o,onChange:_=>r(_.target.value),children:p.map(_=>F.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),F.jsx("div",{className:"chart-wrapper",children:F.jsx(AR,{data:h,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0}}}})})]}),F.jsxs("section",{className:"card",children:[F.jsx("h2",{children:""}),F.jsxs("div",{className:"chart-wrapper doughnut",children:[F.jsx(xR,{data:d,options:{responsive:!0,plugins:{legend:{position:"bottom"}}}}),F.jsxs("div",{className:"totals",children:[F.jsxs("p",{children:[": ",F.jsx("strong",{children:a.length})]}),F.jsxs("p",{children:[": ",F.jsx("strong",{children:c.done+c.notDone+c.na})]})]})]})]}),F.jsxs("section",{className:"card wide",children:[F.jsx("h2",{children:""}),F.jsx("div",{className:"table-wrapper",children:F.jsxs("table",{children:[F.jsx("thead",{children:F.jsxs("tr",{children:[F.jsx("th",{children:""}),F.jsx("th",{children:""}),F.jsx("th",{children:""}),F.jsx("th",{children:""}),F.jsx("th",{children:""})]})}),F.jsx("tbody",{children:l.map(_=>F.jsxs("tr",{children:[F.jsx("td",{children:_.label}),F.jsx("td",{children:_.total}),F.jsx("td",{children:_.done}),F.jsx("td",{children:_.notDone}),F.jsx("td",{children:_.na})]},_.monthKey))})]})})]})]})},CR=({message:t,variant:e="success"})=>{const n=e==="error"?"assertive":"polite",i=e==="error"?"alert":"status";return F.jsx("div",{className:`toast ${e}`,role:i,"aria-live":n,children:t})},PR=()=>{};var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},RR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ZT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(n[h],n[d],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new DR;const p=s<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const _=c<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MR=function(t){const e=JT(t);return ZT.encodeByteArray(e,!0)},sc=function(t){return MR(t).replace(/\./g,"")},eS=function(t){try{return ZT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=()=>OR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof Ev>"u")return;const t=Ev.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eS(t[1]);return e&&JSON.parse(e)},Hc=()=>{try{return PR()||NR()||VR()||LR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tS=t=>{var e,n;return(n=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FR=t=>{const e=tS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},nS=()=>{var t;return(t=Hc())===null||t===void 0?void 0:t.config},iS=t=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sc(JSON.stringify(n)),sc(JSON.stringify(o)),""].join(".")}const Jo={};function jR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?t.emulator.push(e):t.prod.push(e);return t}function BR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Tv=!1;function sS(t,e){if(typeof window>"u"||typeof document>"u"||!qs(window.location.host)||Jo[t]===e||Jo[t]||Tv)return;Jo[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",s=jR().prod.length>0;function o(){const p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Tv=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=BR(i),m=n("text"),_=document.getElementById(m)||document.createElement("span"),E=n("learnmore"),x=document.getElementById(E)||document.createElement("a"),v=n("preprendIcon"),y=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const A=p.element;a(A),h(x,E);const R=c();l(y,v),A.append(y,_,x,R),document.body.appendChild(A)}s?(_.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function HR(){var t;const e=(t=Hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QR(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="FirebaseError";class oi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=JR,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?ZR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new oi(r,a,i)}}function ZR(t,e){return t.replace(e2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const e2=/\{\$([^}]+)}/g;function t2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Sv(s)&&Sv(o)){if(!Rr(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function n2(t,e){const n=new i2(t,e);return n.subscribe.bind(n)}class i2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");r2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=gd),r.error===void 0&&(r.error=gd),r.complete===void 0&&(r.complete=gd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new UR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a2(e))try{this.getOrInitializeService({instanceIdentifier:fr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fr){return this.instances.has(e)}getOptions(e=fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:o2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fr){return this.component?this.component.multipleInstances?e:fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o2(t){return t===fr?void 0:t}function a2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new s2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const u2={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},c2=ie.INFO,h2={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},d2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=h2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=c2,this._logHandler=d2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const f2=(t,e)=>e.some(n=>t instanceof n);let Iv,Av;function p2(){return Iv||(Iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oS=new WeakMap,kf=new WeakMap,aS=new WeakMap,md=new WeakMap,cg=new WeakMap;function m2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Li(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oS.set(n,t)}).catch(()=>{}),cg.set(e,t),e}function _2(t){if(kf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kf.set(t,e)}let Cf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function y2(t){Cf=t(Cf)}function v2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_d(this),e,...n);return aS.set(i,e.sort?e.sort():[e]),Li(i)}:g2().includes(t)?function(...e){return t.apply(_d(this),e),Li(oS.get(this))}:function(...e){return Li(t.apply(_d(this),e))}}function w2(t){return typeof t=="function"?v2(t):(t instanceof IDBTransaction&&_2(t),f2(t,p2())?new Proxy(t,Cf):t)}function Li(t){if(t instanceof IDBRequest)return m2(t);if(md.has(t))return md.get(t);const e=w2(t);return e!==t&&(md.set(t,e),cg.set(e,t)),e}const _d=t=>cg.get(t);function E2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Li(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Li(o.result),l.oldVersion,l.newVersion,Li(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const T2=["get","getKey","getAll","getAllKeys","count"],S2=["put","add","delete","clear"],yd=new Map;function xv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=S2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||T2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return yd.set(e,s),s}y2(t=>({...t,get:(e,n,i)=>xv(e,n)||t.get(e,n,i),has:(e,n)=>!!xv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function A2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",bv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new ug("@firebase/app"),x2="@firebase/app-compat",b2="@firebase/analytics-compat",k2="@firebase/analytics",C2="@firebase/app-check-compat",P2="@firebase/app-check",R2="@firebase/auth",D2="@firebase/auth-compat",M2="@firebase/database",O2="@firebase/data-connect",N2="@firebase/database-compat",V2="@firebase/functions",L2="@firebase/functions-compat",F2="@firebase/installations",U2="@firebase/installations-compat",z2="@firebase/messaging",j2="@firebase/messaging-compat",B2="@firebase/performance",$2="@firebase/performance-compat",H2="@firebase/remote-config",W2="@firebase/remote-config-compat",q2="@firebase/storage",K2="@firebase/storage-compat",G2="@firebase/firestore",Q2="@firebase/ai",Y2="@firebase/firestore-compat",X2="firebase",J2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="[DEFAULT]",Z2={[Pf]:"fire-core",[x2]:"fire-core-compat",[k2]:"fire-analytics",[b2]:"fire-analytics-compat",[P2]:"fire-app-check",[C2]:"fire-app-check-compat",[R2]:"fire-auth",[D2]:"fire-auth-compat",[M2]:"fire-rtdb",[O2]:"fire-data-connect",[N2]:"fire-rtdb-compat",[V2]:"fire-fn",[L2]:"fire-fn-compat",[F2]:"fire-iid",[U2]:"fire-iid-compat",[z2]:"fire-fcm",[j2]:"fire-fcm-compat",[B2]:"fire-perf",[$2]:"fire-perf-compat",[H2]:"fire-rc",[W2]:"fire-rc-compat",[q2]:"fire-gcs",[K2]:"fire-gcs-compat",[G2]:"fire-fst",[Y2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[X2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,eD=new Map,Df=new Map;function kv(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ns(t){const e=t.name;if(Df.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;Df.set(e,t);for(const n of oc.values())kv(n,t);for(const n of eD.values())kv(n,t);return!0}function hg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new $a("app","Firebase",tD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=J2;function lS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Rf,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(n||(n=nS()),!n)throw Fi.create("no-options");const s=oc.get(r);if(s){if(Rr(n,s.options)&&Rr(i,s.config))return s;throw Fi.create("duplicate-app",{appName:r})}const o=new l2(r);for(const l of Df.values())o.addComponent(l);const a=new nD(n,i,o);return oc.set(r,a),a}function uS(t=Rf){const e=oc.get(t);if(!e&&t===Rf&&nS())return lS();if(!e)throw Fi.create("no-app",{appName:t});return e}function Ui(t,e,n){var i;let r=(i=Z2[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(a.join(" "));return}Ns(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-heartbeat-database",rD=1,ba="firebase-heartbeat-store";let vd=null;function cS(){return vd||(vd=E2(iD,rD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fi.create("idb-open",{originalErrorMessage:t.message})})),vd}async function sD(t){try{const n=(await cS()).transaction(ba),i=await n.objectStore(ba).get(hS(t));return await n.done,i}catch(e){if(e instanceof oi)ei.warn(e.message);else{const n=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function Cv(t,e){try{const i=(await cS()).transaction(ba,"readwrite");await i.objectStore(ba).put(e,hS(t)),await i.done}catch(n){if(n instanceof oi)ei.warn(n.message);else{const i=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(i.message)}}}function hS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=1024,aD=30;class lD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>aD){const o=hD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ei.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pv(),{heartbeatsToSend:i,unsentEntries:r}=uD(this._heartbeatsCache.heartbeats),s=sc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ei.warn(n),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function uD(t,e=oD){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Rv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Rv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rv(t){return sc(JSON.stringify({version:2,heartbeats:t})).length}function hD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){Ns(new Dr("platform-logger",e=>new I2(e),"PRIVATE")),Ns(new Dr("heartbeat",e=>new lD(e),"PRIVATE")),Ui(Pf,bv,t),Ui(Pf,bv,"esm2017"),Ui("fire-js","")}dD("");function dg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function dS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fD=dS,fS=new $a("auth","Firebase",dS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new ug("@firebase/auth");function pD(t,...e){ac.logLevel<=ie.WARN&&ac.warn(`Auth (${Ks}): ${t}`,...e)}function gu(t,...e){ac.logLevel<=ie.ERROR&&ac.error(`Auth (${Ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw fg(t,...e)}function xn(t,...e){return fg(t,...e)}function pS(t,e,n){const i=Object.assign(Object.assign({},fD()),{[e]:n});return new $a("auth","Firebase",i).create(e,{appName:t.name})}function zi(t){return pS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return fS.create(t,...e)}function X(t,e,...n){if(!t)throw fg(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gu(e),new Error(e)}function ni(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gD(){return Dv()==="http:"||Dv()==="https:"}function Dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gD()||qR()||"connection"in navigator)?navigator.onLine:!0}function _D(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=$R()||KR()}get(){return mD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wD=new Wa(3e4,6e4);function Wc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gs(t,e,n,i,r={}){return mS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Ha(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return WR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&qs(t.emulatorConfig.host)&&(c.credentials="include"),gS.fetch()(await yS(t,t.config.apiHost,n,a),c)})}async function mS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},yD),e);try{const r=new ED(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ql(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ql(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ql(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ql(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pS(t,h,c);ti(t,h)}}catch(r){if(r instanceof oi)throw r;ti(t,"network-request-failed",{message:String(r)})}}async function _S(t,e,n,i,r={}){const s=await Gs(t,e,n,i,r);return"mfaPendingCredential"in s&&ti(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function yS(t,e,n,i){const r=`${e}${n}?${i}`,s=t,o=s.config.emulator?pg(t.config,r):`${t.config.apiScheme}://${r}`;return vD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class ED{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(xn(this.auth,"network-request-failed")),wD.get())})}}function ql(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=xn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function lc(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SD(t,e=!1){const n=Lt(t),i=await n.getIdToken(e),r=gg(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Zo(wd(r.auth_time)),issuedAtTime:Zo(wd(r.iat)),expirationTime:Zo(wd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wd(t){return Number(t)*1e3}function gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return gu("JWT malformed, contained fewer than 3 sections"),null;try{const r=eS(n);return r?JSON.parse(r):(gu("Failed to decode base64 JWT payload"),null)}catch(r){return gu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Mv(t){const e=gg(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof oi&&ID(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function ID({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ka(t,lc(n,{idToken:i}));X(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vS(s.providerUserInfo):[],a=bD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Of(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function xD(t){const e=Lt(t);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function vS(t){return t.map(e=>{var{providerId:n}=e,i=dg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e){const n=await mS(t,{},async()=>{const i=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=await yS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return t.emulatorConfig&&qs(t.emulatorConfig.host)&&(l.credentials="include"),gS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CD(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",Wc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await kD(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ts;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ts,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Of(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ka(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await uc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await ka(this,TD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:R,isAnonymous:M,providerData:O,stsTokenManager:I}=n;X(A&&I,e,"internal-error");const w=Ts.fromJSON(this.name,I);X(typeof A=="string",e,"internal-error"),hi(d,e.name),hi(p,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),hi(m,e.name),hi(_,e.name),hi(E,e.name),hi(x,e.name),hi(v,e.name),hi(y,e.name);const S=new cn({uid:A,auth:e,email:p,emailVerified:R,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:m,tenantId:E,stsTokenManager:w,createdAt:v,lastLoginAt:y});return O&&Array.isArray(O)&&(S.providerData=O.map(b=>Object.assign({},b))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ts;r.updateFromServerResponse(n);const s=new cn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await uc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?vS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ts;a.updateFromIdToken(i);const l=new cn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Of(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function qn(t){ni(t instanceof Function,"Expected a class definition");let e=Ov.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ov.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wS.type="NONE";const Nv=wS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ss{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=mu(this.userKey,r.apiKey,s),this.fullPersistenceKey=mu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lc(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ss(qn(Nv),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||qn(Nv);const o=mu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await lc(e,{idToken:h}).catch(()=>{});if(!p)break;d=await cn._fromGetAccountInfoResponse(e,p,h)}else d=cn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ss(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ss(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ES(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xS(e))return"Blackberry";if(bS(e))return"Webos";if(TS(e))return"Safari";if((e.includes("chrome/")||SS(e))&&!e.includes("edge/"))return"Chrome";if(AS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ES(t=wt()){return/firefox\//i.test(t)}function TS(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SS(t=wt()){return/crios\//i.test(t)}function IS(t=wt()){return/iemobile/i.test(t)}function AS(t=wt()){return/android/i.test(t)}function xS(t=wt()){return/blackberry/i.test(t)}function bS(t=wt()){return/webos/i.test(t)}function mg(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PD(t=wt()){var e;return mg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RD(){return GR()&&document.documentMode===10}function kS(t=wt()){return mg(t)||AS(t)||bS(t)||xS(t)||/windows phone/i.test(t)||IS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e=[]){let n;switch(t){case"Browser":n=Vv(wt());break;case"Worker":n=`${Vv(wt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",Wc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=6;class ND{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new DD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lc(this,{idToken:e}),i=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_D()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(zi(this));const n=e?Lt(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MD(this),n=new ND(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await CD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qc(t){return Lt(t)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=n2(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LD(t){_g=t}function FD(t){return _g.loadJS(t)}function UD(){return _g.gapiScript}function zD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){const n=hg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Rr(s,e??{}))return r;ti(r,"already-initialized")}return n.initialize({options:e})}function BD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $D(t,e,n){const i=qc(t);X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=PS(e),{host:o,port:a}=HD(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(Rr(c,i.config.emulator)&&Rr(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,qs(o)?(rS(`${s}//${o}${l}`),sS("Auth",!0)):WD()}function PS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HD(t){const e=PS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Fv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Fv(o)}}}function Fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e){return _S(t,"POST","/v1/accounts:signInWithIdp",Wc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="http://localhost";class Mr extends RS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=dg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Mr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Is(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Is(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Is(e,n)}buildRequest(){const e={requestUri:qD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends DS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends qa{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mr._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return yi.credential(n,i)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends qa{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends qa{constructor(){super("twitter.com")}static credential(e,n){return Mr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){return _S(t,"POST","/v1/accounts:signUp",Wc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await cn._fromIdTokenResponse(e,i,r),o=Uv(i);return new qi({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Uv(i);return new qi({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Uv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t){var e;if(un(t.app))return Promise.reject(zi(t));const n=qc(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new qi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await KD(n,{returnSecureToken:!0}),r=await qi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends oi{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new cc(e,n,i,r)}}function MS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(t,s,e,i):s})}async function QD(t,e,n=!1){const i=await ka(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e,n=!1){const{auth:i}=t;if(un(i.app))return Promise.reject(zi(i));const r="reauthenticate";try{const s=await ka(t,MS(i,r,e,t),n);X(s.idToken,i,"internal-error");const o=gg(s.idToken);X(o,i,"internal-error");const{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),qi._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ti(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e,n=!1){if(un(t.app))return Promise.reject(zi(t));const i="signIn",r=await MS(t,i,e),s=await qi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function JD(t,e,n,i){return Lt(t).onIdTokenChanged(e,n,i)}function ZD(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function eM(t,e,n,i){return Lt(t).onAuthStateChanged(e,n,i)}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=1e3,nM=10;class NS extends OS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);RD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nM):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NS.type="LOCAL";const iM=NS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends OS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VS.type="SESSION";const LS=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Kc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await rM(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=yg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function oM(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function aM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uM(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebaseLocalStorageDb",cM=1,dc="firebaseLocalStorage",zS="fbase_key";class Ka{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function hM(){const t=indexedDB.deleteDatabase(US);return new Ka(t).toPromise()}function Nf(){const t=indexedDB.open(US,cM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(dc,{keyPath:zS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(dc)?e(i):(i.close(),await hM(),e(await Nf()))})})}async function zv(t,e,n){const i=Gc(t,!0).put({[zS]:e,value:n});return new Ka(i).toPromise()}async function dM(t,e){const n=Gc(t,!1).get(e),i=await new Ka(n).toPromise();return i===void 0?null:i.value}function jv(t,e){const n=Gc(t,!0).delete(e);return new Ka(n).toPromise()}const fM=800,pM=3;class jS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>pM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(uM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aM(),!this.activeServiceWorker)return;this.sender=new sM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nf();return await zv(e,hc,"1"),await jv(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>dM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Gc(r,!1).getAll();return new Ka(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jS.type="LOCAL";const gM=jS;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t,e){return e?qn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends RS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Is(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Is(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Is(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _M(t){return XD(t.auth,new vg(t),t.bypassAuthState)}function yM(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),YD(n,new vg(t),t.bypassAuthState)}async function vM(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),QD(n,new vg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _M;case"linkViaPopup":case"linkViaRedirect":return vM;case"reauthViaPopup":case"reauthViaRedirect":return yM;default:ti(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new Wa(2e3,1e4);class ds extends BS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wM.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="pendingRedirect",_u=new Map;class TM extends BS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const i=await SM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SM(t,e){const n=xM(e),i=AM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function IM(t,e){_u.set(t._key(),e)}function AM(t){return qn(t._redirectPersistence)}function xM(t){return mu(EM,t.config.apiKey,t.name)}async function bM(t,e,n=!1){if(un(t.app))return Promise.reject(zi(t));const i=qc(t),r=mM(i,e),o=await new TM(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=10*60*1e3;class CM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!$S(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $S({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $S(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e={}){return Gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MM=/^https?/;async function OM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RM(t);for(const n of e)try{if(NM(n))return}catch{}ti(t,"unauthorized-domain")}function NM(t){const e=Mf(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!MM.test(n))return!1;if(DM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Wa(3e4,6e4);function $v(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LM(t){return new Promise((e,n)=>{var i,r,s;function o(){$v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$v(),n(xn(t,"network-request-failed"))},timeout:VM.get()})}if(!((r=(i=bn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{const a=zD("iframefcb");return bn()[a]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},FD(`${UD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw yu=null,e})}let yu=null;function FM(t){return yu=yu||LM(t),yu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Wa(5e3,15e3),zM="__/auth/iframe",jM="emulator/auth/iframe",BM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HM(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pg(e,jM):`https://${t.config.authDomain}/${zM}`,i={apiKey:e.apiKey,appName:t.name,v:Ks},r=$M.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ha(i).slice(1)}`}async function WM(t){const e=await FM(t),n=bn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:HM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},UM.get());function l(){bn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KM=500,GM=600,QM="_blank",YM="http://localhost";class Hv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XM(t,e,n,i=KM,r=GM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qM),{width:i.toString(),height:r.toString(),top:s,left:o}),c=wt().toLowerCase();n&&(a=SS(c)?QM:n),ES(c)&&(e=e||YM,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(PD(c)&&a!=="_self")return JM(e||"",a),new Hv(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new Hv(d)}function JM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="__/auth/handler",eO="emulator/auth/handler",tO=encodeURIComponent("fac");async function Wv(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ks,eventId:r};if(e instanceof DS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",t2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof qa){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${tO}=${encodeURIComponent(l)}`:"";return`${nO(t)}?${Ha(a).slice(1)}${c}`}function nO({config:t}){return t.emulator?pg(t,eO):`https://${t.authDomain}/${ZM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="webStorageSupport";class iO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=bM,this._overrideRedirectResult=IM}async _openPopup(e,n,i,r){var s;ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Wv(e,n,i,Mf(),r);return XM(e,o,yg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Wv(e,n,i,Mf(),r);return oM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ni(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await WM(e),i=new CM(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ed,{type:Ed},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Ed];o!==void 0&&n(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kS()||TS()||mg()}}const rO=iO;var qv="@firebase/auth",Kv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aO(t){Ns(new Dr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(t)},c=new VD(i,r,s,l);return BD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ns(new Dr("auth-internal",e=>{const n=qc(e.getProvider("auth").getImmediate());return(i=>new sO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(qv,Kv,oO(t)),Ui(qv,Kv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=5*60,uO=iS("authIdTokenMaxAge")||lO;let Gv=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>uO)return;const r=n==null?void 0:n.token;Gv!==r&&(Gv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function hO(t=uS()){const e=hg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jD(t,{popupRedirectResolver:rO,persistence:[gM,iM,LS]}),i=iS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=cO(s.toString());ZD(n,o,()=>o(n.currentUser)),JD(n,a=>o(a))}}const r=tS("auth");return r&&$D(n,`http://${r}`),n}function dO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=xn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",dO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aO("Browser");var fO="firebase",pO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui(fO,pO,"app");var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,HS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function S(){}S.prototype=w.prototype,I.D=w.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(b,C,P){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return w.prototype[C].apply(b,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,S){S||(S=0);var b=Array(16);if(typeof w=="string")for(var C=0;16>C;++C)b[C]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(C=0;16>C;++C)b[C]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=I.g[0],S=I.g[1],C=I.g[2];var P=I.g[3],k=w+(P^S&(C^P))+b[0]+3614090360&4294967295;w=S+(k<<7&4294967295|k>>>25),k=P+(C^w&(S^C))+b[1]+3905402710&4294967295,P=w+(k<<12&4294967295|k>>>20),k=C+(S^P&(w^S))+b[2]+606105819&4294967295,C=P+(k<<17&4294967295|k>>>15),k=S+(w^C&(P^w))+b[3]+3250441966&4294967295,S=C+(k<<22&4294967295|k>>>10),k=w+(P^S&(C^P))+b[4]+4118548399&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(C^w&(S^C))+b[5]+1200080426&4294967295,P=w+(k<<12&4294967295|k>>>20),k=C+(S^P&(w^S))+b[6]+2821735955&4294967295,C=P+(k<<17&4294967295|k>>>15),k=S+(w^C&(P^w))+b[7]+4249261313&4294967295,S=C+(k<<22&4294967295|k>>>10),k=w+(P^S&(C^P))+b[8]+1770035416&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(C^w&(S^C))+b[9]+2336552879&4294967295,P=w+(k<<12&4294967295|k>>>20),k=C+(S^P&(w^S))+b[10]+4294925233&4294967295,C=P+(k<<17&4294967295|k>>>15),k=S+(w^C&(P^w))+b[11]+2304563134&4294967295,S=C+(k<<22&4294967295|k>>>10),k=w+(P^S&(C^P))+b[12]+1804603682&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(C^w&(S^C))+b[13]+4254626195&4294967295,P=w+(k<<12&4294967295|k>>>20),k=C+(S^P&(w^S))+b[14]+2792965006&4294967295,C=P+(k<<17&4294967295|k>>>15),k=S+(w^C&(P^w))+b[15]+1236535329&4294967295,S=C+(k<<22&4294967295|k>>>10),k=w+(C^P&(S^C))+b[1]+4129170786&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^C&(w^S))+b[6]+3225465664&4294967295,P=w+(k<<9&4294967295|k>>>23),k=C+(w^S&(P^w))+b[11]+643717713&4294967295,C=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(C^P))+b[0]+3921069994&4294967295,S=C+(k<<20&4294967295|k>>>12),k=w+(C^P&(S^C))+b[5]+3593408605&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^C&(w^S))+b[10]+38016083&4294967295,P=w+(k<<9&4294967295|k>>>23),k=C+(w^S&(P^w))+b[15]+3634488961&4294967295,C=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(C^P))+b[4]+3889429448&4294967295,S=C+(k<<20&4294967295|k>>>12),k=w+(C^P&(S^C))+b[9]+568446438&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^C&(w^S))+b[14]+3275163606&4294967295,P=w+(k<<9&4294967295|k>>>23),k=C+(w^S&(P^w))+b[3]+4107603335&4294967295,C=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(C^P))+b[8]+1163531501&4294967295,S=C+(k<<20&4294967295|k>>>12),k=w+(C^P&(S^C))+b[13]+2850285829&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^C&(w^S))+b[2]+4243563512&4294967295,P=w+(k<<9&4294967295|k>>>23),k=C+(w^S&(P^w))+b[7]+1735328473&4294967295,C=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(C^P))+b[12]+2368359562&4294967295,S=C+(k<<20&4294967295|k>>>12),k=w+(S^C^P)+b[5]+4294588738&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^C)+b[8]+2272392833&4294967295,P=w+(k<<11&4294967295|k>>>21),k=C+(P^w^S)+b[11]+1839030562&4294967295,C=P+(k<<16&4294967295|k>>>16),k=S+(C^P^w)+b[14]+4259657740&4294967295,S=C+(k<<23&4294967295|k>>>9),k=w+(S^C^P)+b[1]+2763975236&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^C)+b[4]+1272893353&4294967295,P=w+(k<<11&4294967295|k>>>21),k=C+(P^w^S)+b[7]+4139469664&4294967295,C=P+(k<<16&4294967295|k>>>16),k=S+(C^P^w)+b[10]+3200236656&4294967295,S=C+(k<<23&4294967295|k>>>9),k=w+(S^C^P)+b[13]+681279174&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^C)+b[0]+3936430074&4294967295,P=w+(k<<11&4294967295|k>>>21),k=C+(P^w^S)+b[3]+3572445317&4294967295,C=P+(k<<16&4294967295|k>>>16),k=S+(C^P^w)+b[6]+76029189&4294967295,S=C+(k<<23&4294967295|k>>>9),k=w+(S^C^P)+b[9]+3654602809&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^C)+b[12]+3873151461&4294967295,P=w+(k<<11&4294967295|k>>>21),k=C+(P^w^S)+b[15]+530742520&4294967295,C=P+(k<<16&4294967295|k>>>16),k=S+(C^P^w)+b[2]+3299628645&4294967295,S=C+(k<<23&4294967295|k>>>9),k=w+(C^(S|~P))+b[0]+4096336452&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~C))+b[7]+1126891415&4294967295,P=w+(k<<10&4294967295|k>>>22),k=C+(w^(P|~S))+b[14]+2878612391&4294967295,C=P+(k<<15&4294967295|k>>>17),k=S+(P^(C|~w))+b[5]+4237533241&4294967295,S=C+(k<<21&4294967295|k>>>11),k=w+(C^(S|~P))+b[12]+1700485571&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~C))+b[3]+2399980690&4294967295,P=w+(k<<10&4294967295|k>>>22),k=C+(w^(P|~S))+b[10]+4293915773&4294967295,C=P+(k<<15&4294967295|k>>>17),k=S+(P^(C|~w))+b[1]+2240044497&4294967295,S=C+(k<<21&4294967295|k>>>11),k=w+(C^(S|~P))+b[8]+1873313359&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~C))+b[15]+4264355552&4294967295,P=w+(k<<10&4294967295|k>>>22),k=C+(w^(P|~S))+b[6]+2734768916&4294967295,C=P+(k<<15&4294967295|k>>>17),k=S+(P^(C|~w))+b[13]+1309151649&4294967295,S=C+(k<<21&4294967295|k>>>11),k=w+(C^(S|~P))+b[4]+4149444226&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~C))+b[11]+3174756917&4294967295,P=w+(k<<10&4294967295|k>>>22),k=C+(w^(P|~S))+b[2]+718787259&4294967295,C=P+(k<<15&4294967295|k>>>17),k=S+(P^(C|~w))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+P&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var S=w-this.blockSize,b=this.B,C=this.h,P=0;P<w;){if(C==0)for(;P<=S;)r(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(b[C++]=I.charCodeAt(P++),C==this.blockSize){r(this,b),C=0;break}}else for(;P<w;)if(b[C++]=I[P++],C==this.blockSize){r(this,b),C=0;break}}this.h=C,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var S=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=S&255,S/=256;for(this.u(I),I=Array(16),w=S=0;4>w;++w)for(var b=0;32>b;b+=8)I[S++]=this.g[w]>>>b&255;return I};function s(I,w){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=w(I)}function o(I,w){this.h=w;for(var S=[],b=!0,C=I.length-1;0<=C;C--){var P=I[C]|0;b&&P==w||(S[C]=P,b=!1)}this.g=S}var a={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return x(c(-I));for(var w=[],S=1,b=0;I>=S;b++)w[b]=I/S|0,S*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return x(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(w,8)),b=d,C=0;C<I.length;C+=8){var P=Math.min(8,I.length-C),k=parseInt(I.substring(C,C+P),w);8>P?(P=c(Math.pow(w,P)),b=b.j(P).add(c(k))):(b=b.j(S),b=b.add(c(k)))}return b}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-x(this).m();for(var I=0,w=1,S=0;S<this.g.length;S++){var b=this.i(S);I+=(0<=b?b:4294967296+b)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(E(this))return"-"+x(this).toString(I);for(var w=c(Math.pow(I,6)),S=this,b="";;){var C=R(S,w).g;S=v(S,C.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=C,_(S))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=v(this,I),E(I)?-1:_(I)?0:1};function x(I){for(var w=I.g.length,S=[],b=0;b<w;b++)S[b]=~I.g[b];return new o(S,~I.h).add(p)}t.abs=function(){return E(this)?x(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),S=[],b=0,C=0;C<=w;C++){var P=b+(this.i(C)&65535)+(I.i(C)&65535),k=(P>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);b=k>>>16,P&=65535,k&=65535,S[C]=k<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function v(I,w){return I.add(x(w))}t.j=function(I){if(_(this)||_(I))return d;if(E(this))return E(I)?x(this).j(x(I)):x(x(this).j(I));if(E(I))return x(this.j(x(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,S=[],b=0;b<2*w;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<I.g.length;C++){var P=this.i(b)>>>16,k=this.i(b)&65535,Ee=I.i(C)>>>16,ne=I.i(C)&65535;S[2*b+2*C]+=k*ne,y(S,2*b+2*C),S[2*b+2*C+1]+=P*ne,y(S,2*b+2*C+1),S[2*b+2*C+1]+=k*Ee,y(S,2*b+2*C+1),S[2*b+2*C+2]+=P*Ee,y(S,2*b+2*C+2)}for(b=0;b<w;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=w;b<2*w;b++)S[b]=0;return new o(S,0)};function y(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function A(I,w){this.g=I,this.h=w}function R(I,w){if(_(w))throw Error("division by zero");if(_(I))return new A(d,d);if(E(I))return w=R(x(I),w),new A(x(w.g),x(w.h));if(E(w))return w=R(I,x(w)),new A(x(w.g),w.h);if(30<I.g.length){if(E(I)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var S=p,b=w;0>=b.l(I);)S=M(S),b=M(b);var C=O(S,1),P=O(b,1);for(b=O(b,2),S=O(S,2);!_(b);){var k=P.add(b);0>=k.l(I)&&(C=C.add(S),P=k),b=O(b,1),S=O(S,1)}return w=v(I,C.j(w)),new A(C,w)}for(C=d;0<=I.l(w);){for(S=Math.max(1,Math.floor(I.m()/w.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(S),k=P.j(w);E(k)||0<k.l(I);)S-=b,P=c(S),k=P.j(w);_(P)&&(P=p),C=C.add(P),I=v(I,k)}return new A(C,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)&I.i(b);return new o(S,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)|I.i(b);return new o(S,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)^I.i(b);return new o(S,this.h^I.h)};function M(I){for(var w=I.g.length+1,S=[],b=0;b<w;b++)S[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(S,I.h)}function O(I,w){var S=w>>5;w%=32;for(var b=I.g.length-S,C=[],P=0;P<b;P++)C[P]=0<w?I.i(P+S)>>>w|I.i(P+S+1)<<32-w:I.i(P+S);return new o(C,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,HS=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ji=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,Vo,qS,vu,Vf,KS,GS,QS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,f){if(f)e:{var g=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var D=u[T];if(!(D in g))break e;g=g[D]}u=u[u.length-1],T=g[u],f=f(T),f!=T&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,T=!1,D={next:function(){if(!T&&g<u.length){var N=g++;return{value:f(N,u[N]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function _(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(T,D,N){for(var j=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)j[ye-2]=arguments[ye];return f.prototype[D].apply(T,j)}}function E(u){const f=u.length;if(0<f){const g=Array(f);for(let T=0;T<f;T++)g[T]=u[T];return g}return[]}function x(u,f){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(l(T)){const D=u.length||0,N=T.length||0;u.length=D+N;for(let j=0;j<N;j++)u[D+j]=T[j]}else u.push(T)}}class v{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(u){return/^[\s\xa0]*$/.test(u)}function A(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function O(u,f,g){for(const T in u)f.call(g,u[T],T,u)}function I(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function w(u){const f={};for(const g in u)f[g]=u[g];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,f){let g,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(g in T)u[g]=T[g];for(let N=0;N<S.length;N++)g=S[N],Object.prototype.hasOwnProperty.call(T,g)&&(u[g]=T[g])}}function C(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function P(u){a.setTimeout(()=>{throw u},0)}function k(){var u=W;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ee{constructor(){this.h=this.g=null}add(f,g){const T=ne.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var ne=new v(()=>new de,u=>u.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let he,z=!1,W=new Ee,Q=()=>{const u=a.Promise.resolve(void 0);he=()=>{u.then(me)}};var me=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(g){P(g)}var f=ne;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}z=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Et(u,f){if(_e.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{R(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Et.aa.h.call(this)}}_(Et,_e);var et={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),x1=0;function b1(u,f,g,T,D){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=D,this.key=++x1,this.da=this.fa=!1}function Za(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function el(u){this.src=u,this.g={},this.h=0}el.prototype.add=function(u,f,g,T,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var j=uh(u,f,T,D);return-1<j?(f=u[j],g||(f.fa=!1)):(f=new b1(f,this.src,N,!!T,D),f.fa=g,u.push(f)),f};function lh(u,f){var g=f.type;if(g in u.g){var T=u.g[g],D=Array.prototype.indexOf.call(T,f,void 0),N;(N=0<=D)&&Array.prototype.splice.call(T,D,1),N&&(Za(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function uh(u,f,g,T){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==f&&N.capture==!!g&&N.ha==T)return D}return-1}var ch="closure_lm_"+(1e6*Math.random()|0),hh={};function tm(u,f,g,T,D){if(Array.isArray(f)){for(var N=0;N<f.length;N++)tm(u,f[N],g,T,D);return null}return g=rm(g),u&&u[Mn]?u.K(f,g,c(T)?!!T.capture:!1,D):k1(u,f,g,!1,T,D)}function k1(u,f,g,T,D,N){if(!f)throw Error("Invalid event type");var j=c(D)?!!D.capture:!!D,ye=fh(u);if(ye||(u[ch]=ye=new el(u)),g=ye.add(f,g,T,j,N),g.proxy)return g;if(T=C1(),g.proxy=T,T.src=u,T.listener=g,u.addEventListener)Ze||(D=j),D===void 0&&(D=!1),u.addEventListener(f.toString(),T,D);else if(u.attachEvent)u.attachEvent(im(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function C1(){function u(g){return f.call(u.src,u.listener,g)}const f=P1;return u}function nm(u,f,g,T,D){if(Array.isArray(f))for(var N=0;N<f.length;N++)nm(u,f[N],g,T,D);else T=c(T)?!!T.capture:!!T,g=rm(g),u&&u[Mn]?(u=u.i,f=String(f).toString(),f in u.g&&(N=u.g[f],g=uh(N,g,T,D),-1<g&&(Za(N[g]),Array.prototype.splice.call(N,g,1),N.length==0&&(delete u.g[f],u.h--)))):u&&(u=fh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=uh(f,g,T,D)),(g=-1<u?f[u]:null)&&dh(g))}function dh(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Mn])lh(f.i,u);else{var g=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(g,T,u.capture):f.detachEvent?f.detachEvent(im(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=fh(f))?(lh(g,u),g.h==0&&(g.src=null,f[ch]=null)):Za(u)}}}function im(u){return u in hh?hh[u]:hh[u]="on"+u}function P1(u,f){if(u.da)u=!0;else{f=new Et(f,this);var g=u.listener,T=u.ha||u.src;u.fa&&dh(u),u=g.call(T,f)}return u}function fh(u){return u=u[ch],u instanceof el?u:null}var ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(u){return typeof u=="function"?u:(u[ph]||(u[ph]=function(f){return u.handleEvent(f)}),u[ph])}function lt(){se.call(this),this.i=new el(this),this.M=this,this.F=null}_(lt,se),lt.prototype[Mn]=!0,lt.prototype.removeEventListener=function(u,f,g,T){nm(this,u,f,g,T)};function Tt(u,f){var g,T=u.F;if(T)for(g=[];T;T=T.F)g.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new _e(f,u);else if(f instanceof _e)f.target=f.target||u;else{var D=f;f=new _e(T,u),b(f,D)}if(D=!0,g)for(var N=g.length-1;0<=N;N--){var j=f.g=g[N];D=tl(j,T,!0,f)&&D}if(j=f.g=u,D=tl(j,T,!0,f)&&D,D=tl(j,T,!1,f)&&D,g)for(N=0;N<g.length;N++)j=f.g=g[N],D=tl(j,T,!1,f)&&D}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],T=0;T<g.length;T++)Za(g[T]);delete u.g[f],u.h--}}this.F=null},lt.prototype.K=function(u,f,g,T){return this.i.add(String(u),f,!1,g,T)},lt.prototype.L=function(u,f,g,T){return this.i.add(String(u),f,!0,g,T)};function tl(u,f,g,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,N=0;N<f.length;++N){var j=f[N];if(j&&!j.da&&j.capture==g){var ye=j.listener,tt=j.ha||j.src;j.fa&&lh(u.i,j),D=ye.call(tt,T)!==!1&&D}}return D&&!T.defaultPrevented}function sm(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function om(u){u.g=sm(()=>{u.g=null,u.i&&(u.i=!1,om(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class R1 extends se{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:om(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(u){se.call(this),this.h=u,this.g={}}_(eo,se);var am=[];function lm(u){O(u.g,function(f,g){this.g.hasOwnProperty(g)&&dh(f)},u),u.g={}}eo.prototype.N=function(){eo.aa.N.call(this),lm(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gh=a.JSON.stringify,D1=a.JSON.parse,M1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mh(){}mh.prototype.h=null;function um(u){return u.h||(u.h=u.i())}function cm(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _h(){_e.call(this,"d")}_(_h,_e);function yh(){_e.call(this,"c")}_(yh,_e);var ir={},hm=null;function nl(){return hm=hm||new lt}ir.La="serverreachability";function dm(u){_e.call(this,ir.La,u)}_(dm,_e);function no(u){const f=nl();Tt(f,new dm(f))}ir.STAT_EVENT="statevent";function fm(u,f){_e.call(this,ir.STAT_EVENT,u),this.stat=f}_(fm,_e);function St(u){const f=nl();Tt(f,new fm(f,u))}ir.Ma="timingevent";function pm(u,f){_e.call(this,ir.Ma,u),this.size=f}_(pm,_e);function io(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ro(){this.g=!0}ro.prototype.xa=function(){this.g=!1};function O1(u,f,g,T,D,N){u.info(function(){if(u.g)if(N)for(var j="",ye=N.split("&"),tt=0;tt<ye.length;tt++){var ce=ye[tt].split("=");if(1<ce.length){var ut=ce[0];ce=ce[1];var ct=ut.split("_");j=2<=ct.length&&ct[1]=="type"?j+(ut+"="+ce+"&"):j+(ut+"=redacted&")}}else j=null;else j=N;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+f+`
`+g+`
`+j})}function N1(u,f,g,T,D,N,j){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+f+`
`+g+`
`+N+" "+j})}function $r(u,f,g,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+L1(u,g)+(T?" "+T:"")})}function V1(u,f){u.info(function(){return"TIMEOUT: "+f})}ro.prototype.info=function(){};function L1(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var T=g[u];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var j=1;j<D.length;j++)D[j]=""}}}}return gh(g)}catch{return f}}var il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vh;function rl(){}_(rl,mh),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},vh=new rl;function ai(u,f,g,T){this.j=u,this.i=f,this.l=g,this.R=T||1,this.U=new eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var _m={},wh={};function Eh(u,f,g){u.L=1,u.v=ll(On(f)),u.m=g,u.P=!0,ym(u,null)}function ym(u,f){u.F=Date.now(),sl(u),u.A=On(u.v);var g=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Dm(g.i,"t",T),u.C=0,g=u.j.J,u.h=new mm,u.g=Ym(u.j,g?f:null,!u.m),0<u.O&&(u.M=new R1(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,T=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(am[0]=D.toString()),D=am);for(var N=0;N<D.length;N++){var j=tm(g,D[N],T||f.handleEvent,!1,f.h||f);if(!j)break;f.g[j.key]=j}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),no(),O1(u.i,u.u,u.A,u.l,u.R,u.m)}ai.prototype.ca=function(u){u=u.target;const f=this.M;f&&Nn(u)==3?f.j():this.Y(u)},ai.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Nn(this.g);var f=this.g.Ba();const qr=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Um(this.g)))){this.J||ct!=4||f==7||(f==8||0>=qr?no(3):no(2)),Th(this);var g=this.g.Z();this.X=g;t:if(vm(this)){var T=Um(this.g);u="";var D=T.length,N=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),so(this);var j="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(N&&f==D-1)});T.length=0,this.h.g+=u,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=g==200,N1(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,tt=this.g;if((ye=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ye)){var ce=ye;break t}}ce=null}if(g=ce)$r(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sh(this,g);else{this.o=!1,this.s=3,St(12),rr(this),so(this);break e}}if(this.P){g=!0;let rn;for(;!this.J&&this.C<j.length;)if(rn=F1(this,j),rn==wh){ct==4&&(this.s=4,St(14),g=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==_m){this.s=4,St(15),$r(this.i,this.l,j,"[Invalid Chunk]"),g=!1;break}else $r(this.i,this.l,rn,null),Sh(this,rn);if(vm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||j.length!=0||this.h.h||(this.s=1,St(16),g=!1),this.o=this.o&&g,!g)$r(this.i,this.l,j,"[Invalid Chunked Response]"),rr(this),so(this);else if(0<j.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Ch(ut),ut.M=!0,St(11))}}else $r(this.i,this.l,j,null),Sh(this,j);ct==4&&rr(this),this.o&&!this.J&&(ct==4?qm(this.j,this):(this.o=!1,sl(this)))}else tA(this.g),g==400&&0<j.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),rr(this),so(this)}}}catch{}finally{}};function vm(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function F1(u,f){var g=u.C,T=f.indexOf(`
`,g);return T==-1?wh:(g=Number(f.substring(g,T)),isNaN(g)?_m:(T+=1,T+g>f.length?wh:(f=f.slice(T,T+g),u.C=T+g,f)))}ai.prototype.cancel=function(){this.J=!0,rr(this)};function sl(u){u.S=Date.now()+u.I,wm(u,u.I)}function wm(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=io(p(u.ba,u),f)}function Th(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ai.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(V1(this.i,this.A),this.L!=2&&(no(),St(17)),rr(this),this.s=2,so(this)):wm(this,this.S-u)};function so(u){u.j.G==0||u.J||qm(u.j,u)}function rr(u){Th(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,lm(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Sh(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Ih(g.h,u))){if(!u.K&&Ih(g.h,u)&&g.G==3){try{var T=g.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)pl(g),dl(g);else break e;kh(g),St(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=io(p(g.Za,g),6e3));if(1>=Sm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else or(g,11)}else if((u.K||g.g==u)&&pl(g),!y(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let ce=D[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const ut=ce[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=ce[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const qr=ce[5];qr!=null&&typeof qr=="number"&&0<qr&&(T=1.5*qr,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const rn=u.g;if(rn){const ml=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var N=T.h;N.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Ah(N,N.h),N.h=null))}if(T.D){const Ph=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ph&&(T.ya=Ph,Ae(T.I,T.D,Ph))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var j=u;if(T.qa=Qm(T,T.J?T.ia:null,T.W),j.K){Im(T.h,j);var ye=j,tt=T.L;tt&&(ye.I=tt),ye.B&&(Th(ye),sl(ye)),T.g=j}else Hm(T);0<g.i.length&&fl(g)}else ce[0]!="stop"&&ce[0]!="close"||or(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?or(g,7):bh(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}no(4)}catch{}}var U1=class{constructor(u,f){this.g=u,this.map=f}};function Em(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sm(u){return u.h?1:u.g?u.g.size:0}function Ih(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Ah(u,f){u.g?u.g.add(f):u.h=f}function Im(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Em.prototype.cancel=function(){if(this.i=Am(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Am(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return E(u.i)}function z1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,T=0;T<g;T++)f.push(u[T]);return f}f=[],g=0;for(T in u)f[g++]=u[T];return f}function j1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const T in u)f[g++]=T;return f}}}function xm(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=j1(u),T=z1(u),D=T.length,N=0;N<D;N++)f.call(void 0,T[N],g&&g[N],u)}var bm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B1(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var T=u[g].indexOf("="),D=null;if(0<=T){var N=u[g].substring(0,T);D=u[g].substring(T+1)}else N=u[g];f(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function sr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof sr){this.h=u.h,ol(this,u.j),this.o=u.o,this.g=u.g,al(this,u.s),this.l=u.l;var f=u.i,g=new lo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),km(this,g),this.m=u.m}else u&&(f=String(u).match(bm))?(this.h=!1,ol(this,f[1]||"",!0),this.o=oo(f[2]||""),this.g=oo(f[3]||"",!0),al(this,f[4]),this.l=oo(f[5]||"",!0),km(this,f[6]||"",!0),this.m=oo(f[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}sr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ao(f,Cm,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ao(f,Cm,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ao(g,g.charAt(0)=="/"?W1:H1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ao(g,K1)),u.join("")};function On(u){return new sr(u)}function ol(u,f,g){u.j=g?oo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function al(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function km(u,f,g){f instanceof lo?(u.i=f,G1(u.i,u.h)):(g||(f=ao(f,q1)),u.i=new lo(f,u.h))}function Ae(u,f,g){u.i.set(f,g)}function ll(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function oo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ao(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,$1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cm=/[#\/\?@]/g,H1=/[#\?:]/g,W1=/[#\?]/g,q1=/[#\?@]/g,K1=/#/g;function lo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function li(u){u.g||(u.g=new Map,u.h=0,u.i&&B1(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=lo.prototype,t.add=function(u,f){li(this),this.i=null,u=Hr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function Pm(u,f){li(u),f=Hr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Rm(u,f){return li(u),f=Hr(u,f),u.g.has(f)}t.forEach=function(u,f){li(this),this.g.forEach(function(g,T){g.forEach(function(D){u.call(f,D,T,this)},this)},this)},t.na=function(){li(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let T=0;T<f.length;T++){const D=u[T];for(let N=0;N<D.length;N++)g.push(f[T])}return g},t.V=function(u){li(this);let f=[];if(typeof u=="string")Rm(this,u)&&(f=f.concat(this.g.get(Hr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return li(this),this.i=null,u=Hr(this,u),Rm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Dm(u,f,g){Pm(u,f),0<g.length&&(u.i=null,u.g.set(Hr(u,f),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var T=f[g];const N=encodeURIComponent(String(T)),j=this.V(T);for(T=0;T<j.length;T++){var D=N;j[T]!==""&&(D+="="+encodeURIComponent(String(j[T]))),u.push(D)}}return this.i=u.join("&")};function Hr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function G1(u,f){f&&!u.j&&(li(u),u.i=null,u.g.forEach(function(g,T){var D=T.toLowerCase();T!=D&&(Pm(this,T),Dm(this,D,g))},u)),u.j=f}function Q1(u,f){const g=new ro;if(a.Image){const T=new Image;T.onload=m(ui,g,"TestLoadImage: loaded",!0,f,T),T.onerror=m(ui,g,"TestLoadImage: error",!1,f,T),T.onabort=m(ui,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=m(ui,g,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function Y1(u,f){const g=new ro,T=new AbortController,D=setTimeout(()=>{T.abort(),ui(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(N=>{clearTimeout(D),N.ok?ui(g,"TestPingServer: ok",!0,f):ui(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),ui(g,"TestPingServer: error",!1,f)})}function ui(u,f,g,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(g)}catch{}}function X1(){this.g=new M1}function J1(u,f,g){const T=g||"";try{xm(u,function(D,N){let j=D;c(D)&&(j=gh(D)),f.push(T+N+"="+encodeURIComponent(j))})}catch(D){throw f.push(T+"type="+encodeURIComponent("_badmap")),D}}function ul(u){this.l=u.Ub||null,this.j=u.eb||!1}_(ul,mh),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(u){return function(){return u}}({});function cl(u,f){lt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(cl,lt),t=cl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,co(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?uo(this):co(this),this.readyState==3&&Mm(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,uo(this))},t.Qa=function(u){this.g&&(this.response=u,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,co(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function co(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Om(u){let f="";return O(u,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function xh(u,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Om(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ae(u,f,g))}function Oe(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Oe,lt);var Z1=/^https?$/i,eA=["POST","PUT"];t=Oe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vh.g(),this.v=this.o?um(this.o):um(vh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(N){Nm(this,N);return}if(u=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)g.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const N of T.keys())g.set(N,T.get(N));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eA,f,void 0))||T||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,j]of g)this.g.setRequestHeader(N,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fm(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Nm(this,N)}};function Nm(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Vm(u),hl(u)}function Vm(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lm(this):this.bb())},t.bb=function(){Lm(this)};function Lm(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)sm(u.Ea,0,u);else if(Tt(u,"readystatechange"),Nn(u)==4){u.h=!1;try{const j=u.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=j===0){var D=String(u.D).match(bm)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),T=!Z1.test(D?D.toLowerCase():"")}g=T}if(g)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var N=2<Nn(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Vm(u)}}finally{hl(u)}}}}function hl(u,f){if(u.g){Fm(u);const g=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Tt(u,"ready");try{g.onreadystatechange=T}catch{}}}function Fm(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),D1(f)}};function Um(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function tA(u){const f={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(y(u[T]))continue;var g=C(u[T]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const N=f[D]||[];f[D]=N,N.push(g)}I(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function zm(u){this.Aa=0,this.i=[],this.j=new ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,u),this.cb=ho("retryDelaySeedMs",1e4,u),this.Wa=ho("forwardChannelMaxRetries",2,u),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Em(u&&u.concurrentRequestLimit),this.Da=new X1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zm.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,T){St(0),this.W=u,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Qm(this,null,this.W),fl(this)};function bh(u){if(jm(u),u.G==3){var f=u.U++,g=On(u.I);if(Ae(g,"SID",u.K),Ae(g,"RID",f),Ae(g,"TYPE","terminate"),fo(u,g),f=new ai(u,u.j,f),f.L=2,f.v=ll(On(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Ym(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sl(f)}Gm(u)}function dl(u){u.g&&(Ch(u),u.g.cancel(),u.g=null)}function jm(u){dl(u),u.u&&(a.clearTimeout(u.u),u.u=null),pl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fl(u){if(!Tm(u.h)&&!u.s){u.s=!0;var f=u.Ga;he||Q(),z||(he(),z=!0),W.add(f,u),u.B=0}}function nA(u,f){return Sm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=io(p(u.Ga,u,f),Km(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new ai(this,this.j,u);let N=this.o;if(this.S&&(N?(N=w(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$m(this,D,f),g=On(this.I),Ae(g,"RID",u),Ae(g,"CVER",22),this.D&&Ae(g,"X-HTTP-Session-Id",this.D),fo(this,g),N&&(this.O?f="headers="+encodeURIComponent(String(Om(N)))+"&"+f:this.m&&xh(g,this.m,N)),Ah(this.h,D),this.Ua&&Ae(g,"TYPE","init"),this.P?(Ae(g,"$req",f),Ae(g,"SID","null"),D.T=!0,Eh(D,g,null)):Eh(D,g,f),this.G=2}}else this.G==3&&(u?Bm(this,u):this.i.length==0||Tm(this.h)||Bm(this))};function Bm(u,f){var g;f?g=f.l:g=u.U++;const T=On(u.I);Ae(T,"SID",u.K),Ae(T,"RID",g),Ae(T,"AID",u.T),fo(u,T),u.m&&u.o&&xh(T,u.m,u.o),g=new ai(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$m(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ah(u.h,g),Eh(g,T,f)}function fo(u,f){u.H&&O(u.H,function(g,T){Ae(f,T,g)}),u.l&&xm({},function(g,T){Ae(f,T,g)})}function $m(u,f,g){g=Math.min(u.i.length,g);var T=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){const j=["count="+g];N==-1?0<g?(N=D[0].g,j.push("ofs="+N)):N=0:j.push("ofs="+N);let ye=!0;for(let tt=0;tt<g;tt++){let ce=D[tt].g;const ut=D[tt].map;if(ce-=N,0>ce)N=Math.max(0,D[tt].g-100),ye=!1;else try{J1(ut,j,"req"+ce+"_")}catch{T&&T(ut)}}if(ye){T=j.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,T}function Hm(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;he||Q(),z||(he(),z=!0),W.add(f,u),u.v=0}}function kh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=io(p(u.Fa,u),Km(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Wm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=io(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),dl(this),Wm(this))};function Ch(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Wm(u){u.g=new ai(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=On(u.qa);Ae(f,"RID","rpc"),Ae(f,"SID",u.K),Ae(f,"AID",u.T),Ae(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(f,"TO",u.ja),Ae(f,"TYPE","xmlhttp"),fo(u,f),u.m&&u.o&&xh(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=ll(On(f)),g.m=null,g.P=!0,ym(g,u)}t.Za=function(){this.C!=null&&(this.C=null,dl(this),kh(this),St(19))};function pl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qm(u,f){var g=null;if(u.g==f){pl(u),Ch(u),u.g=null;var T=2}else if(Ih(u.h,f))g=f.D,Im(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;T=nl(),Tt(T,new pm(T,g)),fl(u)}else Hm(u);else if(D=f.s,D==3||D==0&&0<f.X||!(T==1&&nA(u,f)||T==2&&kh(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),D){case 1:or(u,5);break;case 4:or(u,10);break;case 3:or(u,6);break;default:or(u,2)}}}function Km(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function or(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),T=u.Xa;const D=!T;T=new sr(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ol(T,"https"),ll(T),D?Q1(T.toString(),g):Y1(T.toString(),g)}else St(2);u.G=0,u.l&&u.l.sa(f),Gm(u),jm(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Gm(u){if(u.G=0,u.ka=[],u.l){const f=Am(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Qm(u,f,g){var T=g instanceof sr?On(g):new sr(g);if(T.g!="")f&&(T.g=f+"."+T.g),al(T,T.s);else{var D=a.location;T=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var N=new sr(null);T&&ol(N,T),f&&(N.g=f),D&&al(N,D),g&&(N.l=g),T=N}return g=u.D,f=u.ya,g&&f&&Ae(T,g,f),Ae(T,"VER",u.la),fo(u,T),T}function Ym(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Oe(new ul({eb:g})):new Oe(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xm(){}t=Xm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gl(){}gl.prototype.g=function(u,f){return new Ft(u,f)};function Ft(u,f){lt.call(this),this.g=new zm(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wr(this)}_(Ft,lt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){bh(this.g)},Ft.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=gh(u),u=g);f.i.push(new U1(f.Ya++,u)),f.G==3&&fl(f)},Ft.prototype.N=function(){this.g.l=null,delete this.j,bh(this.g),delete this.g,Ft.aa.N.call(this)};function Jm(u){_h.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(Jm,_h);function Zm(){yh.call(this),this.status=1}_(Zm,yh);function Wr(u){this.g=u}_(Wr,Xm),Wr.prototype.ua=function(){Tt(this.g,"a")},Wr.prototype.ta=function(u){Tt(this.g,new Jm(u))},Wr.prototype.sa=function(u){Tt(this.g,new Zm)},Wr.prototype.ra=function(){Tt(this.g,"b")},gl.prototype.createWebChannel=gl.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,QS=function(){return new gl},GS=function(){return nl()},KS=ir,Vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,vu=il,gm.COMPLETE="complete",qS=gm,cm.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Vo=cm,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,WS=Oe}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore",Xv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new ug("@firebase/firestore");function Yr(){return Or.logLevel}function B(t,...e){if(Or.logLevel<=ie.DEBUG){const n=e.map(wg);Or.debug(`Firestore (${Qs}): ${t}`,...n)}}function ii(t,...e){if(Or.logLevel<=ie.ERROR){const n=e.map(wg);Or.error(`Firestore (${Qs}): ${t}`,...n)}}function Ki(t,...e){if(Or.logLevel<=ie.WARN){const n=e.map(wg);Or.warn(`Firestore (${Qs}): ${t}`,...n)}}function wg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,YS(t,i,n)}function YS(t,e,n){let i=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ii(i),new Error(i)}function fe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||YS(e,r,i)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class mO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _O{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string",31837,{l:i}),new XS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class yO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new yO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const i=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=EO(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ee(t,e){return t<e?-1:t>e?1:0}function Lf(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return ee(i,r);{const s=JS(),o=TO(s.encode(Zv(t,n)),s.encode(Zv(e,n)));return o!==0?o:ee(i,r)}}n+=i>65535?2:1}return ee(t.length,e.length)}function Zv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function TO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function Vs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__name__";class Tn{constructor(e,n,i){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&G(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Tn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ee(e.length,n.length)}static compareSegments(e,n){const i=Tn.isNumericId(e),r=Tn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Tn.extractNumericId(e).compare(Tn.extractNumericId(n)):Lf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class Te extends Tn{construct(e,n,i){return new Te(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const SO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Tn{construct(e,n,i){return new rt(e,n,i)}static isValidIdentifier(e){return SO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e0}static keyField(){return new rt([e0])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Te.fromString(e))}static fromName(e){return new q(Te.fromString(e).popFirst(5))}static empty(){return new q(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IO(t,e,n,i){if(e===!0&&i===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t0(t){if(!q.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n0(t){if(q.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function ea(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qc(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ga(t,e){if(!eI(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(r&&typeof o!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new $(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=-62135596800,r0=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*r0);return new Se(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<i0)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r0}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ga(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-i0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:$e("string",Se._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Se(0,0))}static max(){return new J(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function AO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Se(n+1,0):new Se(n,i));return new Gi(r,q.empty(),e)}function xO(t){return new Gi(t.readTime,t.key,Ca)}class Gi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Gi(J.min(),q.empty(),Ca)}static max(){return new Gi(J.max(),q.empty(),Ca)}}function bO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==kO)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,i)=>{n(e)})}static reject(e){return new L((n,i)=>{i(e)})}static waitFor(e){return new L((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=L.resolve(!1);for(const i of e)n=n.next(r=>r?L.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new L((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new L((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function PO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Yc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-1;function Xc(t){return t==null}function fc(t){return t===0&&1/t==-1/0}function RO(t){return typeof t=="number"&&Number.isInteger(t)&&!fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="";function DO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=s0(e)),e=MO(t.get(n),e);return s0(e)}function MO(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case tI:n+="";break;default:n+=s}}return n}function s0(t){return t+tI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??it.RED,this.left=r??it.EMPTY,this.right=s??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new it(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return it.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a0(this.data.getIterator())}getIteratorFrom(e){return new a0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class a0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new Qe(rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iI("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const OO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=OO.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yi(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="server_timestamp",sI="__type__",oI="__previous_value__",aI="__local_write_time__";function Sg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[sI])===null||n===void 0?void 0:n.stringValue)===rI}function Jc(t){const e=t.mapValue.fields[oI];return Sg(e)?Jc(e):e}function Pa(t){const e=Qi(t.mapValue.fields[aI].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,i,r,s,o,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const pc="(default)";class Ra{constructor(e,n){this.projectId=e,this.database=n||pc}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="__type__",VO="__max__",Ql={mapValue:{}},uI="__vector__",gc="value";function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sg(t)?4:FO(t)?9007199254740991:LO(t)?10:11:G(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Qi(r.timestampValue),a=Qi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Yi(r.bytesValue).isEqual(Yi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ve(r.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(r.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ve(r.integerValue)===Ve(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ve(r.doubleValue),a=Ve(s.doubleValue);return o===a?fc(o)===fc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(o0(o)!==o0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function Da(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Xi(t),i=Xi(e);if(n!==i)return ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return l0(t.timestampValue,e.timestampValue);case 4:return l0(Pa(t),Pa(e));case 5:return Lf(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yi(s),l=Yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ee(a[c],l[c]);if(h!==0)return h}return ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ee(Ve(s.latitude),Ve(o.latitude));return a!==0?a:ee(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},m=(a=d[gc])===null||a===void 0?void 0:a.arrayValue,_=(l=p[gc])===null||l===void 0?void 0:l.arrayValue,E=ee(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:u0(m,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ql.mapValue&&o===Ql.mapValue)return 0;if(s===Ql.mapValue)return 1;if(o===Ql.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Lf(l[d],h[d]);if(p!==0)return p;const m=Ls(a[l[d]],c[h[d]]);if(m!==0)return m}return ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function l0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Qi(t),i=Qi(e),r=ee(n.seconds,i.seconds);return r!==0?r:ee(n.nanos,i.nanos)}function u0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ls(n[r],i[r]);if(s)return s}return ee(n.length,i.length)}function Fs(t){return Ff(t)}function Ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Qi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Ff(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Ff(n.fields[o])}`;return r+"}"}(t.mapValue):G(61005,{value:t})}function wu(t){switch(Xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(t);return e?16+wu(e):16;case 5:return 2*t.stringValue.length;case 6:return Yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+wu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Fr(i.fields,(s,o)=>{r+=s.length+wu(o)}),r}(t.mapValue);default:throw G(13486,{value:t})}}function c0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uf(t){return!!t&&"integerValue"in t}function Ig(t){return!!t&&"arrayValue"in t}function h0(t){return!!t&&"nullValue"in t}function d0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function LO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[lI])===null||n===void 0?void 0:n.stringValue)===uI}function ta(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ta(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ta(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Fr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Gt(ta(this.value))}}function cI(t){const e=[];return Fr(t.fields,(n,i)=>{const r=new rt([n]);if(Eu(i)){const s=cI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,J.min(),J.min(),J.min(),Gt.empty(),0)}static newFoundDocument(e,n,i,r){return new _t(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new _t(e,2,n,J.min(),J.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,J.min(),J.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.position=e,this.inclusive=n}}function f0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=q.comparator(q.fromName(o.referenceValue),n.key):i=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function p0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function UO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{}class je extends hI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new jO(e,n,i):n==="array-contains"?new HO(e,i):n==="in"?new WO(e,i):n==="not-in"?new qO(e,i):n==="array-contains-any"?new KO(e,i):new je(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new BO(e,i):new $O(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends hI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new gn(e,n)}matches(e){return dI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function dI(t){return t.op==="and"}function fI(t){return zO(t)&&dI(t)}function zO(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function zf(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(fI(t))return t.filters.map(e=>zf(e)).join(",");{const e=t.filters.map(n=>zf(n)).join(",");return`${t.op}(${e})`}}function pI(t,e){return t instanceof je?function(i,r){return r instanceof je&&i.op===r.op&&i.field.isEqual(r.field)&&Dn(i.value,r.value)}(t,e):t instanceof gn?function(i,r){return r instanceof gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&pI(o,r.filters[a]),!0):!1}(t,e):void G(19439)}function gI(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(gI).join(" ,")+"}"}(t):"Filter"}class jO extends je{constructor(e,n,i){super(e,n,i),this.key=q.fromName(i.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class BO extends je{constructor(e,n){super(e,"in",n),this.keys=mI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $O extends je{constructor(e,n){super(e,"not-in",n),this.keys=mI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>q.fromName(i.referenceValue))}class HO extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ig(n)&&Da(n.arrayValue,this.value)}}class WO extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class qO extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class KO extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Da(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function g0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new GO(t,e,n,i,r,s,o)}function Ag(t){const e=Z(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Xc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fs(i)).join(",")),e.Pe=n}return e.Pe}function xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p0(t.startAt,e.startAt)&&p0(t.endAt,e.endAt)}function jf(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function QO(t,e,n,i,r,s,o,a){return new Js(t,e,n,i,r,s,o,a)}function bg(t){return new Js(t)}function m0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _I(t){return t.collectionGroup!==null}function na(t){const e=Z(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Ma(s,i))}),n.has(rt.keyField().canonicalString())||e.Te.push(new Ma(rt.keyField(),i))}return e.Te}function kn(t){const e=Z(t);return e.Ie||(e.Ie=YO(e,na(t))),e.Ie}function YO(t,e){if(t.limitType==="F")return g0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ma(r.field,s)});const n=t.endAt?new mc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new mc(t.startAt.position,t.startAt.inclusive):null;return g0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bf(t,e){const n=t.filters.concat([e]);return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $f(t,e,n){return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zc(t,e){return xg(kn(t),kn(e))&&t.limitType===e.limitType}function yI(t){return`${Ag(kn(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>gI(r)).join(", ")}]`),Xc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fs(r)).join(",")),`Target(${i})`}(kn(t))}; limitType=${t.limitType})`}function eh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of na(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=f0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,na(i),r)||i.endAt&&!function(o,a,l){const c=f0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,na(i),r))}(t,e)}function XO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vI(t){return(e,n)=>{let i=!1;for(const r of na(t)){const s=JO(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function JO(t,e,n){const i=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ls(l,c):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return nI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=new Me(q.comparator);function ri(){return ZO}const wI=new Me(q.comparator);function Lo(...t){let e=wI;for(const n of t)e=e.insert(n.key,n);return e}function EI(t){let e=wI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function yr(){return ia()}function TI(){return ia()}function ia(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const eN=new Me(q.comparator),tN=new Qe(q.comparator);function re(...t){let e=tN;for(const n of t)e=e.add(n);return e}const nN=new Qe(ee);function iN(){return nN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function SI(t){return{integerValue:""+t}}function rN(t,e){return RO(e)?SI(e):kg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this._=void 0}}function sN(t,e,n){return t instanceof Oa?function(r,s){const o={fields:{[sI]:{stringValue:rI},[aI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Sg(s)&&(s=Jc(s)),s&&(o.fields[oI]=s),{mapValue:o}}(n,e):t instanceof Na?AI(t,e):t instanceof Va?xI(t,e):function(r,s){const o=II(r,s),a=_0(o)+_0(r.Ee);return Uf(o)&&Uf(r.Ee)?SI(a):kg(r.serializer,a)}(t,e)}function oN(t,e,n){return t instanceof Na?AI(t,e):t instanceof Va?xI(t,e):n}function II(t,e){return t instanceof _c?function(i){return Uf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Oa extends th{}class Na extends th{constructor(e){super(),this.elements=e}}function AI(t,e){const n=bI(e);for(const i of t.elements)n.some(r=>Dn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Va extends th{constructor(e){super(),this.elements=e}}function xI(t,e){let n=bI(e);for(const i of t.elements)n=n.filter(r=>!Dn(r,i));return{arrayValue:{values:n}}}class _c extends th{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function _0(t){return Ve(t.integerValue||t.doubleValue)}function bI(t){return Ig(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.field=e,this.transform=n}}function lN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Na&&r instanceof Na||i instanceof Va&&r instanceof Va?Vs(i.elements,r.elements,Dn):i instanceof _c&&r instanceof _c?Dn(i.Ee,r.Ee):i instanceof Oa&&r instanceof Oa}(t.transform,e.transform)}class uN{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nh{}function kI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PI(t.key,Gn.none()):new Qa(t.key,t.data,Gn.none());{const n=t.data,i=Gt.empty();let r=new Qe(rt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new zr(t.key,i,new hn(r.toArray()),Gn.none())}}function cN(t,e,n){t instanceof Qa?function(r,s,o){const a=r.value.clone(),l=v0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(r,s,o){if(!Tu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=v0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(CI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,i){return t instanceof Qa?function(s,o,a,l){if(!Tu(s.precondition,o))return a;const c=s.value.clone(),h=w0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof zr?function(s,o,a,l){if(!Tu(s.precondition,o))return a;const c=w0(s.fieldTransforms,l,o),h=o.data;return h.setAll(CI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Tu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function hN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=II(i.transform,r||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(i.field,s))}return n||null}function y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vs(i,r,(s,o)=>lN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends nh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zr extends nh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function v0(t,e,n){const i=new Map;fe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,oN(o,a,n[r]))}return i}function w0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,sN(s,o,e))}return i}class PI extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dN extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&cN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=TI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=kI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(n,i)=>y0(n,i))&&Vs(this.baseMutations,e.baseMutations,(n,i)=>y0(n,i))}}class Cg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return eN}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Cg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,oe;function mN(t){switch(t){case V.OK:return G(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function RI(t){if(t===void 0)return ii("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ue.OK:return V.OK;case Ue.CANCELLED:return V.CANCELLED;case Ue.UNKNOWN:return V.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return V.INTERNAL;case Ue.UNAVAILABLE:return V.UNAVAILABLE;case Ue.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ue.NOT_FOUND:return V.NOT_FOUND;case Ue.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ue.ABORTED:return V.ABORTED;case Ue.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ue.DATA_LOSS:return V.DATA_LOSS;default:return G(39323,{code:t})}}(oe=Ue||(Ue={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new ji([4294967295,4294967295],0);function E0(t){const e=JS().encode(t),n=new HS;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ji([n,i],0),new ji([r,s],0)]}class Pg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(i<0)throw new Fo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ji.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(ji.fromNumber(i)));return r.compare(_N)===1&&(r=new ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=E0(e),[i,r]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Pg(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=E0(e),[i,r]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);this.we(o)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ih(J.min(),r,new Me(ee),ri(),re())}}class Ya{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ya(i,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class DI{constructor(e,n){this.targetId=e,this.De=n}}class MI{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class S0{constructor(){this.ve=0,this.Ce=I0(),this.Fe=at.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=re(),n=re(),i=re();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:G(38017,{changeType:s})}}),new Ya(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=I0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class yN{constructor(e){this.We=e,this.Ge=new Map,this.ze=ri(),this.je=Yl(),this.Je=Yl(),this.He=new Me(ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(jf(s))if(i===0){const o=new q(s.path);this.Xe(n,o,_t.newNoDocument(o,J.min()))}else fe(i===1,20013,{expectedCount:i});else{const o=this.ot(n);if(o!==i){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Yi(i).toUint8Array()}catch(l){if(l instanceof iI)return Ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Pg(o,r,s)}catch(l){return Ki(l instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&jf(a.target)){const l=new q(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,_t.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let i=re();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const r=new ih(e,n,this.He,this.ze,i);return this.ze=ri(),this.je=Yl(),this.Je=Yl(),this.He=new Me(ee),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new S0,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qe(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qe(ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new S0),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Yl(){return new Me(q.comparator)}function I0(){return new Me(q.comparator)}const vN={asc:"ASCENDING",desc:"DESCENDING"},wN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EN={and:"AND",or:"OR"};class TN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hf(t,e){return t.useProto3Json||Xc(e)?e:{value:e}}function yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SN(t,e){return yc(t,e.toTimestamp())}function Cn(t){return fe(!!t,49232),J.fromTimestamp(function(n){const i=Qi(n);return new Se(i.seconds,i.nanos)}(t))}function Rg(t,e){return Wf(t,e).canonicalString()}function Wf(t,e){const n=function(r){return new Te(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NI(t){const e=Te.fromString(t);return fe(zI(e),10190,{key:e.toString()}),e}function qf(t,e){return Rg(t.databaseId,e.path)}function Td(t,e){const n=NI(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(LI(n))}function VI(t,e){return Rg(t.databaseId,e)}function IN(t){const e=NI(t);return e.length===4?Te.emptyPath():LI(e)}function Kf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LI(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function A0(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function AN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(fe(h===void 0||typeof h=="string",58123),at.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?V.UNKNOWN:RI(c.code);return new $(h,c.message||"")}(o);n=new MI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Td(t,i.document.name),s=Cn(i.document.updateTime),o=i.document.createTime?Cn(i.document.createTime):J.min(),a=new Gt({mapValue:{fields:i.document.fields}}),l=_t.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Su(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Td(t,i.document),s=i.readTime?Cn(i.readTime):J.min(),o=_t.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Su([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Td(t,i.document),s=i.removedTargetIds||[];n=new Su([],s,r,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new gN(r,s),a=i.targetId;n=new DI(a,o)}}return n}function xN(t,e){let n;if(e instanceof Qa)n={update:A0(t,e.key,e.value)};else if(e instanceof PI)n={delete:qf(t,e.key)};else if(e instanceof zr)n={update:A0(t,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof dN))return G(16599,{Rt:e.type});n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _c)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:o.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:SN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G(27497)}(t,e.precondition)),n}function bN(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(r,s){let o=r.updateTime?Cn(r.updateTime):Cn(s);return o.isEqual(J.min())&&(o=Cn(s)),new uN(o,r.transformResults||[])}(n,e))):[]}function kN(t,e){return{documents:[VI(t,e.path)]}}function CN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VI(t,r);const s=function(c){if(c.length!==0)return UI(gn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Jr(p.field),direction:DN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:r}}function PN(t){let e=IN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){fe(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=FI(d);return p instanceof gn&&fI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new Ma(Zr(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Xc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new mc(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new mc(m,p)}(n.endAt)),QO(e,r,o,s,a,"F",l,c)}function RN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zr(n.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zr(n.unaryFilter.field);return je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zr(n.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zr(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return je.create(Zr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(i=>FI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function DN(t){return vN[t]}function MN(t){return wN[t]}function ON(t){return EN[t]}function Jr(t){return{fieldPath:t.canonicalString()}}function Zr(t){return rt.fromServerFormat(t.fieldPath)}function UI(t){return t instanceof je?function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(n.field),op:MN(n.op),value:n.value}}}(t):t instanceof gn?function(n){const i=n.getFilters().map(r=>UI(r));return i.length===1?i[0]:{compositeFilter:{op:ON(n.op),filters:i}}}(t):G(54877,{filter:t})}function NN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,i,r,s=J.min(),o=J.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.gt=e}}function LN(t){const e=PN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.Dn=new UN}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Gi.min())}updateCollectionGroup(e,n,i){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class UN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Qe(Te.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jI=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(jI,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Us(0)}static ur(){return new Us(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LruGarbageCollector",zN=1048576;function k0([t,e],[n,i]){const r=ee(t,n);return r===0?ee(e,i):r}class jN{constructor(e){this.Tr=e,this.buffer=new Qe(k0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();k0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(b0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xs(n)?B(b0,"Ignoring IndexedDB error during garbage collection: ",n):await Ys(n)}await this.Rr(3e5)})}}class $N{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Yc.ue);const i=new jN(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(x0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Yr()<=ie.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function HN(t,e){return new $N(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?L.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ra(i.mutation,r,hn.empty(),Se.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=re()){const r=yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Lo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,re()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ri();const o=ia(),a=function(){return ia()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof zr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ra(h.mutation,c,h.mutation.getFieldMask(),Se.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new qN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ia();let r=new Me((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||hn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||re()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=TI();h.forEach(p=>{if(!s.has(p)){const m=kI(n.get(p),i.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return L.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_I(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):L.resolve(yr());let a=Ca,l=s;return o.next(c=>L.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,re())).next(h=>({batchId:a,changes:EI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(i=>{let r=Lo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const c=function(d,p){return new Js(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=Lo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ra(h.mutation,c,hn.empty(),Se.now()),eh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Cn(r.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:LN(r.bundledQuery),readTime:Cn(r.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.overlays=new Me(q.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const i=yr();return L.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),L.resolve()}getOverlaysForCollection(e,n,i){const r=yr(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return L.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Me((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=yr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=yr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return L.resolve(a)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new pN(n,i));let s=this.kr.get(n);s===void 0&&(s=re(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.qr=new Qe(Ye.Qr),this.$r=new Qe(Ye.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Ye(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new q(new Te([])),i=new Ye(n,e),r=new Ye(n,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new Te([])),i=new Ye(n,e),r=new Ye(n,e+1);let s=re();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ye(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Ye.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fN(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Yr=this.Yr.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Tg:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ye(n,0),r=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{const a=this.Zr(o.Hr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qe(ee);return n.forEach(r=>{const s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),L.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;q.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new q(s),0);let a=new Qe(ee);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Hr)),!0)},o),L.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){fe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return L.forEach(n.mutations,r=>{const s=new Ye(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new Ye(n,0),r=this.Yr.firstAfterOrEqual(i);return L.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.ni=e,this.docs=function(){return new Me(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return L.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=ri();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():_t.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ri();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||bO(xO(h),i)<=0||(r.has(h.key)||eh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,i,r){G(9500)}ri(e,n){return L.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ZN(this)}getSize(e){return L.resolve(this.size)}}class ZN extends WN{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.persistence=e,this.ii=new Ur(n=>Ag(n),xg),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Dg,this.targetCount=0,this._i=Us.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return L.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),L.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return L.resolve(i)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.ai={},this.overlays={},this.ui=new Yc(0),this.ci=!1,this.ci=!0,this.li=new YN,this.referenceDelegate=e(this),this.hi=new eV(this),this.indexManager=new FN,this.remoteDocumentCache=function(r){return new JN(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new VN(n),this.Ti=new GN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new XN(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);const r=new tV(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return L.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class tV extends CO{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.Ai=new Dg,this.Ri=null}static Vi(e){return new Mg(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),L.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,i=>{const r=q.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class vc{constructor(e,n){this.persistence=e,this.gi=new Ur(i=>DO(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=HN(this,n)}static Vi(e,n){return new vc(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?L.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(i++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wu(e.data.value)),n}Sr(e,n,i){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return L.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=re(),r=re();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Og(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return QR()?8:PO(wt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nV;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Yr()<=ie.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Yr()<=ie.DEBUG&&B("QueryEngine","Query:",Xr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Yr()<=ie.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):L.resolve())}ps(e,n){if(m0(n))return L.resolve(null);let i=kn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=$f(n,null,"F"),i=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=re(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,$f(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,i,r){return m0(n)||r.isEqual(J.min())?L.resolve(null):this.gs.getDocuments(e,i).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,i,r)?L.resolve(null):(Yr()<=ie.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xr(n)),this.vs(e,o,n,AO(r,Ca)).next(a=>a))})}bs(e,n){let i=new Qe(vI(e));return n.forEach((r,s)=>{eh(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return Yr()<=ie.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.gs.getDocumentsMatchingQuery(e,n,Gi.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LocalStore",rV=3e8;class sV{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Me(ee),this.Ms=new Ur(s=>Ag(s),xg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KN(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function oV(t,e,n,i){return new sV(t,e,n,i)}async function $I(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=re();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function aV(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=L.resolve();return p.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(E=>{const x=c.docVersions.get(_);fe(x!==null,48541),E.version.compareTo(x)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function HI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function lV(t,e){const n=Z(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(E,x,v){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=rV?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,h)&&a.push(n.hi.updateTargetData(s,m))});let l=ri(),c=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(uV(s,o,e.documentUpdates).next(h=>{l=h.Ls,c=h.ks})),!i.isEqual(J.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=r,s))}function uV(t,e,n){let i=re(),r=re();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ri();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B(Ng,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:r}})}function cV(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Tg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hV(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,L.resolve(r)):n.hi.allocateTargetId(i).next(o=>(r=new xi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Gf(t,e,n){const i=Z(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Xs(o))throw o;B(Ng,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function C0(t,e,n){const i=Z(t);let r=J.min(),s=re();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Z(l),p=d.Ms.get(h);return p!==void 0?L.resolve(d.Fs.get(p)):d.hi.getTargetData(c,h)}(i,o,kn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:re())).next(a=>(dV(i,XO(e),a),{documents:a,qs:s})))}function dV(t,e,n){let i=t.xs.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class P0{constructor(){this.activeTargetIds=iN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fV{constructor(){this.Fo=new P0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new P0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="ConnectivityMonitor";class D0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(R0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){B(R0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function Qf(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="RestConnection",gV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===pc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const o=Qf(),a=this.Go(e,n.toUriEncodedString());B(Sd,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,r,s);const{host:c}=new URL(a),h=qs(c);return this.jo(e,a,l,i,h).then(d=>(B(Sd,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ki(Sd,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Jo(e,n,i,r,s,o){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=gV[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class yV extends mV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const o=Qf();return new Promise((a,l)=>{const c=new WS;c.setWithCredentials(!0),c.listenOnce(qS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case vu.NO_ERROR:const d=c.getResponseJson();B(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case vu.TIMEOUT:B(ft,`RPC '${e}' ${o} timed out`),l(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const p=c.getStatus();if(B(ft,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const E=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(_.status);l(new $(E,_.message))}else l(new $(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(V.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{B(ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);B(ft,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,i,15)})}P_(e,n,i){const r=Qf(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QS(),a=GS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");B(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.T_(d);let p=!1,m=!1;const _=new _V({Ho:x=>{m?B(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(p||(B(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),B(ft,`RPC '${e}' stream ${r} sending:`,x),d.send(x))},Yo:()=>d.close()}),E=(x,v,y)=>{x.listen(v,A=>{try{y(A)}catch(R){setTimeout(()=>{throw R},0)}})};return E(d,Vo.EventType.OPEN,()=>{m||(B(ft,`RPC '${e}' stream ${r} transport opened.`),_.s_())}),E(d,Vo.EventType.CLOSE,()=>{m||(m=!0,B(ft,`RPC '${e}' stream ${r} transport closed`),_.__(),this.I_(d))}),E(d,Vo.EventType.ERROR,x=>{m||(m=!0,Ki(ft,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),_.__(new $(V.UNAVAILABLE,"The operation could not be completed")))}),E(d,Vo.EventType.MESSAGE,x=>{var v;if(!m){const y=x.data[0];fe(!!y,16349);const A=y,R=(A==null?void 0:A.error)||((v=A[0])===null||v===void 0?void 0:v.error);if(R){B(ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let O=function(S){const b=Ue[S];if(b!==void 0)return RI(b)}(M),I=R.message;O===void 0&&(O=V.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),m=!0,_.__(new $(O,I)),d.close()}else B(ft,`RPC '${e}' stream ${r} received:`,y),_.a_(y)}}),E(a,KS.STAT_EVENT,x=>{x.stat===Vf.PROXY?B(ft,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===Vf.NOPROXY&&B(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){return new TN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class qI{constructor(e,n,i,r,s,o,a,l){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new $(V.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return B(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(B(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vV extends qI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=AN(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Cn(o.readTime):J.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Kf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=jf(l)?{documents:kN(s,l)}:{query:CN(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OI(s,o.resumeToken);const c=Hf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=yc(s,o.snapshotVersion.toTimestamp());const c=Hf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=RN(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Kf(this.serializer),n.removeTarget=e,this.k_(n)}}class wV extends qI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=bN(e.writeResults,e.commitTime),i=Cn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Kf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>xN(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{}class TV extends EV{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Wf(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(V.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Wf(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class SV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ii(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="RemoteStore";class IV{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{jr(this)&&(B(Nr,"Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.Ia.add(4),await Xa(c),c.Aa.set("Unknown"),c.Ia.delete(4),await sh(c)}(this))})}),this.Aa=new SV(i,r)}}async function sh(t){if(jr(t))for(const e of t.da)await e(!0)}async function Xa(t){for(const e of t.da)await e(!1)}function KI(t,e){const n=Z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ug(n)?Fg(n):Zs(n).x_()&&Lg(n,e))}function Vg(t,e){const n=Z(t),i=Zs(n);n.Ta.delete(e),i.x_()&&GI(n,e),n.Ta.size===0&&(i.x_()?i.B_():jr(n)&&n.Aa.set("Unknown"))}function Lg(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(t).H_(e)}function GI(t,e){t.Ra.$e(e),Zs(t).Y_(e)}function Fg(t){t.Ra=new yN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Zs(t).start(),t.Aa.aa()}function Ug(t){return jr(t)&&!Zs(t).M_()&&t.Ta.size>0}function jr(t){return Z(t).Ia.size===0}function QI(t){t.Ra=void 0}async function AV(t){t.Aa.set("Online")}async function xV(t){t.Ta.forEach((e,n)=>{Lg(t,e)})}async function bV(t,e){QI(t),Ug(t)?(t.Aa.la(e),Fg(t)):t.Aa.set("Unknown")}async function kV(t,e,n){if(t.Aa.set("Online"),e instanceof MI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))}(t,e)}catch(i){B(Nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wc(t,i)}else if(e instanceof Su?t.Ra.Ye(e):e instanceof DI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{const i=await HI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),GI(s,l);const d=new xi(h.target,l,c,h.sequenceNumber);Lg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){B(Nr,"Failed to raise snapshot:",i),await wc(t,i)}}async function wc(t,e,n){if(!Xs(e))throw e;t.Ia.add(1),await Xa(t),t.Aa.set("Offline"),n||(n=()=>HI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(Nr,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await sh(t)})}function YI(t,e){return e().catch(n=>wc(t,n,e))}async function oh(t){const e=Z(t),n=Ji(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Tg;for(;CV(e);)try{const r=await cV(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,PV(e,r)}catch(r){await wc(e,r)}XI(e)&&JI(e)}function CV(t){return jr(t)&&t.Pa.length<10}function PV(t,e){t.Pa.push(e);const n=Ji(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function XI(t){return jr(t)&&!Ji(t).M_()&&t.Pa.length>0}function JI(t){Ji(t).start()}async function RV(t){Ji(t).na()}async function DV(t){const e=Ji(t);for(const n of t.Pa)e.X_(n.mutations)}async function MV(t,e,n){const i=t.Pa.shift(),r=Cg.from(i,e,n);await YI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await oh(t)}async function OV(t,e){e&&Ji(t).Z_&&await async function(i,r){if(function(o){return mN(o)&&o!==V.ABORTED}(r.code)){const s=i.Pa.shift();Ji(i).N_(),await YI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await oh(i)}}(t,e),XI(t)&&JI(t)}async function O0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),B(Nr,"RemoteStore received new credentials");const i=jr(n);n.Ia.add(3),await Xa(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await sh(n)}async function NV(t,e){const n=Z(t);e?(n.Ia.delete(2),await sh(n)):e||(n.Ia.add(2),await Xa(n),n.Aa.set("Unknown"))}function Zs(t){return t.Va||(t.Va=function(n,i,r){const s=Z(n);return s.ia(),new vV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:AV.bind(null,t),e_:xV.bind(null,t),n_:bV.bind(null,t),J_:kV.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ug(t)?Fg(t):t.Aa.set("Unknown")):(await t.Va.stop(),QI(t))})),t.Va}function Ji(t){return t.ma||(t.ma=function(n,i,r){const s=Z(n);return s.ia(),new wV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:RV.bind(null,t),n_:OV.bind(null,t),ea:DV.bind(null,t),ta:MV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await oh(t)):(await t.ma.stop(),t.Pa.length>0&&(B(Nr,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new zg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(t,e){if(ii("AsyncQueue",`${e}: ${t}`),Xs(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{static emptySet(e){return new As(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||q.comparator(n.key,i.key):(n,i)=>q.comparator(n.key,i.key),this.keyedMap=Lo(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof As)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new As;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.fa=new Me(q.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class zs{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zs(e,n,As.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class LV{constructor(){this.queries=V0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=V0(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(i)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function V0(){return new Ur(t=>yI(t),Zc)}async function FV(t,e){const n=Z(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new VV,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=jg(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Bg(n)}async function UV(t,e){const n=Z(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zV(t,e){const n=Z(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&Bg(n)}function jV(t,e,n){const i=Z(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function Bg(t){t.Da.forEach(e=>{e.next()})}var Yf,L0;(L0=Yf||(Yf={})).Fa="default",L0.Cache="cache";class BV{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new zs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.key=e}}class e1{constructor(e){this.key=e}}class $V{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=re(),this.mutatedKeys=re(),this.Xa=vI(e),this.eu=new As(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new N0,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=eh(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?_!==E&&(i.track({type:3,doc:m}),x=!0):this.iu(p,m)||(i.track({type:2,doc:m}),x=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),x=!0):p&&!m&&(i.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,d)=>function(m,_){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:x})}};return E(m)-E(_)}(h.type,d.type)||this.Xa(h.doc,d.doc)),this.su(i),r=r!=null&&r;const a=n&&!r?this.ou():[],l=this.Za.size===0&&this.current&&!r?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new zs(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new N0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=re(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new e1(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new ZI(i))}),n}uu(e){this.Ha=e.qs,this.Za=re();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return zs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $g="SyncEngine";class HV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class WV{constructor(e){this.key=e,this.lu=!1}}class qV{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ur(a=>yI(a),Zc),this.Tu=new Map,this.Iu=new Set,this.du=new Me(q.comparator),this.Eu=new Map,this.Au=new Dg,this.Ru={},this.Vu=new Map,this.mu=Us.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function KV(t,e,n=!0){const i=o1(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await t1(i,e,n,!0),r}async function GV(t,e){const n=o1(t);await t1(n,e,!0,!1)}async function t1(t,e,n,i){const r=await hV(t.localStore,kn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await QV(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&KI(t.remoteStore,r),a}async function QV(t,e,n,i,r){t.gu=(d,p,m)=>async function(E,x,v,y){let A=x.view.nu(v);A.Ds&&(A=await C0(E.localStore,x.query,!1).then(({documents:I})=>x.view.nu(I,A)));const R=y&&y.targetChanges.get(x.targetId),M=y&&y.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(A,E.isPrimaryClient,R,M);return U0(E,x.targetId,O._u),O.snapshot}(t,d,p,m);const s=await C0(t.localStore,e,!0),o=new $V(e,s.qs),a=o.nu(s.documents),l=Ya.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);U0(t,n,c._u);const h=new HV(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function YV(t,e,n){const i=Z(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!Zc(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Gf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Vg(i.remoteStore,r.targetId),Xf(i,r.targetId)}).catch(Ys)):(Xf(i,r.targetId),await Gf(i.localStore,r.targetId,!0))}async function XV(t,e){const n=Z(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Vg(n.remoteStore,i.targetId))}async function JV(t,e,n){const i=sL(t);try{const r=await function(o,a){const l=Z(o),c=Se.now(),h=a.reduce((m,_)=>m.add(_.key),re());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=ri(),E=re();return l.Os.getEntries(m,h).next(x=>{_=x,_.forEach((v,y)=>{y.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(x=>{d=x;const v=[];for(const y of a){const A=hN(y,d.get(y.key).overlayedDocument);A!=null&&v.push(new zr(y.key,A,cI(A.value.mapValue),Gn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:EI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Me(ee)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ja(i,r.changes),await oh(i.remoteStore)}catch(r){const s=jg(r,"Failed to persist write");n.reject(s)}}async function n1(t,e){const n=Z(t);try{const i=await lV(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Eu.get(s);o&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?fe(o.lu,14607):r.removedDocuments.size>0&&(fe(o.lu,42227),o.lu=!1))}),await Ja(n,i,e)}catch(i){await Ys(i)}}function F0(t,e,n){const i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.wa)p.va(a)&&(c=!0)}),c&&Bg(l)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZV(t,e,n){const i=Z(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let o=new Me(q.comparator);o=o.insert(s,_t.newNoDocument(s,J.min()));const a=re().add(s),l=new ih(J.min(),new Map,new Me(ee),o,a);await n1(i,l),i.du=i.du.remove(s),i.Eu.delete(e),Hg(i)}else await Gf(i.localStore,e,!1).then(()=>Xf(i,e,n)).catch(Ys)}async function eL(t,e){const n=Z(t),i=e.batch.batchId;try{const r=await aV(n.localStore,e);r1(n,i,null),i1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ja(n,r)}catch(r){await Ys(r)}}async function tL(t,e,n){const i=Z(t);try{const r=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(fe(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);r1(i,e,n),i1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ja(i,r)}catch(r){await Ys(r)}}function i1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function r1(t,e,n){const i=Z(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||s1(t,i)})}function s1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Vg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Hg(t))}function U0(t,e,n){for(const i of n)i instanceof ZI?(t.Au.addReference(i.key,e),nL(t,i)):i instanceof e1?(B($g,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||s1(t,i.key)):G(19791,{yu:i})}function nL(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(B($g,"New document in limbo: "+n),t.Iu.add(i),Hg(t))}function Hg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(Te.fromString(e)),i=t.mu.next();t.Eu.set(i,new WV(n)),t.du=t.du.insert(n,i),KI(t.remoteStore,new xi(kn(bg(n.path)),i,"TargetPurposeLimboResolution",Yc.ue))}}async function Ja(t,e,n){const i=Z(t),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,l)=>{o.push(i.gu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Og.Es(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.hu.J_(r),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(c,p=>L.forEach(p.Is,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>L.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Xs(d))throw d;B(Ng,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.Fs.get(p),_=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(_);h.Fs=h.Fs.insert(p,E)}}}(i.localStore,s))}async function iL(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){B($g,"User change. New user:",e.toKey());const i=await $I(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new $(V.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ja(n,i.Bs)}}function rL(t,e){const n=Z(t),i=n.Eu.get(e);if(i&&i.lu)return re().add(i.key);{let r=re();const s=n.Tu.get(e);if(!s)return r;for(const o of s){const a=n.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function o1(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,e),e.hu.J_=zV.bind(null,e.eventManager),e.hu.pu=jV.bind(null,e.eventManager),e}function sL(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tL.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return oV(this.persistence,new iV,e.initialUser,this.serializer)}Du(e){return new BI(Mg.Vi,this.serializer)}bu(e){return new fV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class oL extends Ec{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){fe(this.persistence.referenceDelegate instanceof vc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BN(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new BI(i=>vc.Vi(i,n),this.serializer)}}class Jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iL.bind(null,this.syncEngine),await NV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LV}()}createDatastore(e){const n=rh(e.databaseInfo.databaseId),i=function(s){return new yV(s)}(e.databaseInfo);return function(s,o,a,l){return new TV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new IV(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F0(this.syncEngine,n,0),function(){return D0.C()?new D0:new pV}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new qV(r,s,o,a,l,c);return h&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Z(r);B(Nr,"RemoteStore shutting down."),s.Ia.add(5),await Xa(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jf.provider={build:()=>new Jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class lL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=gt.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{B(Zi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(B(Zi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=jg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ad(t,e){t.asyncQueue.verifyOperationInProgress(),B(Zi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $I(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Ki("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Ki("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function z0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uL(t);B(Zi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>O0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>O0(e.remoteStore,r)),t._onlineComponents=e}async function uL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Zi,"Using user provided OfflineComponentProvider");try{await Ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===V.FAILED_PRECONDITION||r.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await Ad(t,new Ec)}}else B(Zi,"Using default OfflineComponentProvider"),await Ad(t,new oL(void 0));return t._offlineComponents}async function a1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Zi,"Using user provided OnlineComponentProvider"),await z0(t,t._uninitializedComponentsProvider._online)):(B(Zi,"Using default OnlineComponentProvider"),await z0(t,new Jf))),t._onlineComponents}function cL(t){return a1(t).then(e=>e.syncEngine)}async function j0(t){const e=await a1(t),n=e.eventManager;return n.onListen=KV.bind(null,e.syncEngine),n.onUnlisten=YV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firestore.googleapis.com",$0=!0;class H0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u1,this.ssl=$0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:$0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zN)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gO;switch(i.type){case"firstParty":return new vO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=B0.get(n);i&&(B("ComponentProvider","Removing Datastore"),B0.delete(n),i.terminate())}(this),Promise.resolve()}}function hL(t,e,n,i={}){var r;t=ea(t,ah);const s=qs(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(rS(`https://${l}`),sS("Firestore",!0)),o.host!==u1&&o.host!==l&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:i});if(!Rr(c,a)&&(t._setSettings(c),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=gt.MOCK_USER;else{h=zR(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gt(p)}t._authCredentials=new mO(new XS(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class Ge{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ga(n,Ge._jsonSchema))return new Ge(e,i||null,new q(Te.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:$e("string",Ge._jsonSchemaVersion),referencePath:$e("string")};class Bi extends Br{constructor(e,n,i){super(e,n,bg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new q(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function c1(t,e,...n){if(t=Lt(t),ZS("collection","path",e),t instanceof ah){const i=Te.fromString(e,...n);return n0(i),new Bi(t,null,i)}{if(!(t instanceof Ge||t instanceof Bi))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return n0(i),new Bi(t.firestore,null,i)}}function dL(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=Eg.newId()),ZS("doc","path",e),t instanceof ah){const i=Te.fromString(e,...n);return t0(i),new Ge(t,null,new q(i))}{if(!(t instanceof Ge||t instanceof Bi))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return t0(i),new Ge(t.firestore,t instanceof Bi?t.converter:null,new q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="AsyncQueue";class q0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WI(this,"async_queue_retry"),this.oc=()=>{const i=Id();i&&B(W0,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Id();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Tr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Xs(e))throw e;B(W0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,ii("INTERNAL UNHANDLED ERROR: ",K0(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=zg.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&G(47125,{hc:K0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function K0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Tc extends ah{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new q0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q0(e),this._firestoreClient=void 0,await e}}}function fL(t,e){const n=typeof t=="object"?t:uS(),i=typeof t=="string"?t:pc,r=hg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=FR("firestore");s&&hL(r,...s)}return r}function h1(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pL(t),t._firestoreClient}function pL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new NO(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,l1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new lL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(at.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ga(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:$e("string",Qt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pn._jsonSchemaVersion}}static fromJSON(e){if(Ga(e,Pn._jsonSchema))return new Pn(e.latitude,e.longitude)}}Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:$e("string",Pn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ga(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rn(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:$e("string",Rn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^__.*__$/;class mL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}function d1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:t})}}class Kg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Kg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(d1(this.Ec)&&gL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _L{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rh(e)}Dc(e,n,i,r=!1){return new Kg({Ec:e,methodName:n,bc:i,path:rt.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f1(t){const e=t._freezeSettings(),n=rh(t._databaseId);return new _L(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yL(t,e,n,i,r,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);m1("Data must be an object, but it was:",o,i);const a=p1(i,o);let l,c;if(s.merge)l=new hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=wL(e,d,n);if(!o.contains(p))throw new $(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);TL(h,p)||h.push(p)}l=new hn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new mL(new Gt(a),l,c)}class Gg extends qg{_toFieldTransform(e){return new aN(e.path,new Oa)}isEqual(e){return e instanceof Gg}}function vL(t,e,n,i=!1){return Qg(n,t.Dc(i?4:3,e))}function Qg(t,e){if(g1(t=Lt(t)))return m1("Unsupported field value:",e,t),p1(t,e);if(t instanceof qg)return function(i,r){if(!d1(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Qg(a,r.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Se.fromDate(i);return{timestampValue:yc(r.serializer,s)}}if(i instanceof Se){const s=new Se(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yc(r.serializer,s)}}if(i instanceof Pn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qt)return{bytesValue:OI(r.serializer,i._byteString)};if(i instanceof Ge){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Rn)return function(o,a){return{mapValue:{fields:{[lI]:{stringValue:uI},[gc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return kg(a.serializer,c)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${Qc(i)}`)}(t,e)}function p1(t,e){const n={};return nI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(i,r)=>{const s=Qg(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function g1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Pn||t instanceof Qt||t instanceof Ge||t instanceof qg||t instanceof Rn)}function m1(t,e,n){if(!g1(n)||!eI(n)){const i=Qc(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function wL(t,e,n){if((e=Lt(e))instanceof Wg)return e._internalPath;if(typeof e=="string")return _1(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const EL=new RegExp("[~\\*/\\[\\]]");function _1(t,e,n){if(e.search(EL)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wg(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new $(V.INVALID_ARGUMENT,a+t+l)}function TL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SL extends y1{data(){return super.data()}}function Yg(t,e){return typeof e=="string"?_1(t,e):e instanceof Wg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class v1 extends Xg{}function AL(t,e,...n){let i=[];e instanceof Xg&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof Zg).length,a=s.filter(l=>l instanceof Jg).length;if(o>1||o>0&&a>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Jg extends v1{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Jg(e,n,i)}_apply(e){const n=this._parse(e);return w1(e._query,n),new Br(e.firestore,e.converter,Bf(e._query,n))}_parse(e){const n=f1(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Y0(d,h);const _=[];for(const E of d)_.push(Q0(l,s,E));p={arrayValue:{values:_}}}else p=Q0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Y0(d,h),p=vL(a,o,d,h==="in"||h==="not-in");return je.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zg extends Xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)w1(o,l),o=Bf(o,l)}(e._query,n),new Br(e.firestore,e.converter,Bf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class em extends v1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new em(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ma(s,o)}(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Js(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function xL(t,e="asc"){const n=e,i=Yg("orderBy",t);return em._create(i,n)}function Q0(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_I(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Te.fromString(n));if(!q.isDocumentKey(i))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return c0(t,new q(i))}if(n instanceof Ge)return c0(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qc(n)}.`)}function Y0(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w1(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bL{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Fr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[gc].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ve(o.doubleValue));return new Rn(s)}convertGeoPoint(e){return new Pn(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Jc(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Te.fromString(e);fe(zI(i),9688,{name:e});const r=new Ra(i.get(1),i.get(3)),s=new q(i.popFirst(5));return r.isEqual(n)||ii(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sr extends y1{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sr._jsonSchema={type:$e("string",Sr._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class Iu extends Sr{data(e={}){return super.data(e)}}class xs{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Uo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Iu(this._firestore,this._userDataWriter,i.key,i,new Uo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Iu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Iu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}xs._jsonSchemaVersion="firestore/querySnapshot/1.0",xs._jsonSchema={type:$e("string",xs._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class E1 extends bL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function PL(t,e){const n=ea(t.firestore,Tc),i=dL(t),r=kL(t.converter,e);return DL(n,[yL(f1(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Gn.exists(!1))]).then(()=>i)}function RL(t,...e){var n,i,r;t=Lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||G0(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(G0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Ge)c=ea(t.firestore,Tc),h=bg(t._key.path),l={next:d=>{e[o]&&e[o](ML(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ea(t,Br);c=ea(d.firestore,Tc),h=d._query;const p=new E1(c);l={next:m=>{e[o]&&e[o](new xs(c,p,d,m))},error:e[o+1],complete:e[o+2]},IL(t._query)}return function(p,m,_,E){const x=new aL(E),v=new BV(m,x,_);return p.asyncQueue.enqueueAndForget(async()=>FV(await j0(p),v)),()=>{x.Ou(),p.asyncQueue.enqueueAndForget(async()=>UV(await j0(p),v))}}(h1(c),h,a,l)}function DL(t,e){return function(i,r){const s=new Tr;return i.asyncQueue.enqueueAndForget(async()=>JV(await cL(i),r,s)),s.promise}(h1(t),e)}function ML(t,e,n){const i=n.docs.get(e._key),r=new E1(t);return new Sr(t,r,e._key,i,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}function OL(){return new Gg("serverTimestamp")}(function(e,n=!0){(function(r){Qs=r})(Ks),Ns(new Dr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Tc(new _O(i.getProvider("auth-internal")),new wO(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ui(Yv,Xv,e),Ui(Yv,Xv,"esm2017")})();const NL={apiKey:"AIzaSyAoUetB-F1yqNHO5JvvQAU7NsFs6vubO80",authDomain:"skincare-app-ver8.firebaseapp.com",projectId:"skincare-app-ver8",storageBucket:"skincare-app-ver8.firebasestorage.app",messagingSenderId:"453585186003",appId:"1:453585186003:web:cb5745705f72a873df3826"},T1=lS(NL),X0=hO(T1),S1=fL(T1),VL=async t=>{const e=c1(S1,"evaluations"),n=Se.fromDate(new Date(t.assessmentDate));return PL(e,{assessor:t.assessor,boneProtection:t.boneProtection,incontinenceCare:t.incontinenceCare,notes:t.notes,assessmentDate:n,createdAt:OL(),createdBy:t.createdBy})},I1=K.createContext({user:null,loading:!0}),LL=({children:t})=>{const[e,n]=K.useState(null),[i,r]=K.useState(!0);return K.useEffect(()=>eM(X0,o=>{o?(n(o),r(!1)):GD(X0).catch(a=>{console.error("Anonymous sign-in failed",a),r(!1)})}),[]),F.jsx(I1.Provider,{value:{user:e,loading:i},children:t})},FL=()=>K.useContext(I1),UL=new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"short"}),zL=t=>{const e=new Map;return t.forEach(n=>{const i=n.assessmentDate||n.createdAt,r=i?new Date(i):new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,o=UL.format(r);e.has(s)||e.set(s,{monthKey:s,label:o,total:0,done:0,notDone:0,na:0});const a=e.get(s);a.total+=1,a.done+=+(n.boneProtection==="done")+ +(n.incontinenceCare==="done"),a.notDone+=+(n.boneProtection==="not_done")+ +(n.incontinenceCare==="not_done"),a.na+=+(n.boneProtection==="na")+ +(n.incontinenceCare==="na")}),Array.from(e.values()).sort((n,i)=>n.monthKey.localeCompare(i.monthKey))},jL=()=>{const[t,e]=K.useState([]),[n,i]=K.useState(!0),[r,s]=K.useState(null);K.useEffect(()=>{const a=c1(S1,"evaluations"),l=AL(a,xL("assessmentDate","desc")),c=RL(l,h=>{const d=h.docs.map(p=>{var x,v,y,A,R,M;const m=p.data(),_=((v=(x=m.assessmentDate)==null?void 0:x.toDate)==null?void 0:v.call(x))??m.assessmentDate??((A=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:A.call(y)),E=((M=(R=m.createdAt)==null?void 0:R.toDate)==null?void 0:M.call(R))??new Date;return{id:p.id,assessor:m.assessor??"",boneProtection:m.boneProtection??"na",incontinenceCare:m.incontinenceCare??"na",notes:m.notes??"",assessmentDate:(_ instanceof Date?_:new Date(_)).toISOString(),createdAt:E instanceof Date?E.toISOString():new Date(E).toISOString(),createdBy:m.createdBy}});e(d),i(!1)},h=>{console.error(h),s("Firestore"),i(!1)});return()=>c()},[]);const o=K.useMemo(()=>zL(t),[t]);return{records:t,monthlySummary:o,loading:n,error:r}},BL=()=>{const[t,e]=K.useState("form"),[n,i]=K.useState(!1),[r,s]=K.useState(null),o=K.useRef(null),{user:a,loading:l}=FL(),{records:c,monthlySummary:h,error:d,loading:p}=jL(),m=K.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),_=K.useCallback((v,y="success")=>{m(),s({message:v,variant:y}),o.current=setTimeout(()=>s(null),3500)},[m]);K.useEffect(()=>m,[m]),K.useEffect(()=>{d&&_(d,"error")},[d,_]);const E=K.useMemo(()=>{const v=new Set(c.map(y=>y.assessor));return Array.from(v).sort()},[c]),x=async v=>{if(a){i(!0);try{await VL({...v,createdBy:a.uid}),_("","success")}catch(y){console.error(y),_("","error")}finally{i(!1)}}};return l?F.jsx("div",{className:"page",children:F.jsx("p",{className:"subtle",children:"..."})}):F.jsxs("div",{className:"page",children:[F.jsxs("header",{className:"app-header",children:[F.jsxs("div",{children:[F.jsx("h1",{children:"Skin Care Tracker ver.8"}),F.jsx("p",{className:"subtle",children:"BMI18.5/"})]}),F.jsxs("nav",{className:"tab-nav",children:[F.jsx("button",{type:"button",className:t==="form"?"active":"",onClick:()=>e("form"),children:""}),F.jsx("button",{type:"button",className:t==="dashboard"?"active":"",onClick:()=>e("dashboard"),children:""})]})]}),t==="form"?F.jsx(Mb,{assessorOptions:E,onSave:x,loading:n}):F.jsx(kR,{loading:p,monthlySummary:h,records:c}),r&&F.jsx("div",{className:"toast-container",children:F.jsx(CR,{message:r.message,variant:r.variant})})]})},$L=()=>F.jsx(LL,{children:F.jsx(BL,{})}),A1=document.getElementById("root");if(!A1)throw new Error("Root container not found");xd.createRoot(A1).render(F.jsx(EA.StrictMode,{children:F.jsx($L,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(t=>console.error("SW registration failed",t))});
//# sourceMappingURL=index-C4MVZ3D4.js.map
