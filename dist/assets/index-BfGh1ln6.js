var px=Object.defineProperty;var gx=(t,e,n)=>e in t?px(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>gx(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function mx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dw={exports:{}},Ac={},fw={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),_x=Symbol.for("react.portal"),yx=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),Ex=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),Sx=Symbol.for("react.forward_ref"),Ix=Symbol.for("react.suspense"),xx=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),l_=Symbol.iterator;function bx(t){return t===null||typeof t!="object"?null:(t=l_&&t[l_]||t["@@iterator"],typeof t=="function"?t:null)}var pw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gw=Object.assign,mw={};function zs(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||pw}zs.prototype.isReactComponent={};zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _w(){}_w.prototype=zs.prototype;function sp(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||pw}var op=sp.prototype=new _w;op.constructor=sp;gw(op,zs.prototype);op.isPureReactComponent=!0;var u_=Array.isArray,yw=Object.prototype.hasOwnProperty,ap={current:null},vw={key:!0,ref:!0,__self:!0,__source:!0};function ww(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yw.call(e,i)&&!vw.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:La,type:t,key:s,ref:o,props:r,_owner:ap.current}}function kx(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function Cx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c_=/\/+/g;function Mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cx(""+t.key):e.toString(36)}function Zl(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case _x:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Mh(o,0):i,u_(r)?(n="",t!=null&&(n=t.replace(c_,"$&/")+"/"),Zl(r,e,n,"",function(c){return c})):r!=null&&(lp(r)&&(r=kx(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(c_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",u_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Mh(s,a);o+=Zl(s,e,n,l,r)}else if(l=bx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Mh(s,a++),o+=Zl(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _l(t,e,n){if(t==null)return t;var i=[],r=0;return Zl(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Px(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},eu={transition:null},Rx={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:eu,ReactCurrentOwner:ap};function Ew(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!lp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=zs;te.Fragment=yx;te.Profiler=wx;te.PureComponent=sp;te.StrictMode=vx;te.Suspense=Ix;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rx;te.act=Ew;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=gw({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ap.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yw.call(e,l)&&!vw.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:La,type:t.type,key:r,ref:s,props:i,_owner:o}};te.createContext=function(t){return t={$$typeof:Tx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ex,_context:t},t.Consumer=t};te.createElement=ww;te.createFactory=function(t){var e=ww.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Sx,render:t}};te.isValidElement=lp;te.lazy=function(t){return{$$typeof:Ax,_payload:{_status:-1,_result:t},_init:Px}};te.memo=function(t,e){return{$$typeof:xx,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};te.unstable_act=Ew;te.useCallback=function(t,e){return At.current.useCallback(t,e)};te.useContext=function(t){return At.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return At.current.useDeferredValue(t)};te.useEffect=function(t,e){return At.current.useEffect(t,e)};te.useId=function(){return At.current.useId()};te.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return At.current.useMemo(t,e)};te.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};te.useRef=function(t){return At.current.useRef(t)};te.useState=function(t){return At.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return At.current.useTransition()};te.version="18.3.1";fw.exports=te;var q=fw.exports;const Dx=mx(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=q,Ox=Symbol.for("react.element"),Nx=Symbol.for("react.fragment"),Vx=Object.prototype.hasOwnProperty,Lx=Mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fx={key:!0,ref:!0,__self:!0,__source:!0};function Tw(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Vx.call(e,i)&&!Fx.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Ox,type:t,key:s,ref:o,props:r,_owner:Lx.current}}Ac.Fragment=Nx;Ac.jsx=Tw;Ac.jsxs=Tw;dw.exports=Ac;var V=dw.exports,Rd={},Sw={exports:{}},$t={},Iw={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var Q=U.length;U.push(W);e:for(;0<Q;){var me=Q-1>>>1,se=U[me];if(0<r(se,W))U[me]=W,U[Q]=se,Q=me;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var W=U[0],Q=U.pop();if(Q!==W){U[0]=Q;e:for(var me=0,se=U.length,_e=se>>>1;me<_e;){var Ze=2*(me+1)-1,Et=U[Ze],et=Ze+1,Mn=U[et];if(0>r(Et,Q))et<se&&0>r(Mn,Et)?(U[me]=Mn,U[et]=Q,me=et):(U[me]=Et,U[Ze]=Q,me=Ze);else if(et<se&&0>r(Mn,Q))U[me]=Mn,U[et]=Q,me=et;else break e}}return W}function r(U,W){var Q=U.sortIndex-W.sortIndex;return Q!==0?Q:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,v=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var W=n(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=U)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function R(U){if(S=!1,x(U),!v)if(n(l)!==null)v=!0,de(M);else{var W=n(c);W!==null&&he(R,W.startTime-U)}}function M(U,W){v=!1,S&&(S=!1,w(y),y=-1),m=!0;var Q=p;try{for(x(W),d=n(l);d!==null&&(!(d.expirationTime>W)||U&&!C());){var me=d.callback;if(typeof me=="function"){d.callback=null,p=d.priorityLevel;var se=me(d.expirationTime<=W);W=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&i(l),x(W)}else i(l);d=n(l)}if(d!==null)var _e=!0;else{var Ze=n(c);Ze!==null&&he(R,Ze.startTime-W),_e=!1}return _e}finally{d=null,p=Q,m=!1}}var O=!1,I=null,y=-1,E=5,A=-1;function C(){return!(t.unstable_now()-A<E)}function P(){if(I!==null){var U=t.unstable_now();A=U;var W=!0;try{W=I(!0,U)}finally{W?k():(O=!1,I=null)}}else O=!1}var k;if(typeof _=="function")k=function(){_(P)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ne=Ee.port2;Ee.port1.onmessage=P,k=function(){ne.postMessage(null)}}else k=function(){b(P,0)};function de(U){I=U,O||(O=!0,k())}function he(U,W){y=b(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,de(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Q=p;p=W;try{return U()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=p;p=U;try{return W()}finally{p=Q}},t.unstable_scheduleCallback=function(U,W,Q){var me=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?me+Q:me):Q=me,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,U={id:h++,callback:W,priorityLevel:U,startTime:Q,expirationTime:se,sortIndex:-1},Q>me?(U.sortIndex=Q,e(c,U),n(l)===null&&U===n(c)&&(S?(w(y),y=-1):S=!0,he(R,Q-me))):(U.sortIndex=se,e(l,U),v||m||(v=!0,de(M))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var W=p;return function(){var Q=p;p=W;try{return U.apply(this,arguments)}finally{p=Q}}}})(xw);Iw.exports=xw;var jx=Iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux=q,Bt=jx;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,sa={};function Lr(t,e){bs(t,e),bs(t+"Capture",e)}function bs(t,e){for(sa[t]=e,t=0;t<e.length;t++)Aw.add(e[t])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=Object.prototype.hasOwnProperty,zx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h_={},d_={};function Bx(t){return Dd.call(d_,t)?!0:Dd.call(h_,t)?!1:zx.test(t)?d_[t]=!0:(h_[t]=!0,!1)}function $x(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hx(t,e,n,i){if(e===null||typeof e>"u"||$x(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var up=/[\-:]([a-z])/g;function cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(up,cp);ot[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(up,cp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(up,cp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hp(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hx(e,n,r,i)&&(n=null),i||r===null?Bx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var si=Ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),dp=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),bw=Symbol.for("react.provider"),kw=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),Od=Symbol.for("react.suspense"),Nd=Symbol.for("react.suspense_list"),pp=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),Cw=Symbol.for("react.offscreen"),f_=Symbol.iterator;function po(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Oh;function bo(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Nh=!1;function Vh(t,e){if(!t||Nh)return"";Nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Nh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bo(t):""}function Wx(t){switch(t.tag){case 5:return bo(t.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Vd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case Md:return"Profiler";case dp:return"StrictMode";case Od:return"Suspense";case Nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kw:return(t.displayName||"Context")+".Consumer";case bw:return(t._context.displayName||"Context")+".Provider";case fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pp:return e=t.displayName||null,e!==null?e:Vd(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Vd(t(e))}catch{}}return null}function qx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vd(e);case 8:return e===dp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kx(t){var e=Pw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=Kx(t))}function Rw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Pw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ld(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dw(t,e){e=e.checked,e!=null&&hp(t,"checked",e,!1)}function Fd(t,e){Dw(t,e);var n=$i(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jd(t,e.type,n):e.hasOwnProperty("defaultValue")&&jd(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jd(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ko=Array.isArray;function fs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function m_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(ko(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function Mw(t,e){var n=$i(e.value),i=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function __(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ow(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ow(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wl,Nw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gx=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(t){Gx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uo[e]=Uo[t]})});function Vw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uo.hasOwnProperty(t)&&Uo[t]?(""+e).trim():e+"px"}function Lw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Vw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Qx=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bd(t,e){if(e){if(Qx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function $d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hd=null;function gp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wd=null,ps=null,gs=null;function y_(t){if(t=Ua(t)){if(typeof Wd!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Rc(e),Wd(t.stateNode,t.type,e))}}function Fw(t){ps?gs?gs.push(t):gs=[t]:ps=t}function jw(){if(ps){var t=ps,e=gs;if(gs=ps=null,y_(t),e)for(t=0;t<e.length;t++)y_(e[t])}}function Uw(t,e){return t(e)}function zw(){}var Lh=!1;function Bw(t,e,n){if(Lh)return t(e,n);Lh=!0;try{return Uw(t,e,n)}finally{Lh=!1,(ps!==null||gs!==null)&&(zw(),jw())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var i=Rc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var qd=!1;if(Qn)try{var go={};Object.defineProperty(go,"passive",{get:function(){qd=!0}}),window.addEventListener("test",go,go),window.removeEventListener("test",go,go)}catch{qd=!1}function Yx(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var zo=!1,bu=null,ku=!1,Kd=null,Xx={onError:function(t){zo=!0,bu=t}};function Jx(t,e,n,i,r,s,o,a,l){zo=!1,bu=null,Yx.apply(Xx,arguments)}function Zx(t,e,n,i,r,s,o,a,l){if(Jx.apply(this,arguments),zo){if(zo){var c=bu;zo=!1,bu=null}else throw Error(j(198));ku||(ku=!0,Kd=c)}}function Fr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $w(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v_(t){if(Fr(t)!==t)throw Error(j(188))}function eA(t){var e=t.alternate;if(!e){if(e=Fr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return v_(r),t;if(s===i)return v_(r),e;s=s.sibling}throw Error(j(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Hw(t){return t=eA(t),t!==null?Ww(t):null}function Ww(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ww(t);if(e!==null)return e;t=t.sibling}return null}var qw=Bt.unstable_scheduleCallback,w_=Bt.unstable_cancelCallback,tA=Bt.unstable_shouldYield,nA=Bt.unstable_requestPaint,Le=Bt.unstable_now,iA=Bt.unstable_getCurrentPriorityLevel,mp=Bt.unstable_ImmediatePriority,Kw=Bt.unstable_UserBlockingPriority,Cu=Bt.unstable_NormalPriority,rA=Bt.unstable_LowPriority,Gw=Bt.unstable_IdlePriority,bc=null,In=null;function sA(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(bc,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:lA,oA=Math.log,aA=Math.LN2;function lA(t){return t>>>=0,t===0?32:31-(oA(t)/aA|0)|0}var El=64,Tl=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Co(a):(s&=o,s!==0&&(i=Co(s)))}else o=n&~r,o!==0?i=Co(o):s!==0&&(i=Co(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-dn(e),r=1<<n,i|=t[n],e&=~r;return i}function uA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=uA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qw(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function Fh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function hA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function _p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-dn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ge=0;function Yw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xw,yp,Jw,Zw,eE,Qd=!1,Sl=[],bi=null,ki=null,Ci=null,la=new Map,ua=new Map,gi=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E_(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function mo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ua(e),e!==null&&yp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fA(t,e,n,i,r){switch(e){case"focusin":return bi=mo(bi,t,e,n,i,r),!0;case"dragenter":return ki=mo(ki,t,e,n,i,r),!0;case"mouseover":return Ci=mo(Ci,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return la.set(s,mo(la.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ua.set(s,mo(ua.get(s)||null,t,e,n,i,r)),!0}return!1}function tE(t){var e=gr(t.target);if(e!==null){var n=Fr(e);if(n!==null){if(e=n.tag,e===13){if(e=$w(n),e!==null){t.blockedOn=e,eE(t.priority,function(){Jw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hd=i,n.target.dispatchEvent(i),Hd=null}else return e=Ua(n),e!==null&&yp(e),t.blockedOn=n,!1;e.shift()}return!0}function T_(t,e,n){tu(t)&&n.delete(e)}function pA(){Qd=!1,bi!==null&&tu(bi)&&(bi=null),ki!==null&&tu(ki)&&(ki=null),Ci!==null&&tu(Ci)&&(Ci=null),la.forEach(T_),ua.forEach(T_)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Qd||(Qd=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,pA)))}function ca(t){function e(r){return _o(r,t)}if(0<Sl.length){_o(Sl[0],t);for(var n=1;n<Sl.length;n++){var i=Sl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(bi!==null&&_o(bi,t),ki!==null&&_o(ki,t),Ci!==null&&_o(Ci,t),la.forEach(e),ua.forEach(e),n=0;n<gi.length;n++)i=gi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)tE(n),n.blockedOn===null&&gi.shift()}var ms=si.ReactCurrentBatchConfig,Ru=!0;function gA(t,e,n,i){var r=ge,s=ms.transition;ms.transition=null;try{ge=1,vp(t,e,n,i)}finally{ge=r,ms.transition=s}}function mA(t,e,n,i){var r=ge,s=ms.transition;ms.transition=null;try{ge=4,vp(t,e,n,i)}finally{ge=r,ms.transition=s}}function vp(t,e,n,i){if(Ru){var r=Yd(t,e,n,i);if(r===null)Gh(t,e,i,Du,n),E_(t,i);else if(fA(r,t,e,n,i))i.stopPropagation();else if(E_(t,i),e&4&&-1<dA.indexOf(t)){for(;r!==null;){var s=Ua(r);if(s!==null&&Xw(s),s=Yd(t,e,n,i),s===null&&Gh(t,e,i,Du,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Gh(t,e,i,null,n)}}var Du=null;function Yd(t,e,n,i){if(Du=null,t=gp(i),t=gr(t),t!==null)if(e=Fr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$w(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function nE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iA()){case mp:return 1;case Kw:return 4;case Cu:case rA:return 16;case Gw:return 536870912;default:return 16}default:return 16}}var Ei=null,wp=null,nu=null;function iE(){if(nu)return nu;var t,e=wp,n=e.length,i,r="value"in Ei?Ei.value:Ei.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return nu=r.slice(t,1<i?1-i:void 0)}function iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function S_(){return!1}function Ht(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Il:S_,this.isPropagationStopped=S_,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ep=Ht(Bs),ja=De({},Bs,{view:0,detail:0}),_A=Ht(ja),jh,Uh,yo,kc=De({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(jh=t.screenX-yo.screenX,Uh=t.screenY-yo.screenY):Uh=jh=0,yo=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:Uh}}),I_=Ht(kc),yA=De({},kc,{dataTransfer:0}),vA=Ht(yA),wA=De({},ja,{relatedTarget:0}),zh=Ht(wA),EA=De({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=Ht(EA),SA=De({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IA=Ht(SA),xA=De({},Bs,{data:0}),x_=Ht(xA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kA[t])?!!e[t]:!1}function Tp(){return CA}var PA=De({},ja,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tp,charCode:function(t){return t.type==="keypress"?iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RA=Ht(PA),DA=De({},kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A_=Ht(DA),MA=De({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tp}),OA=Ht(MA),NA=De({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),VA=Ht(NA),LA=De({},kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=Ht(LA),jA=[9,13,27,32],Sp=Qn&&"CompositionEvent"in window,Bo=null;Qn&&"documentMode"in document&&(Bo=document.documentMode);var UA=Qn&&"TextEvent"in window&&!Bo,rE=Qn&&(!Sp||Bo&&8<Bo&&11>=Bo),b_=" ",k_=!1;function sE(t,e){switch(t){case"keyup":return jA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function zA(t,e){switch(t){case"compositionend":return oE(e);case"keypress":return e.which!==32?null:(k_=!0,b_);case"textInput":return t=e.data,t===b_&&k_?null:t;default:return null}}function BA(t,e){if(ns)return t==="compositionend"||!Sp&&sE(t,e)?(t=iE(),nu=wp=Ei=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rE&&e.locale!=="ko"?null:e.data;default:return null}}var $A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$A[t.type]:e==="textarea"}function aE(t,e,n,i){Fw(i),e=Mu(e,"onChange"),0<e.length&&(n=new Ep("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var $o=null,ha=null;function HA(t){yE(t,0)}function Cc(t){var e=ss(t);if(Rw(e))return t}function WA(t,e){if(t==="change")return e}var lE=!1;if(Qn){var Bh;if(Qn){var $h="oninput"in document;if(!$h){var P_=document.createElement("div");P_.setAttribute("oninput","return;"),$h=typeof P_.oninput=="function"}Bh=$h}else Bh=!1;lE=Bh&&(!document.documentMode||9<document.documentMode)}function R_(){$o&&($o.detachEvent("onpropertychange",uE),ha=$o=null)}function uE(t){if(t.propertyName==="value"&&Cc(ha)){var e=[];aE(e,ha,t,gp(t)),Bw(HA,e)}}function qA(t,e,n){t==="focusin"?(R_(),$o=e,ha=n,$o.attachEvent("onpropertychange",uE)):t==="focusout"&&R_()}function KA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cc(ha)}function GA(t,e){if(t==="click")return Cc(e)}function QA(t,e){if(t==="input"||t==="change")return Cc(e)}function YA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:YA;function da(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Dd.call(e,r)||!pn(t[r],e[r]))return!1}return!0}function D_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M_(t,e){var n=D_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D_(n)}}function cE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hE(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function Ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XA(t){var e=hE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cE(n.ownerDocument.documentElement,n)){if(i!==null&&Ip(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=M_(n,s);var o=M_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JA=Qn&&"documentMode"in document&&11>=document.documentMode,is=null,Xd=null,Ho=null,Jd=!1;function O_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jd||is==null||is!==Au(i)||(i=is,"selectionStart"in i&&Ip(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&da(Ho,i)||(Ho=i,i=Mu(Xd,"onSelect"),0<i.length&&(e=new Ep("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=is)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rs={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Hh={},dE={};Qn&&(dE=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function Pc(t){if(Hh[t])return Hh[t];if(!rs[t])return t;var e=rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dE)return Hh[t]=e[n];return t}var fE=Pc("animationend"),pE=Pc("animationiteration"),gE=Pc("animationstart"),mE=Pc("transitionend"),_E=new Map,N_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){_E.set(t,e),Lr(e,[t])}for(var Wh=0;Wh<N_.length;Wh++){var qh=N_[Wh],ZA=qh.toLowerCase(),eb=qh[0].toUpperCase()+qh.slice(1);er(ZA,"on"+eb)}er(fE,"onAnimationEnd");er(pE,"onAnimationIteration");er(gE,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(mE,"onTransitionEnd");bs("onMouseEnter",["mouseout","mouseover"]);bs("onMouseLeave",["mouseout","mouseover"]);bs("onPointerEnter",["pointerout","pointerover"]);bs("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function V_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Zx(i,e,void 0,t),t.currentTarget=null}function yE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;V_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;V_(r,a,c),s=l}}}if(ku)throw t=Kd,ku=!1,Kd=null,t}function Ae(t,e){var n=e[rf];n===void 0&&(n=e[rf]=new Set);var i=t+"__bubble";n.has(i)||(vE(e,t,2,!1),n.add(i))}function Kh(t,e,n){var i=0;e&&(i|=4),vE(n,t,i,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function fa(t){if(!t[Al]){t[Al]=!0,Aw.forEach(function(n){n!=="selectionchange"&&(tb.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,Kh("selectionchange",!1,e))}}function vE(t,e,n,i){switch(nE(e)){case 1:var r=gA;break;case 4:r=mA;break;default:r=vp}n=r.bind(null,e,n,t),r=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Gh(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=gr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Bw(function(){var c=s,h=gp(n),d=[];e:{var p=_E.get(t);if(p!==void 0){var m=Ep,v=t;switch(t){case"keypress":if(iu(n)===0)break e;case"keydown":case"keyup":m=RA;break;case"focusin":v="focus",m=zh;break;case"focusout":v="blur",m=zh;break;case"beforeblur":case"afterblur":m=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=I_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OA;break;case fE:case pE:case gE:m=TA;break;case mE:m=VA;break;case"scroll":m=_A;break;case"wheel":m=FA;break;case"copy":case"cut":case"paste":m=IA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=A_}var S=(e&4)!==0,b=!S&&t==="scroll",w=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,x;_!==null;){x=_;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,w!==null&&(R=aa(_,w),R!=null&&S.push(pa(_,R,x)))),b)break;_=_.return}0<S.length&&(p=new m(p,v,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Hd&&(v=n.relatedTarget||n.fromElement)&&(gr(v)||v[Yn]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?gr(v):null,v!==null&&(b=Fr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(S=I_,R="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=A_,R="onPointerLeave",w="onPointerEnter",_="pointer"),b=m==null?p:ss(m),x=v==null?p:ss(v),p=new S(R,_+"leave",m,n,h),p.target=b,p.relatedTarget=x,R=null,gr(h)===c&&(S=new S(w,_+"enter",v,n,h),S.target=x,S.relatedTarget=b,R=S),b=R,m&&v)t:{for(S=m,w=v,_=0,x=S;x;x=Kr(x))_++;for(x=0,R=w;R;R=Kr(R))x++;for(;0<_-x;)S=Kr(S),_--;for(;0<x-_;)w=Kr(w),x--;for(;_--;){if(S===w||w!==null&&S===w.alternate)break t;S=Kr(S),w=Kr(w)}S=null}else S=null;m!==null&&L_(d,p,m,S,!1),v!==null&&b!==null&&L_(d,b,v,S,!0)}}e:{if(p=c?ss(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=WA;else if(C_(p))if(lE)M=QA;else{M=KA;var O=qA}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=GA);if(M&&(M=M(t,c))){aE(d,M,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&jd(p,"number",p.value)}switch(O=c?ss(c):window,t){case"focusin":(C_(O)||O.contentEditable==="true")&&(is=O,Xd=c,Ho=null);break;case"focusout":Ho=Xd=is=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,O_(d,n,h);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":O_(d,n,h)}var I;if(Sp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ns?sE(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(rE&&n.locale!=="ko"&&(ns||y!=="onCompositionStart"?y==="onCompositionEnd"&&ns&&(I=iE()):(Ei=h,wp="value"in Ei?Ei.value:Ei.textContent,ns=!0)),O=Mu(c,y),0<O.length&&(y=new x_(y,t,null,n,h),d.push({event:y,listeners:O}),I?y.data=I:(I=oE(n),I!==null&&(y.data=I)))),(I=UA?zA(t,n):BA(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(h=new x_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}yE(d,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=aa(t,n),s!=null&&i.unshift(pa(t,s,r)),s=aa(t,e),s!=null&&i.push(pa(t,s,r))),t=t.return}return i}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=aa(n,s),l!=null&&o.unshift(pa(n,l,a))):r||(l=aa(n,s),l!=null&&o.push(pa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nb=/\r\n?/g,ib=/\u0000|\uFFFD/g;function F_(t){return(typeof t=="string"?t:""+t).replace(nb,`
`).replace(ib,"")}function bl(t,e,n){if(e=F_(e),F_(t)!==e&&n)throw Error(j(425))}function Ou(){}var Zd=null,ef=null;function tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,rb=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,sb=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(t){return j_.resolve(null).then(t).catch(ob)}:nf;function ob(t){setTimeout(function(){throw t})}function Qh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ca(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ca(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Sn="__reactFiber$"+$s,ga="__reactProps$"+$s,Yn="__reactContainer$"+$s,rf="__reactEvents$"+$s,ab="__reactListeners$"+$s,lb="__reactHandles$"+$s;function gr(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U_(t);t!==null;){if(n=t[Sn])return n;t=U_(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[Sn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Rc(t){return t[ga]||null}var sf=[],os=-1;function tr(t){return{current:t}}function ke(t){0>os||(t.current=sf[os],sf[os]=null,os--)}function Ie(t,e){os++,sf[os]=t.current,t.current=e}var Hi={},vt=tr(Hi),Ot=tr(!1),xr=Hi;function ks(t,e){var n=t.type.contextTypes;if(!n)return Hi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Nt(t){return t=t.childContextTypes,t!=null}function Nu(){ke(Ot),ke(vt)}function z_(t,e,n){if(vt.current!==Hi)throw Error(j(168));Ie(vt,e),Ie(Ot,n)}function wE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(j(108,qx(t)||"Unknown",r));return De({},n,i)}function Vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,xr=vt.current,Ie(vt,t),Ie(Ot,Ot.current),!0}function B_(t,e,n){var i=t.stateNode;if(!i)throw Error(j(169));n?(t=wE(t,e,xr),i.__reactInternalMemoizedMergedChildContext=t,ke(Ot),ke(vt),Ie(vt,t)):ke(Ot),Ie(Ot,n)}var Un=null,Dc=!1,Yh=!1;function EE(t){Un===null?Un=[t]:Un.push(t)}function ub(t){Dc=!0,EE(t)}function nr(){if(!Yh&&Un!==null){Yh=!0;var t=0,e=ge;try{var n=Un;for(ge=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Un=null,Dc=!1}catch(r){throw Un!==null&&(Un=Un.slice(t+1)),qw(mp,nr),r}finally{ge=e,Yh=!1}}return null}var as=[],ls=0,Lu=null,Fu=0,qt=[],Kt=0,Ar=null,Bn=1,$n="";function hr(t,e){as[ls++]=Fu,as[ls++]=Lu,Lu=t,Fu=e}function TE(t,e,n){qt[Kt++]=Bn,qt[Kt++]=$n,qt[Kt++]=Ar,Ar=t;var i=Bn;t=$n;var r=32-dn(i)-1;i&=~(1<<r),n+=1;var s=32-dn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Bn=1<<32-dn(e)+r|n<<r|i,$n=s+t}else Bn=1<<s|n<<r|i,$n=t}function xp(t){t.return!==null&&(hr(t,1),TE(t,1,0))}function Ap(t){for(;t===Lu;)Lu=as[--ls],as[ls]=null,Fu=as[--ls],as[ls]=null;for(;t===Ar;)Ar=qt[--Kt],qt[Kt]=null,$n=qt[--Kt],qt[Kt]=null,Bn=qt[--Kt],qt[Kt]=null}var zt=null,Ut=null,Ce=!1,ln=null;function SE(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ut=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ar!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ut=null,!0):!1;default:return!1}}function of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function af(t){if(Ce){var e=Ut;if(e){var n=e;if(!$_(t,e)){if(of(t))throw Error(j(418));e=Pi(n.nextSibling);var i=zt;e&&$_(t,e)?SE(i,n):(t.flags=t.flags&-4097|2,Ce=!1,zt=t)}}else{if(of(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ce=!1,zt=t}}}function H_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function kl(t){if(t!==zt)return!1;if(!Ce)return H_(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tf(t.type,t.memoizedProps)),e&&(e=Ut)){if(of(t))throw IE(),Error(j(418));for(;e;)SE(t,e),e=Pi(e.nextSibling)}if(H_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=zt?Pi(t.stateNode.nextSibling):null;return!0}function IE(){for(var t=Ut;t;)t=Pi(t.nextSibling)}function Cs(){Ut=zt=null,Ce=!1}function bp(t){ln===null?ln=[t]:ln.push(t)}var cb=si.ReactCurrentBatchConfig;function vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var i=n.stateNode}if(!i)throw Error(j(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function Cl(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function W_(t){var e=t._init;return e(t._payload)}function xE(t){function e(w,_){if(t){var x=w.deletions;x===null?(w.deletions=[_],w.flags|=16):x.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function i(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function r(w,_){return w=Oi(w,_),w.index=0,w.sibling=null,w}function s(w,_,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<_?(w.flags|=2,_):x):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,x,R){return _===null||_.tag!==6?(_=id(x,w.mode,R),_.return=w,_):(_=r(_,x),_.return=w,_)}function l(w,_,x,R){var M=x.type;return M===ts?h(w,_,x.props.children,R,x.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fi&&W_(M)===_.type)?(R=r(_,x.props),R.ref=vo(w,_,x),R.return=w,R):(R=cu(x.type,x.key,x.props,null,w.mode,R),R.ref=vo(w,_,x),R.return=w,R)}function c(w,_,x,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=rd(x,w.mode,R),_.return=w,_):(_=r(_,x.children||[]),_.return=w,_)}function h(w,_,x,R,M){return _===null||_.tag!==7?(_=Er(x,w.mode,R,M),_.return=w,_):(_=r(_,x),_.return=w,_)}function d(w,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=id(""+_,w.mode,x),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case yl:return x=cu(_.type,_.key,_.props,null,w.mode,x),x.ref=vo(w,null,_),x.return=w,x;case es:return _=rd(_,w.mode,x),_.return=w,_;case fi:var R=_._init;return d(w,R(_._payload),x)}if(ko(_)||po(_))return _=Er(_,w.mode,x,null),_.return=w,_;Cl(w,_)}return null}function p(w,_,x,R){var M=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(w,_,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yl:return x.key===M?l(w,_,x,R):null;case es:return x.key===M?c(w,_,x,R):null;case fi:return M=x._init,p(w,_,M(x._payload),R)}if(ko(x)||po(x))return M!==null?null:h(w,_,x,R,null);Cl(w,x)}return null}function m(w,_,x,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(x)||null,a(_,w,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case yl:return w=w.get(R.key===null?x:R.key)||null,l(_,w,R,M);case es:return w=w.get(R.key===null?x:R.key)||null,c(_,w,R,M);case fi:var O=R._init;return m(w,_,x,O(R._payload),M)}if(ko(R)||po(R))return w=w.get(x)||null,h(_,w,R,M,null);Cl(_,R)}return null}function v(w,_,x,R){for(var M=null,O=null,I=_,y=_=0,E=null;I!==null&&y<x.length;y++){I.index>y?(E=I,I=null):E=I.sibling;var A=p(w,I,x[y],R);if(A===null){I===null&&(I=E);break}t&&I&&A.alternate===null&&e(w,I),_=s(A,_,y),O===null?M=A:O.sibling=A,O=A,I=E}if(y===x.length)return n(w,I),Ce&&hr(w,y),M;if(I===null){for(;y<x.length;y++)I=d(w,x[y],R),I!==null&&(_=s(I,_,y),O===null?M=I:O.sibling=I,O=I);return Ce&&hr(w,y),M}for(I=i(w,I);y<x.length;y++)E=m(I,w,y,x[y],R),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?y:E.key),_=s(E,_,y),O===null?M=E:O.sibling=E,O=E);return t&&I.forEach(function(C){return e(w,C)}),Ce&&hr(w,y),M}function S(w,_,x,R){var M=po(x);if(typeof M!="function")throw Error(j(150));if(x=M.call(x),x==null)throw Error(j(151));for(var O=M=null,I=_,y=_=0,E=null,A=x.next();I!==null&&!A.done;y++,A=x.next()){I.index>y?(E=I,I=null):E=I.sibling;var C=p(w,I,A.value,R);if(C===null){I===null&&(I=E);break}t&&I&&C.alternate===null&&e(w,I),_=s(C,_,y),O===null?M=C:O.sibling=C,O=C,I=E}if(A.done)return n(w,I),Ce&&hr(w,y),M;if(I===null){for(;!A.done;y++,A=x.next())A=d(w,A.value,R),A!==null&&(_=s(A,_,y),O===null?M=A:O.sibling=A,O=A);return Ce&&hr(w,y),M}for(I=i(w,I);!A.done;y++,A=x.next())A=m(I,w,y,A.value,R),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?y:A.key),_=s(A,_,y),O===null?M=A:O.sibling=A,O=A);return t&&I.forEach(function(P){return e(w,P)}),Ce&&hr(w,y),M}function b(w,_,x,R){if(typeof x=="object"&&x!==null&&x.type===ts&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case yl:e:{for(var M=x.key,O=_;O!==null;){if(O.key===M){if(M=x.type,M===ts){if(O.tag===7){n(w,O.sibling),_=r(O,x.props.children),_.return=w,w=_;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fi&&W_(M)===O.type){n(w,O.sibling),_=r(O,x.props),_.ref=vo(w,O,x),_.return=w,w=_;break e}n(w,O);break}else e(w,O);O=O.sibling}x.type===ts?(_=Er(x.props.children,w.mode,R,x.key),_.return=w,w=_):(R=cu(x.type,x.key,x.props,null,w.mode,R),R.ref=vo(w,_,x),R.return=w,w=R)}return o(w);case es:e:{for(O=x.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(w,_.sibling),_=r(_,x.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=rd(x,w.mode,R),_.return=w,w=_}return o(w);case fi:return O=x._init,b(w,_,O(x._payload),R)}if(ko(x))return v(w,_,x,R);if(po(x))return S(w,_,x,R);Cl(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(w,_.sibling),_=r(_,x),_.return=w,w=_):(n(w,_),_=id(x,w.mode,R),_.return=w,w=_),o(w)):n(w,_)}return b}var Ps=xE(!0),AE=xE(!1),ju=tr(null),Uu=null,us=null,kp=null;function Cp(){kp=us=Uu=null}function Pp(t){var e=ju.current;ke(ju),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function _s(t,e){Uu=t,kp=us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(kp!==t)if(t={context:t,memoizedValue:e,next:null},us===null){if(Uu===null)throw Error(j(308));us=t,Uu.dependencies={lanes:0,firstContext:t}}else us=us.next=t;return e}var mr=null;function Rp(t){mr===null?mr=[t]:mr.push(t)}function bE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Rp(e)):(n.next=r.next,r.next=n),e.interleaved=n,Xn(t,i)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function Dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Xn(t,n)}return r=i.interleaved,r===null?(e.next=e,Rp(i)):(e.next=r.next,r.next=e),i.interleaved=e,Xn(t,n)}function ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_p(t,n)}}function q_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,i){var r=t.updateQueue;pi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(p=e,m=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=De({},d,p);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);kr|=o,t.lanes=o,t.memoizedState=d}}function K_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(j(191,r));r.call(i)}}}var za={},xn=tr(za),ma=tr(za),_a=tr(za);function _r(t){if(t===za)throw Error(j(174));return t}function Mp(t,e){switch(Ie(_a,e),Ie(ma,t),Ie(xn,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zd(e,t)}ke(xn),Ie(xn,e)}function Rs(){ke(xn),ke(ma),ke(_a)}function CE(t){_r(_a.current);var e=_r(xn.current),n=zd(e,t.type);e!==n&&(Ie(ma,t),Ie(xn,n))}function Op(t){ma.current===t&&(ke(xn),ke(ma))}var Pe=tr(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xh=[];function Np(){for(var t=0;t<Xh.length;t++)Xh[t]._workInProgressVersionPrimary=null;Xh.length=0}var su=si.ReactCurrentDispatcher,Jh=si.ReactCurrentBatchConfig,br=0,Re=null,He=null,Xe=null,$u=!1,Wo=!1,ya=0,hb=0;function ht(){throw Error(j(321))}function Vp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Lp(t,e,n,i,r,s){if(br=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,su.current=t===null||t.memoizedState===null?gb:mb,t=n(i,r),Wo){s=0;do{if(Wo=!1,ya=0,25<=s)throw Error(j(301));s+=1,Xe=He=null,e.updateQueue=null,su.current=_b,t=n(i,r)}while(Wo)}if(su.current=Hu,e=He!==null&&He.next!==null,br=0,Xe=He=Re=null,$u=!1,e)throw Error(j(300));return t}function Fp(){var t=ya!==0;return ya=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function en(){if(He===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?Re.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(j(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function va(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=en(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((br&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Re.lanes|=h,kr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,pn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Re.lanes|=s,kr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ed(t){var e=en(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);pn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function PE(){}function RE(t,e){var n=Re,i=en(),r=e(),s=!pn(i.memoizedState,r);if(s&&(i.memoizedState=r,Dt=!0),i=i.queue,jp(OE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,wa(9,ME.bind(null,n,i,r,e),void 0,null),Je===null)throw Error(j(349));br&30||DE(n,e,r)}return r}function DE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ME(t,e,n,i){e.value=n,e.getSnapshot=i,NE(e)&&VE(t)}function OE(t,e,n){return n(function(){NE(e)&&VE(t)})}function NE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function VE(t){var e=Xn(t,1);e!==null&&fn(e,t,1,-1)}function G_(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=pb.bind(null,Re,t),[e.memoizedState,t]}function wa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function LE(){return en().memoizedState}function ou(t,e,n,i){var r=vn();Re.flags|=t,r.memoizedState=wa(1|e,n,void 0,i===void 0?null:i)}function Mc(t,e,n,i){var r=en();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&Vp(i,o.deps)){r.memoizedState=wa(e,n,s,i);return}}Re.flags|=t,r.memoizedState=wa(1|e,n,s,i)}function Q_(t,e){return ou(8390656,8,t,e)}function jp(t,e){return Mc(2048,8,t,e)}function FE(t,e){return Mc(4,2,t,e)}function jE(t,e){return Mc(4,4,t,e)}function UE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zE(t,e,n){return n=n!=null?n.concat([t]):null,Mc(4,4,UE.bind(null,e,t),n)}function Up(){}function BE(t,e){var n=en();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $E(t,e){var n=en();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function HE(t,e,n){return br&21?(pn(n,e)||(n=Qw(),Re.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function db(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var i=Jh.transition;Jh.transition={};try{t(!1),e()}finally{ge=n,Jh.transition=i}}function WE(){return en().memoizedState}function fb(t,e,n){var i=Mi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qE(t))KE(e,n);else if(n=bE(t,e,n,i),n!==null){var r=xt();fn(n,t,i,r),GE(n,e,i)}}function pb(t,e,n){var i=Mi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qE(t))KE(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,pn(a,o)){var l=e.interleaved;l===null?(r.next=r,Rp(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=bE(t,e,r,i),n!==null&&(r=xt(),fn(n,t,i,r),GE(n,e,i))}}function qE(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function KE(t,e){Wo=$u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_p(t,n)}}var Hu={readContext:Zt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},gb={readContext:Zt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,UE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=vn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fb.bind(null,Re,t),[i.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:G_,useDebugValue:Up,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=G_(!1),e=t[0];return t=db.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Re,r=vn();if(Ce){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Je===null)throw Error(j(349));br&30||DE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Q_(OE.bind(null,i,s,t),[t]),i.flags|=2048,wa(9,ME.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=vn(),e=Je.identifierPrefix;if(Ce){var n=$n,i=Bn;n=(i&~(1<<32-dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mb={readContext:Zt,useCallback:BE,useContext:Zt,useEffect:jp,useImperativeHandle:zE,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:$E,useReducer:Zh,useRef:LE,useState:function(){return Zh(va)},useDebugValue:Up,useDeferredValue:function(t){var e=en();return HE(e,He.memoizedState,t)},useTransition:function(){var t=Zh(va)[0],e=en().memoizedState;return[t,e]},useMutableSource:PE,useSyncExternalStore:RE,useId:WE,unstable_isNewReconciler:!1},_b={readContext:Zt,useCallback:BE,useContext:Zt,useEffect:jp,useImperativeHandle:zE,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:$E,useReducer:ed,useRef:LE,useState:function(){return ed(va)},useDebugValue:Up,useDeferredValue:function(t){var e=en();return He===null?e.memoizedState=t:HE(e,He.memoizedState,t)},useTransition:function(){var t=ed(va)[0],e=en().memoizedState;return[t,e]},useMutableSource:PE,useSyncExternalStore:RE,useId:WE,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oc={isMounted:function(t){return(t=t._reactInternals)?Fr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xt(),r=Mi(t),s=Kn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(fn(e,t,r,i),ru(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xt(),r=Mi(t),s=Kn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(fn(e,t,r,i),ru(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),i=Mi(t),r=Kn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ri(t,r,i),e!==null&&(fn(e,t,i,n),ru(e,t,i))}};function Y_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!da(n,i)||!da(r,s):!0}function QE(t,e,n){var i=!1,r=Hi,s=e.contextType;return typeof s=="object"&&s!==null?s=Zt(s):(r=Nt(e)?xr:vt.current,i=e.contextTypes,s=(i=i!=null)?ks(t,r):Hi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function X_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Oc.enqueueReplaceState(e,e.state,null)}function cf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Dp(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zt(s):(s=Nt(e)?xr:vt.current,r.context=ks(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Oc.enqueueReplaceState(r,r.state,null),zu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",i=e;do n+=Wx(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yb=typeof WeakMap=="function"?WeakMap:Map;function YE(t,e,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qu||(qu=!0,Ef=i),hf(t,e)},n}function XE(t,e,n){n=Kn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){hf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hf(t,e),typeof i!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new yb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Db.bind(null,t,e,n),e.then(t,t))}function Z_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ey(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kn(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var vb=si.ReactCurrentOwner,Dt=!1;function It(t,e,n,i){e.child=t===null?AE(e,null,n,i):Ps(e,t.child,n,i)}function ty(t,e,n,i,r){n=n.render;var s=e.ref;return _s(e,r),i=Lp(t,e,n,i,s,r),n=Fp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Jn(t,e,r)):(Ce&&n&&xp(e),e.flags|=1,It(t,e,i,r),e.child)}function ny(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Gp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,JE(t,e,s,i,r)):(t=cu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:da,n(o,i)&&t.ref===e.ref)return Jn(t,e,r)}return e.flags|=1,t=Oi(s,i),t.ref=e.ref,t.return=e,e.child=t}function JE(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(da(s,i)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Jn(t,e,r)}return df(t,e,n,i,r)}function ZE(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(hs,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(hs,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(hs,jt),jt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(hs,jt),jt|=i;return It(t,e,r,n),e.child}function eT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function df(t,e,n,i,r){var s=Nt(n)?xr:vt.current;return s=ks(e,s),_s(e,r),n=Lp(t,e,n,i,s,r),i=Fp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Jn(t,e,r)):(Ce&&i&&xp(e),e.flags|=1,It(t,e,n,r),e.child)}function iy(t,e,n,i,r){if(Nt(n)){var s=!0;Vu(e)}else s=!1;if(_s(e,r),e.stateNode===null)au(t,e),QE(e,n,i),cf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=Nt(n)?xr:vt.current,c=ks(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&X_(e,o,i,c),pi=!1;var p=e.memoizedState;o.state=p,zu(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Ot.current||pi?(typeof h=="function"&&(uf(e,n,h,i),l=e.memoizedState),(a=pi||Y_(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,kE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:on(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zt(l):(l=Nt(n)?xr:vt.current,l=ks(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&X_(e,o,i,l),pi=!1,p=e.memoizedState,o.state=p,zu(e,i,o,r);var v=e.memoizedState;a!==d||p!==v||Ot.current||pi?(typeof m=="function"&&(uf(e,n,m,i),v=e.memoizedState),(c=pi||Y_(e,n,c,i,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return ff(t,e,n,i,s,r)}function ff(t,e,n,i,r,s){eT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&B_(e,n,!1),Jn(t,e,s);i=e.stateNode,vb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ps(e,t.child,null,s),e.child=Ps(e,null,a,s)):It(t,e,a,s),e.memoizedState=i.state,r&&B_(e,n,!0),e.child}function tT(t){var e=t.stateNode;e.pendingContext?z_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z_(t,e.context,!1),Mp(t,e.containerInfo)}function ry(t,e,n,i,r){return Cs(),bp(r),e.flags|=256,It(t,e,n,i),e.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function nT(t,e,n){var i=e.pendingProps,r=Pe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Pe,r&1),t===null)return af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lc(o,i,0,null),t=Er(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gf(n),e.memoizedState=pf,t):zp(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return wb(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Oi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Oi(a,s):(s=Er(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?gf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=pf,i}return s=t.child,t=s.sibling,i=Oi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function zp(t,e){return e=Lc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,i){return i!==null&&bp(i),Ps(e,t.child,null,n),t=zp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wb(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=td(Error(j(422))),Pl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Lc({mode:"visible",children:i.children},r,0,null),s=Er(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ps(e,t.child,null,o),e.child.memoizedState=gf(o),e.memoizedState=pf,s);if(!(e.mode&1))return Pl(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(j(419)),i=td(s,i,void 0),Pl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Dt||a){if(i=Je,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Xn(t,r),fn(i,t,r,-1))}return Kp(),i=td(Error(j(421))),Pl(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Mb.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Ut=Pi(r.nextSibling),zt=e,Ce=!0,ln=null,t!==null&&(qt[Kt++]=Bn,qt[Kt++]=$n,qt[Kt++]=Ar,Bn=t.id,$n=t.overflow,Ar=e),e=zp(e,i.children),e.flags|=4096,e)}function sy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),lf(t.return,e,n)}function nd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function iT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(It(t,e,i.children,n),i=Pe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sy(t,n,e);else if(t.tag===19)sy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(Pe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),nd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}nd(e,!0,n,null,s);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eb(t,e,n){switch(e.tag){case 3:tT(e),Cs();break;case 5:CE(e);break;case 1:Nt(e.type)&&Vu(e);break;case 4:Mp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(ju,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?nT(t,e,n):(Ie(Pe,Pe.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);Ie(Pe,Pe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return iT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Pe,Pe.current),i)break;return null;case 22:case 23:return e.lanes=0,ZE(t,e,n)}return Jn(t,e,n)}var rT,mf,sT,oT;rT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mf=function(){};sT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,_r(xn.current);var s=null;switch(n){case"input":r=Ld(t,r),i=Ld(t,i),s=[];break;case"select":r=De({},r,{value:void 0}),i=De({},i,{value:void 0}),s=[];break;case"textarea":r=Ud(t,r),i=Ud(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ou)}Bd(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oT=function(t,e,n,i){n!==i&&(e.flags|=4)};function wo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Tb(t,e,n){var i=e.pendingProps;switch(Ap(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Nt(e.type)&&Nu(),dt(e),null;case 3:return i=e.stateNode,Rs(),ke(Ot),ke(vt),Np(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(If(ln),ln=null))),mf(t,e),dt(e),null;case 5:Op(e);var r=_r(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)sT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(j(166));return dt(e),null}if(t=_r(xn.current),kl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Sn]=e,i[ga]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":case"embed":Ae("load",i);break;case"video":case"audio":for(r=0;r<Po.length;r++)Ae(Po[r],i);break;case"source":Ae("error",i);break;case"img":case"image":case"link":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"input":p_(i,s),Ae("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",i);break;case"textarea":m_(i,s),Ae("invalid",i)}Bd(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&bl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bl(i.textContent,a,t),r=["children",""+a]):sa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",i)}switch(n){case"input":vl(i),g_(i,s,!0);break;case"textarea":vl(i),__(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ou)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ow(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Sn]=e,t[ga]=i,rT(t,e,!1,!1),e.stateNode=t;e:{switch(o=$d(n,i),n){case"dialog":Ae("cancel",t),Ae("close",t),r=i;break;case"iframe":case"object":case"embed":Ae("load",t),r=i;break;case"video":case"audio":for(r=0;r<Po.length;r++)Ae(Po[r],t);r=i;break;case"source":Ae("error",t),r=i;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),r=i;break;case"details":Ae("toggle",t),r=i;break;case"input":p_(t,i),r=Ld(t,i),Ae("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=De({},i,{value:void 0}),Ae("invalid",t);break;case"textarea":m_(t,i),r=Ud(t,i),Ae("invalid",t);break;default:r=i}Bd(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Lw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oa(t,l):typeof l=="number"&&oa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&hp(t,s,l,o))}switch(n){case"input":vl(t),g_(t,i,!1);break;case"textarea":vl(t),__(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$i(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?fs(t,!!i.multiple,s,!1):i.defaultValue!=null&&fs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)oT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(j(166));if(n=_r(_a.current),_r(xn.current),kl(e)){if(i=e.stateNode,n=e.memoizedProps,i[Sn]=e,(s=i.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:bl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sn]=e,e.stateNode=i}return dt(e),null;case 13:if(ke(Pe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Ut!==null&&e.mode&1&&!(e.flags&128))IE(),Cs(),e.flags|=98560,s=!1;else if(s=kl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Sn]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else ln!==null&&(If(ln),ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?qe===0&&(qe=3):Kp())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Rs(),mf(t,e),t===null&&fa(e.stateNode.containerInfo),dt(e),null;case 10:return Pp(e.type._context),dt(e),null;case 17:return Nt(e.type)&&Nu(),dt(e),null;case 19:if(ke(Pe),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)wo(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bu(t),o!==null){for(e.flags|=128,wo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Ms&&(e.flags|=128,i=!0,wo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Bu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return dt(e),null}else 2*Le()-s.renderingStartTime>Ms&&n!==1073741824&&(e.flags|=128,i=!0,wo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Pe.current,Ie(Pe,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return qp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?jt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function Sb(t,e){switch(Ap(e),e.tag){case 1:return Nt(e.type)&&Nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rs(),ke(Ot),ke(vt),Np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Op(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return Rs(),null;case 10:return Pp(e.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Rl=!1,mt=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,H=null;function cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ne(t,e,i)}else n.current=null}function _f(t,e,n){try{n()}catch(i){Ne(t,e,i)}}var oy=!1;function xb(t,e){if(Zd=Ru,t=hE(),Ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},Ru=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,b=v.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:on(e.type,S),b);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(R){Ne(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=oy,oy=!1,v}function qo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&_f(e,n,s)}r=r.next}while(r!==i)}}function Nc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function yf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aT(t){var e=t.alternate;e!==null&&(t.alternate=null,aT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[ga],delete e[rf],delete e[ab],delete e[lb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lT(t){return t.tag===5||t.tag===3||t.tag===4}function ay(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(i!==4&&(t=t.child,t!==null))for(vf(t,e,n),t=t.sibling;t!==null;)vf(t,e,n),t=t.sibling}function wf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}var nt=null,an=!1;function ci(t,e,n){for(n=n.child;n!==null;)uT(t,e,n),n=n.sibling}function uT(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(bc,n)}catch{}switch(n.tag){case 5:mt||cs(n,e);case 6:var i=nt,r=an;nt=null,ci(t,e,n),nt=i,an=r,nt!==null&&(an?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(an?(t=nt,n=n.stateNode,t.nodeType===8?Qh(t.parentNode,n):t.nodeType===1&&Qh(t,n),ca(t)):Qh(nt,n.stateNode));break;case 4:i=nt,r=an,nt=n.stateNode.containerInfo,an=!0,ci(t,e,n),nt=i,an=r;break;case 0:case 11:case 14:case 15:if(!mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_f(n,e,o),r=r.next}while(r!==i)}ci(t,e,n);break;case 1:if(!mt&&(cs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ne(n,e,a)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(mt=(i=mt)||n.memoizedState!==null,ci(t,e,n),mt=i):ci(t,e,n);break;default:ci(t,e,n)}}function ly(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ib),e.forEach(function(i){var r=Ob.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,an=!1;break e;case 3:nt=a.stateNode.containerInfo,an=!0;break e;case 4:nt=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(nt===null)throw Error(j(160));uT(s,o,r),nt=null,an=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ne(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cT(e,t),e=e.sibling}function cT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),mn(t),i&4){try{qo(3,t,t.return),Nc(3,t)}catch(S){Ne(t,t.return,S)}try{qo(5,t,t.return)}catch(S){Ne(t,t.return,S)}}break;case 1:sn(e,t),mn(t),i&512&&n!==null&&cs(n,n.return);break;case 5:if(sn(e,t),mn(t),i&512&&n!==null&&cs(n,n.return),t.flags&32){var r=t.stateNode;try{oa(r,"")}catch(S){Ne(t,t.return,S)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Dw(r,s),$d(a,o);var c=$d(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Lw(r,d):h==="dangerouslySetInnerHTML"?Nw(r,d):h==="children"?oa(r,d):hp(r,h,d,c)}switch(a){case"input":Fd(r,s);break;case"textarea":Mw(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?fs(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?fs(r,!!s.multiple,s.defaultValue,!0):fs(r,!!s.multiple,s.multiple?[]:"",!1))}r[ga]=s}catch(S){Ne(t,t.return,S)}}break;case 6:if(sn(e,t),mn(t),i&4){if(t.stateNode===null)throw Error(j(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(S){Ne(t,t.return,S)}}break;case 3:if(sn(e,t),mn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ca(e.containerInfo)}catch(S){Ne(t,t.return,S)}break;case 4:sn(e,t),mn(t);break;case 13:sn(e,t),mn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hp=Le())),i&4&&ly(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(c=mt)||h,sn(e,t),mt=c):sn(e,t),mn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:qo(4,p,p.return);break;case 1:cs(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Ne(i,n,S)}}break;case 5:cs(p,p.return);break;case 22:if(p.memoizedState!==null){cy(d);continue}}m!==null?(m.return=p,H=m):cy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Vw("display",o))}catch(S){Ne(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Ne(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(e,t),mn(t),i&4&&ly(t);break;case 21:break;default:sn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lT(n)){var i=n;break e}n=n.return}throw Error(j(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(oa(r,""),i.flags&=-33);var s=ay(t);wf(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=ay(t);vf(t,a,o);break;default:throw Error(j(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ab(t,e,n){H=t,hT(t)}function hT(t,e,n){for(var i=(t.mode&1)!==0;H!==null;){var r=H,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Rl;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||mt;a=Rl;var c=mt;if(Rl=o,(mt=l)&&!c)for(H=r;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?hy(r):l!==null?(l.return=o,H=l):hy(r);for(;s!==null;)H=s,hT(s),s=s.sibling;H=r,Rl=a,mt=c}uy(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,H=s):uy(t)}}function uy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Nc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&K_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}K_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ca(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}mt||e.flags&512&&yf(e)}catch(p){Ne(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function cy(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function hy(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nc(4,e)}catch(l){Ne(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ne(e,r,l)}}var s=e.return;try{yf(e)}catch(l){Ne(e,s,l)}break;case 5:var o=e.return;try{yf(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var bb=Math.ceil,Wu=si.ReactCurrentDispatcher,Bp=si.ReactCurrentOwner,Jt=si.ReactCurrentBatchConfig,le=0,Je=null,Ue=null,st=0,jt=0,hs=tr(0),qe=0,Ea=null,kr=0,Vc=0,$p=0,Ko=null,Pt=null,Hp=0,Ms=1/0,jn=null,qu=!1,Ef=null,Di=null,Dl=!1,Ti=null,Ku=0,Go=0,Tf=null,lu=-1,uu=0;function xt(){return le&6?Le():lu!==-1?lu:lu=Le()}function Mi(t){return t.mode&1?le&2&&st!==0?st&-st:cb.transition!==null?(uu===0&&(uu=Qw()),uu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:nE(t.type)),t):1}function fn(t,e,n,i){if(50<Go)throw Go=0,Tf=null,Error(j(185));Fa(t,n,i),(!(le&2)||t!==Je)&&(t===Je&&(!(le&2)&&(Vc|=n),qe===4&&mi(t,st)),Vt(t,i),n===1&&le===0&&!(e.mode&1)&&(Ms=Le()+500,Dc&&nr()))}function Vt(t,e){var n=t.callbackNode;cA(t,e);var i=Pu(t,t===Je?st:0);if(i===0)n!==null&&w_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&w_(n),e===1)t.tag===0?ub(dy.bind(null,t)):EE(dy.bind(null,t)),sb(function(){!(le&6)&&nr()}),n=null;else{switch(Yw(i)){case 1:n=mp;break;case 4:n=Kw;break;case 16:n=Cu;break;case 536870912:n=Gw;break;default:n=Cu}n=vT(n,dT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dT(t,e){if(lu=-1,uu=0,le&6)throw Error(j(327));var n=t.callbackNode;if(ys()&&t.callbackNode!==n)return null;var i=Pu(t,t===Je?st:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Gu(t,i);else{e=i;var r=le;le|=2;var s=pT();(Je!==t||st!==e)&&(jn=null,Ms=Le()+500,wr(t,e));do try{Pb();break}catch(a){fT(t,a)}while(!0);Cp(),Wu.current=s,le=r,Ue!==null?e=0:(Je=null,st=0,e=qe)}if(e!==0){if(e===2&&(r=Gd(t),r!==0&&(i=r,e=Sf(t,r))),e===1)throw n=Ea,wr(t,0),mi(t,i),Vt(t,Le()),n;if(e===6)mi(t,i);else{if(r=t.current.alternate,!(i&30)&&!kb(r)&&(e=Gu(t,i),e===2&&(s=Gd(t),s!==0&&(i=s,e=Sf(t,s))),e===1))throw n=Ea,wr(t,0),mi(t,i),Vt(t,Le()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(j(345));case 2:dr(t,Pt,jn);break;case 3:if(mi(t,i),(i&130023424)===i&&(e=Hp+500-Le(),10<e)){if(Pu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=nf(dr.bind(null,t,Pt,jn),e);break}dr(t,Pt,jn);break;case 4:if(mi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-dn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bb(i/1960))-i,10<i){t.timeoutHandle=nf(dr.bind(null,t,Pt,jn),i);break}dr(t,Pt,jn);break;case 5:dr(t,Pt,jn);break;default:throw Error(j(329))}}}return Vt(t,Le()),t.callbackNode===n?dT.bind(null,t):null}function Sf(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=Gu(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&If(e)),t}function If(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function kb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!pn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~$p,e&=~Vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),i=1<<n;t[n]=-1,e&=~i}}function dy(t){if(le&6)throw Error(j(327));ys();var e=Pu(t,0);if(!(e&1))return Vt(t,Le()),null;var n=Gu(t,e);if(t.tag!==0&&n===2){var i=Gd(t);i!==0&&(e=i,n=Sf(t,i))}if(n===1)throw n=Ea,wr(t,0),mi(t,e),Vt(t,Le()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dr(t,Pt,jn),Vt(t,Le()),null}function Wp(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ms=Le()+500,Dc&&nr())}}function Cr(t){Ti!==null&&Ti.tag===0&&!(le&6)&&ys();var e=le;le|=1;var n=Jt.transition,i=ge;try{if(Jt.transition=null,ge=1,t)return t()}finally{ge=i,Jt.transition=n,le=e,!(le&6)&&nr()}}function qp(){jt=hs.current,ke(hs)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rb(n)),Ue!==null)for(n=Ue.return;n!==null;){var i=n;switch(Ap(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nu();break;case 3:Rs(),ke(Ot),ke(vt),Np();break;case 5:Op(i);break;case 4:Rs();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:Pp(i.type._context);break;case 22:case 23:qp()}n=n.return}if(Je=t,Ue=t=Oi(t.current,null),st=jt=e,qe=0,Ea=null,$p=Vc=kr=0,Pt=Ko=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}mr=null}return t}function fT(t,e){do{var n=Ue;try{if(Cp(),su.current=Hu,$u){for(var i=Re.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}$u=!1}if(br=0,Xe=He=Re=null,Wo=!1,ya=0,Bp.current=null,n===null||n.return===null){qe=1,Ea=e,Ue=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Z_(o);if(m!==null){m.flags&=-257,ey(m,o,a,s,e),m.mode&1&&J_(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){J_(s,c,e),Kp();break e}l=Error(j(426))}}else if(Ce&&a.mode&1){var b=Z_(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ey(b,o,a,s,e),bp(Ds(l,a));break e}}s=l=Ds(l,a),qe!==4&&(qe=2),Ko===null?Ko=[s]:Ko.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=YE(s,l,e);q_(s,w);break e;case 1:a=l;var _=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Di===null||!Di.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=XE(s,a,e);q_(s,R);break e}}s=s.return}while(s!==null)}mT(n)}catch(M){e=M,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function pT(){var t=Wu.current;return Wu.current=Hu,t===null?Hu:t}function Kp(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(kr&268435455)&&!(Vc&268435455)||mi(Je,st)}function Gu(t,e){var n=le;le|=2;var i=pT();(Je!==t||st!==e)&&(jn=null,wr(t,e));do try{Cb();break}catch(r){fT(t,r)}while(!0);if(Cp(),le=n,Wu.current=i,Ue!==null)throw Error(j(261));return Je=null,st=0,qe}function Cb(){for(;Ue!==null;)gT(Ue)}function Pb(){for(;Ue!==null&&!tA();)gT(Ue)}function gT(t){var e=yT(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?mT(t):Ue=e,Bp.current=null}function mT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sb(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ue=null;return}}else if(n=Tb(n,e,jt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);qe===0&&(qe=5)}function dr(t,e,n){var i=ge,r=Jt.transition;try{Jt.transition=null,ge=1,Rb(t,e,n,i)}finally{Jt.transition=r,ge=i}return null}function Rb(t,e,n,i){do ys();while(Ti!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hA(t,s),t===Je&&(Ue=Je=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,vT(Cu,function(){return ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=ge;ge=1;var a=le;le|=4,Bp.current=null,xb(t,n),cT(n,t),XA(ef),Ru=!!Zd,ef=Zd=null,t.current=n,Ab(n),nA(),le=a,ge=o,Jt.transition=s}else t.current=n;if(Dl&&(Dl=!1,Ti=t,Ku=r),s=t.pendingLanes,s===0&&(Di=null),sA(n.stateNode),Vt(t,Le()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(qu)throw qu=!1,t=Ef,Ef=null,t;return Ku&1&&t.tag!==0&&ys(),s=t.pendingLanes,s&1?t===Tf?Go++:(Go=0,Tf=t):Go=0,nr(),null}function ys(){if(Ti!==null){var t=Yw(Ku),e=Jt.transition,n=ge;try{if(Jt.transition=null,ge=16>t?16:t,Ti===null)var i=!1;else{if(t=Ti,Ti=null,Ku=0,le&6)throw Error(j(331));var r=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:qo(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var p=h.sibling,m=h.return;if(aT(h),h===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qo(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,H=w;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,H=x;else e:for(o=_;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nc(9,a)}}catch(M){Ne(a,a.return,M)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(le=r,nr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(bc,t)}catch{}i=!0}return i}finally{ge=n,Jt.transition=e}}return!1}function fy(t,e,n){e=Ds(n,e),e=YE(t,e,1),t=Ri(t,e,1),e=xt(),t!==null&&(Fa(t,1,e),Vt(t,e))}function Ne(t,e,n){if(t.tag===3)fy(t,t,n);else for(;e!==null;){if(e.tag===3){fy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Di===null||!Di.has(i))){t=Ds(n,t),t=XE(e,t,1),e=Ri(e,t,1),t=xt(),e!==null&&(Fa(e,1,t),Vt(e,t));break}}e=e.return}}function Db(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Le()-Hp?wr(t,0):$p|=n),Vt(t,e)}function _T(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=xt();t=Xn(t,e),t!==null&&(Fa(t,e,n),Vt(t,n))}function Mb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_T(t,n)}function Ob(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(j(314))}i!==null&&i.delete(e),_T(t,n)}var yT;yT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,Eb(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ce&&e.flags&1048576&&TE(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;au(t,e),t=e.pendingProps;var r=ks(e,vt.current);_s(e,n),r=Lp(null,e,i,t,r,n);var s=Fp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(i)?(s=!0,Vu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Dp(e),r.updater=Oc,e.stateNode=r,r._reactInternals=e,cf(e,i,t,n),e=ff(null,e,i,!0,s,n)):(e.tag=0,Ce&&s&&xp(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(au(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Vb(i),t=on(i,t),r){case 0:e=df(null,e,i,t,n);break e;case 1:e=iy(null,e,i,t,n);break e;case 11:e=ty(null,e,i,t,n);break e;case 14:e=ny(null,e,i,on(i.type,t),n);break e}throw Error(j(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),df(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),iy(t,e,i,r,n);case 3:e:{if(tT(e),t===null)throw Error(j(387));i=e.pendingProps,s=e.memoizedState,r=s.element,kE(t,e),zu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ds(Error(j(423)),e),e=ry(t,e,i,n,r);break e}else if(i!==r){r=Ds(Error(j(424)),e),e=ry(t,e,i,n,r);break e}else for(Ut=Pi(e.stateNode.containerInfo.firstChild),zt=e,Ce=!0,ln=null,n=AE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),i===r){e=Jn(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return CE(e),t===null&&af(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,tf(i,r)?o=null:s!==null&&tf(i,s)&&(e.flags|=32),eT(t,e),It(t,e,o,n),e.child;case 6:return t===null&&af(e),null;case 13:return nT(t,e,n);case 4:return Mp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ps(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),ty(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(ju,i._currentValue),i._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===r.children&&!Ot.current){e=Jn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Kn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,_s(e,n),r=Zt(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=on(i,e.pendingProps),r=on(i.type,r),ny(t,e,i,r,n);case 15:return JE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),au(t,e),e.tag=1,Nt(i)?(t=!0,Vu(e)):t=!1,_s(e,n),QE(e,i,r),cf(e,i,r,n),ff(null,e,i,!0,t,n);case 19:return iT(t,e,n);case 22:return ZE(t,e,n)}throw Error(j(156,e.tag))};function vT(t,e){return qw(t,e)}function Nb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,i){return new Nb(t,e,n,i)}function Gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vb(t){if(typeof t=="function")return Gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fp)return 11;if(t===pp)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return Er(n.children,r,s,e);case dp:o=8,r|=8;break;case Md:return t=Yt(12,n,e,r|2),t.elementType=Md,t.lanes=s,t;case Od:return t=Yt(13,n,e,r),t.elementType=Od,t.lanes=s,t;case Nd:return t=Yt(19,n,e,r),t.elementType=Nd,t.lanes=s,t;case Cw:return Lc(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bw:o=10;break e;case kw:o=9;break e;case fp:o=11;break e;case pp:o=14;break e;case fi:o=16,i=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Er(t,e,n,i){return t=Yt(7,t,i,e),t.lanes=n,t}function Lc(t,e,n,i){return t=Yt(22,t,i,e),t.elementType=Cw,t.lanes=n,t.stateNode={isHidden:!1},t}function id(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function rd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fh(0),this.expirationTimes=Fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qp(t,e,n,i,r,s,o,a,l){return t=new Lb(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(s),t}function Fb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function wT(t){if(!t)return Hi;t=t._reactInternals;e:{if(Fr(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Nt(n))return wE(t,n,e)}return e}function ET(t,e,n,i,r,s,o,a,l){return t=Qp(n,i,!0,t,r,s,o,a,l),t.context=wT(null),n=t.current,i=xt(),r=Mi(n),s=Kn(i,r),s.callback=e??null,Ri(n,s,r),t.current.lanes=r,Fa(t,r,i),Vt(t,i),t}function Fc(t,e,n,i){var r=e.current,s=xt(),o=Mi(r);return n=wT(n),e.context===null?e.context=n:e.pendingContext=n,e=Kn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ri(r,e,o),t!==null&&(fn(t,r,o,s),ru(t,r,o)),o}function Qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yp(t,e){py(t,e),(t=t.alternate)&&py(t,e)}function jb(){return null}var TT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xp(t){this._internalRoot=t}jc.prototype.render=Xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Fc(t,e,null,null)};jc.prototype.unmount=Xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cr(function(){Fc(null,t,null,null)}),e[Yn]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gi.length&&e!==0&&e<gi[n].priority;n++);gi.splice(n,0,t),n===0&&tE(t)}};function Jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gy(){}function Ub(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Qu(o);s.call(c)}}var o=ET(e,i,t,0,null,!1,!1,"",gy);return t._reactRootContainer=o,t[Yn]=o.current,fa(t.nodeType===8?t.parentNode:t),Cr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Qu(l);a.call(c)}}var l=Qp(t,0,!1,null,null,!1,!1,"",gy);return t._reactRootContainer=l,t[Yn]=l.current,fa(t.nodeType===8?t.parentNode:t),Cr(function(){Fc(e,l,n,i)}),l}function zc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Qu(o);a.call(l)}}Fc(e,o,t,r)}else o=Ub(n,e,t,r,i);return Qu(o)}Xw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(_p(e,n|1),Vt(e,Le()),!(le&6)&&(Ms=Le()+500,nr()))}break;case 13:Cr(function(){var i=Xn(t,1);if(i!==null){var r=xt();fn(i,t,1,r)}}),Yp(t,1)}};yp=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=xt();fn(e,t,134217728,n)}Yp(t,134217728)}};Jw=function(t){if(t.tag===13){var e=Mi(t),n=Xn(t,e);if(n!==null){var i=xt();fn(n,t,e,i)}Yp(t,e)}};Zw=function(){return ge};eE=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Wd=function(t,e,n){switch(e){case"input":if(Fd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Rc(i);if(!r)throw Error(j(90));Rw(i),Fd(i,r)}}}break;case"textarea":Mw(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};Uw=Wp;zw=Cr;var zb={usingClientEntryPoint:!1,Events:[Ua,ss,Rc,Fw,jw,Wp]},Eo={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bb={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hw(t),t===null?null:t.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{bc=Ml.inject(Bb),In=Ml}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zb;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jp(e))throw Error(j(200));return Fb(t,e,null,n)};$t.createRoot=function(t,e){if(!Jp(t))throw Error(j(299));var n=!1,i="",r=TT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Qp(t,1,!1,null,null,n,!1,i,r),t[Yn]=e.current,fa(t.nodeType===8?t.parentNode:t),new Xp(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Hw(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Cr(t)};$t.hydrate=function(t,e,n){if(!Uc(e))throw Error(j(200));return zc(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Jp(t))throw Error(j(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=TT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ET(e,null,t,1,n??null,r,!1,s,o),t[Yn]=e.current,fa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new jc(e)};$t.render=function(t,e,n){if(!Uc(e))throw Error(j(200));return zc(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Uc(t))throw Error(j(40));return t._reactRootContainer?(Cr(function(){zc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};$t.unstable_batchedUpdates=Wp;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Uc(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return zc(t,e,n,!1,i)};$t.version="18.3.1-next-f1338f8080-20240426";function ST(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ST)}catch(t){console.error(t)}}ST(),Sw.exports=$t;var $b=Sw.exports,my=$b;Rd.createRoot=my.createRoot,Rd.hydrateRoot=my.hydrateRoot;const _y=[{value:"done",label:""},{value:"not_done",label:""},{value:"na",label:""}],Hb=({assessorOptions:t,loading:e,onSave:n})=>{const[i,r]=q.useState(t.length?"select":"custom"),[s,o]=q.useState(""),[a,l]=q.useState(""),[c,h]=q.useState("done"),[d,p]=q.useState("done"),[m,v]=q.useState(""),[S,b]=q.useState(""),[w,_]=q.useState(""),[x,R]=q.useState(null),M=q.useMemo(()=>i==="select"?"":"",[i]),O=q.useMemo(()=>{const E=parseFloat(S),A=parseFloat(w);if(!E||!A)return null;const C=E/100;if(C<=0)return null;const P=A/(C*C);return Number.isFinite(P)?P:null},[S,w]),I=O!==null&&O<=18.5;q.useEffect(()=>{t.length&&!s&&o(t[0])},[t,s]);const y=async E=>{E.preventDefault(),R(null);const A=i==="select"?s:a.trim();if(!A){R("");return}const C={assessor:A,boneProtection:c,incontinenceCare:d,notes:m.trim(),assessmentDate:new Date().toISOString()};await n(C),v(""),h("done"),p("done"),b(""),_("")};return V.jsxs("form",{className:"card",onSubmit:y,children:[V.jsxs("section",{className:"card-section",children:[V.jsxs("div",{className:"section-header",children:[V.jsx("h2",{children:""}),V.jsxs("div",{className:"chip-group",children:[V.jsx("button",{type:"button",className:`chip ${i==="select"?"selected":""}`,onClick:()=>r("select"),disabled:!t.length,children:""}),V.jsx("button",{type:"button",className:`chip ${i==="custom"?"selected":""}`,onClick:()=>r("custom"),children:""})]})]}),i==="select"?V.jsxs("label",{className:"field",children:[V.jsx("span",{children:M}),V.jsxs("select",{value:s,onChange:E=>o(E.target.value),children:[V.jsx("option",{value:"",children:""}),t.map(E=>V.jsx("option",{value:E,children:E},E))]})]}):V.jsxs("label",{className:"field",children:[V.jsx("span",{children:M}),V.jsx("input",{type:"text",value:a,placeholder:"",onChange:E=>l(E.target.value),autoComplete:"name"})]})]}),V.jsxs("section",{className:"card-section",children:[V.jsx("h2",{children:""}),V.jsxs("div",{className:"bmi-panel",children:[V.jsxs("div",{className:"field",children:[V.jsx("span",{children:" (cm)"}),V.jsx("input",{type:"number",min:"0",step:"0.1",inputMode:"decimal",value:S,onChange:E=>b(E.target.value),placeholder:"160"})]}),V.jsxs("div",{className:"field",children:[V.jsx("span",{children:" (kg)"}),V.jsx("input",{type:"number",min:"0",step:"0.1",inputMode:"decimal",value:w,onChange:E=>_(E.target.value),placeholder:"45.5"})]}),O!==null&&V.jsxs("div",{className:"bmi-result",children:[V.jsxs("p",{children:["BMI: ",V.jsx("strong",{children:O.toFixed(1)})]}),V.jsx("span",{className:`bmi-flag ${I?"alert":"muted"}`,children:I?"":""})]})]}),V.jsxs("div",{className:"field",children:[V.jsxs("div",{className:"field-label",children:[V.jsx("strong",{children:"A. /"}),V.jsx("p",{children:""})]}),V.jsx("div",{className:"status-options",children:_y.map(E=>V.jsxs("label",{children:[V.jsx("input",{type:"radio",name:"boneProtection",value:E.value,checked:c===E.value,onChange:()=>h(E.value)}),E.label]},E.value))})]}),V.jsxs("div",{className:"field",children:[V.jsxs("div",{className:"field-label",children:[V.jsx("strong",{children:"B. "}),V.jsx("p",{children:""})]}),V.jsx("div",{className:"status-options",children:_y.map(E=>V.jsxs("label",{children:[V.jsx("input",{type:"radio",name:"incontinenceCare",value:E.value,checked:d===E.value,onChange:()=>p(E.value)}),E.label]},E.value))})]}),V.jsxs("label",{className:"field",children:[V.jsx("span",{children:"C. "}),V.jsx("textarea",{rows:4,value:m,onChange:E=>v(E.target.value),placeholder:""})]})]}),x&&V.jsx("p",{className:"error",children:x}),V.jsx("button",{type:"submit",className:"primary",disabled:e,children:e?"...":""})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ba(t){return t+.5|0}const Si=(t,e,n)=>Math.max(Math.min(t,n),e);function Ro(t){return Si(Ba(t*2.55),0,255)}function Ni(t){return Si(Ba(t*255),0,255)}function zn(t){return Si(Ba(t/2.55)/100,0,1)}function yy(t){return Si(Ba(t*100),0,100)}const Wt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xf=[..."0123456789ABCDEF"],Wb=t=>xf[t&15],qb=t=>xf[(t&240)>>4]+xf[t&15],Ol=t=>(t&240)>>4===(t&15),Kb=t=>Ol(t.r)&&Ol(t.g)&&Ol(t.b)&&Ol(t.a);function Gb(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Wt[t[1]]*17,g:255&Wt[t[2]]*17,b:255&Wt[t[3]]*17,a:e===5?Wt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Wt[t[1]]<<4|Wt[t[2]],g:Wt[t[3]]<<4|Wt[t[4]],b:Wt[t[5]]<<4|Wt[t[6]],a:e===9?Wt[t[7]]<<4|Wt[t[8]]:255})),n}const Qb=(t,e)=>t<255?e(t):"";function Yb(t){var e=Kb(t)?Wb:qb;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Qb(t.a,e):void 0}const Xb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IT(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Jb(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Zb(t,e,n){const i=IT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function ek(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Zp(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=ek(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function eg(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ni)}function tg(t,e,n){return eg(IT,t,e,n)}function tk(t,e,n){return eg(Zb,t,e,n)}function nk(t,e,n){return eg(Jb,t,e,n)}function xT(t){return(t%360+360)%360}function ik(t){const e=Xb.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ro(+e[5]):Ni(+e[5]));const r=xT(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=tk(r,s,o):e[1]==="hsv"?i=nk(r,s,o):i=tg(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function rk(t,e){var n=Zp(t);n[0]=xT(n[0]+e),n=tg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function sk(t){if(!t)return;const e=Zp(t),n=e[0],i=yy(e[1]),r=yy(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${zn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const vy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ok(){const t={},e=Object.keys(wy),n=Object.keys(vy);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,vy[s]);s=parseInt(wy[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Nl;function ak(t){Nl||(Nl=ok(),Nl.transparent=[0,0,0,0]);const e=Nl[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const lk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function uk(t){const e=lk.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ro(o):Si(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ro(i):Si(i,0,255)),r=255&(e[4]?Ro(r):Si(r,0,255)),s=255&(e[6]?Ro(s):Si(s,0,255)),{r:i,g:r,b:s,a:n}}}function ck(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${zn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const sd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Gr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function hk(t,e,n){const i=Gr(zn(t.r)),r=Gr(zn(t.g)),s=Gr(zn(t.b));return{r:Ni(sd(i+n*(Gr(zn(e.r))-i))),g:Ni(sd(r+n*(Gr(zn(e.g))-r))),b:Ni(sd(s+n*(Gr(zn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Vl(t,e,n){if(t){let i=Zp(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=tg(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function AT(t,e){return t&&Object.assign(e||{},t)}function Ey(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ni(t[3]))):(e=AT(t,{r:0,g:0,b:0,a:1}),e.a=Ni(e.a)),e}function dk(t){return t.charAt(0)==="r"?uk(t):ik(t)}class Ta{constructor(e){if(e instanceof Ta)return e;const n=typeof e;let i;n==="object"?i=Ey(e):n==="string"&&(i=Gb(e)||ak(e)||dk(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=AT(this._rgb);return e&&(e.a=zn(e.a)),e}set rgb(e){this._rgb=Ey(e)}rgbString(){return this._valid?ck(this._rgb):void 0}hexString(){return this._valid?Yb(this._rgb):void 0}hslString(){return this._valid?sk(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=hk(this._rgb,e._rgb,n)),this}clone(){return new Ta(this.rgb)}alpha(e){return this._rgb.a=Ni(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ba(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vl(this._rgb,2,e),this}darken(e){return Vl(this._rgb,2,-e),this}saturate(e){return Vl(this._rgb,1,e),this}desaturate(e){return Vl(this._rgb,1,-e),this}rotate(e){return rk(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Vn(){}const fk=(()=>{let t=0;return()=>t++})();function we(t){return t==null}function We(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ue(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function tn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _n(t,e){return tn(t)?t:e}function ae(t,e){return typeof t>"u"?e:t}const pk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,bT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function be(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pe(t,e,n,i){let r,s,o;if(We(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ue(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Yu(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Xu(t){if(We(t))return t.map(Xu);if(ue(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Xu(t[n[r]]);return e}return t}function kT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function gk(t,e,n,i){if(!kT(t))return;const r=e[t],s=n[t];ue(r)&&ue(s)?Sa(r,s,i):e[t]=Xu(s)}function Sa(t,e,n){const i=We(e)?e:[e],r=i.length;if(!ue(t))return t;n=n||{};const s=n.merger||gk;let o;for(let a=0;a<r;++a){if(o=i[a],!ue(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Qo(t,e){return Sa(t,e,{merger:mk})}function mk(t,e,n){if(!kT(t))return;const i=e[t],r=n[t];ue(i)&&ue(r)?Qo(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Xu(r))}const Ty={"":t=>t,x:t=>t.x,y:t=>t.y};function _k(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function yk(t){const e=_k(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Pr(t,e){return(Ty[e]||(Ty[e]=yk(e)))(t)}function ng(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ia=t=>typeof t<"u",Wi=t=>typeof t=="function",Sy=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function vk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ve=Math.PI,Be=2*ve,Ju=Number.POSITIVE_INFINITY,wk=ve/180,Ke=ve/2,lr=ve/4,Iy=ve*2/3,CT=Math.log10,Vi=Math.sign;function hu(t,e,n){return Math.abs(t-e)<n}function xy(t){const e=Math.round(t);t=hu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(CT(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Ek(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function Tk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Zu(t){return!Tk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Sk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Ik(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hn(t){return t*(ve/180)}function xk(t){return t*(180/ve)}function Ay(t){if(!tn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function PT(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ve&&(s+=Be),{angle:s,distance:r}}function Ak(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function En(t){return(t%Be+Be)%Be}function ec(t,e,n,i){const r=En(t),s=En(e),o=En(n),a=En(s-r),l=En(o-r),c=En(r-s),h=En(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function Mt(t,e,n){return Math.max(e,Math.min(n,t))}function bk(t){return Mt(t,-32768,32767)}function yr(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function ig(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Af=(t,e,n,i)=>ig(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),kk=(t,e,n)=>ig(t,n,i=>t[i][e]>=n);function Ck(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const RT=["push","pop","shift","splice","unshift"];function Pk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),RT.forEach(n=>{const i="_onData"+ng(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function by(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(RT.forEach(s=>{delete t[s]}),delete t._chartjs)}function DT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const MT=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function OT(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,MT.call(window,()=>{i=!1,t.apply(e,n)}))}}function Rk(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const rg=t=>t==="start"?"left":t==="end"?"right":"center",pt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Dk=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,Ll=t=>t===0||t===1,ky=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Be/n)),Cy=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Be/n)+1,Yo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ke)+1,easeOutSine:t=>Math.sin(t*Ke),easeInOutSine:t=>-.5*(Math.cos(ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ll(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ll(t)?t:ky(t,.075,.3),easeOutElastic:t=>Ll(t)?t:Cy(t,.075,.3),easeInOutElastic(t){return Ll(t)?t:t<.5?.5*ky(t*2,.1125,.45):.5+.5*Cy(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Yo.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Yo.easeInBounce(t*2)*.5:Yo.easeOutBounce(t*2-1)*.5+.5};function NT(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Py(t){return NT(t)?t:new Ta(t)}function od(t){return NT(t)?t:new Ta(t).saturate(.5).darken(.1).hexString()}const Mk=["x","y","borderWidth","radius","tension"],Ok=["color","borderColor","backgroundColor"];function Nk(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Ok},numbers:{type:"number",properties:Mk}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Vk(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ry=new Map;function Lk(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Ry.get(n);return i||(i=new Intl.NumberFormat(t,e),Ry.set(n,i)),i}function sg(t,e,n){return Lk(e,n).format(t)}const Fk={values(t){return We(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=jk(t,n)}const o=CT(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),sg(t,i,l)}};function jk(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var VT={formatters:Fk};function Uk(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:VT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Rr=Object.create(null),bf=Object.create(null);function Xo(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function ad(t,e,n){return typeof e=="string"?Sa(Xo(t,e),n):Sa(Xo(t,""),e)}class zk{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>od(r.backgroundColor),this.hoverBorderColor=(i,r)=>od(r.borderColor),this.hoverColor=(i,r)=>od(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ad(this,e,n)}get(e){return Xo(this,e)}describe(e,n){return ad(bf,e,n)}override(e,n){return ad(Rr,e,n)}route(e,n,i,r){const s=Xo(this,e),o=Xo(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ue(l)?Object.assign({},c,l):ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new zk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Nk,Vk,Uk]);function Bk(t){return!t||we(t.size)||we(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Dy(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function ur(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function My(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Oy(t,e,n,i){LT(t,e,n,i,null)}function LT(t,e,n,i,r){let s,o,a,l,c,h,d,p;const m=e.pointStyle,v=e.rotation,S=e.radius;let b=(v||0)*wk;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,S,0,0,Be):t.arc(n,i,S,0,Be),t.closePath();break;case"triangle":h=r?r/2:S,t.moveTo(n+Math.sin(b)*h,i-Math.cos(b)*S),b+=Iy,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*S),b+=Iy,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*S),t.closePath();break;case"rectRounded":c=S*.516,l=S-c,o=Math.cos(b+lr)*l,d=Math.cos(b+lr)*(r?r/2-c:l),a=Math.sin(b+lr)*l,p=Math.sin(b+lr)*(r?r/2-c:l),t.arc(n-d,i-a,c,b-ve,b-Ke),t.arc(n+p,i-o,c,b-Ke,b),t.arc(n+d,i+a,c,b,b+Ke),t.arc(n-p,i+o,c,b+Ke,b+ve),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*S,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}b+=lr;case"rectRot":d=Math.cos(b)*(r?r/2:S),o=Math.cos(b)*S,a=Math.sin(b)*S,p=Math.sin(b)*(r?r/2:S),t.moveTo(n-d,i-a),t.lineTo(n+p,i-o),t.lineTo(n+d,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":b+=lr;case"cross":d=Math.cos(b)*(r?r/2:S),o=Math.cos(b)*S,a=Math.sin(b)*S,p=Math.sin(b)*(r?r/2:S),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":d=Math.cos(b)*(r?r/2:S),o=Math.cos(b)*S,a=Math.sin(b)*S,p=Math.sin(b)*(r?r/2:S),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),b+=lr,d=Math.cos(b)*(r?r/2:S),o=Math.cos(b)*S,a=Math.sin(b)*S,p=Math.sin(b)*(r?r/2:S),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=r?r/2:Math.cos(b)*S,a=Math.sin(b)*S,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(b)*(r?r/2:S),i+Math.sin(b)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function FT(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function og(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ag(t){t.restore()}function $k(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),we(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Hk(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function Wk(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function xa(t,e,n,i,r,s={}){const o=We(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,$k(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Wk(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),we(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Hk(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function tc(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ve,ve,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ve,Ke,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ke,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ke,!0),t.lineTo(n+o.topLeft,i)}const qk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Gk(t,e){const n=(""+t).match(qk);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Qk=t=>+t||0;function lg(t,e){const n={},i=ue(e),r=i?Object.keys(e):e,s=ue(t)?i?o=>ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Qk(s(o));return n}function jT(t){return lg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function vs(t){return lg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nn(t){const e=jT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yt(t,e){t=t||{},e=e||Fe.font;let n=ae(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ae(t.style,e.style);i&&!(""+i).match(Kk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ae(t.family,e.family),lineHeight:Gk(ae(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ae(t.weight,e.weight),string:""};return r.string=Bk(r),r}function Fl(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Yk(t,e,n){const{min:i,max:r}=t,s=bT(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Hs(t,e){return Object.assign(Object.create(t),e)}function ug(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=$T("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ug([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return zT(a,l,()=>rC(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Vy(a).includes(l)},ownKeys(a){return Vy(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Os(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:UT(t,i),setContext:s=>Os(t,s,n,i),override:s=>Os(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return zT(s,o,()=>Jk(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function UT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Wi(n)?n:()=>n,isIndexable:Wi(i)?i:()=>i}}const Xk=(t,e)=>t?t+ng(e):e,cg=(t,e)=>ue(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function zT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Jk(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Wi(a)&&o.isScriptable(e)&&(a=Zk(e,a,t,n)),We(a)&&a.length&&(a=eC(e,a,t,o.isIndexable)),cg(e,a)&&(a=Os(a,r,s&&s[e],o)),a}function Zk(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),cg(t,l)&&(l=hg(r._scopes,r,t,l)),l}function eC(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ue(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=hg(c,r,t,h);e.push(Os(d,s,o&&o[t],a))}}return e}function BT(t,e,n){return Wi(t)?t(e,n):t}const tC=(t,e)=>t===!0?e:typeof t=="string"?Pr(e,t):void 0;function nC(t,e,n,i,r){for(const s of e){const o=tC(n,s);if(o){t.add(o);const a=BT(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function hg(t,e,n,i){const r=e._rootScopes,s=BT(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Ny(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Ny(a,o,s,l,i),l===null)?!1:ug(Array.from(a),[""],r,s,()=>iC(e,n,i))}function Ny(t,e,n,i,r){for(;n;)n=nC(t,e,n,i,r);return n}function iC(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return We(r)&&ue(n)?n:r||{}}function rC(t,e,n,i){let r;for(const s of e)if(r=$T(Xk(s,t),n),typeof r<"u")return cg(t,r)?hg(n,i,t,r):r}function $T(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Vy(t){let e=t._keys;return e||(e=t._keys=sC(t._scopes)),e}function sC(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function dg(){return typeof window<"u"&&typeof document<"u"}function fg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function nc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Bc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function oC(t,e){return Bc(t).getPropertyValue(e)}const aC=["top","right","bottom","left"];function Tr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=aC[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const lC=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function uC(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(lC(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function fr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Bc(n),s=r.boxSizing==="border-box",o=Tr(r,"padding"),a=Tr(r,"border","width"),{x:l,y:c,box:h}=uC(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:v}=e;return s&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-p)/v*n.height/i)}}function cC(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&fg(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Bc(s),l=Tr(a,"border","width"),c=Tr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=nc(a.maxWidth,s,"clientWidth"),r=nc(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ju,maxHeight:r||Ju}}const Ii=t=>Math.round(t*10)/10;function hC(t,e,n,i){const r=Bc(t),s=Tr(r,"margin"),o=nc(r.maxWidth,t,"clientWidth")||Ju,a=nc(r.maxHeight,t,"clientHeight")||Ju,l=cC(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const p=Tr(r,"border","width"),m=Tr(r,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=Ii(Math.min(c,o,l.maxWidth)),h=Ii(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ii(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Ii(Math.floor(h*i))),{width:c,height:h}}function Ly(t,e,n){const i=e||1,r=Ii(t.height*i),s=Ii(t.width*i);t.height=Ii(t.height),t.width=Ii(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const dC=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Fy(t,e){const n=oC(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const fC=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},pC=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ws(t,e,n){return t?fC(e,n):pC()}function HT(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function WT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function jl(t,e,n){return t.options.clip?t[n]:e[n]}function gC(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:jl(n,e,"left"),right:jl(n,e,"right"),top:jl(i,e,"top"),bottom:jl(i,e,"bottom")}:e}function mC(t,e){const n=e._clip;if(n.disabled)return!1;const i=gC(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _C{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ln=new _C;const jy="transparent",yC={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Py(t||jy),r=i.valid&&Py(e||jy);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class vC{constructor(e,n,i,r){const s=n[i];r=Fl([e.to,r,s,e.from]);const o=Fl([e.from,s,r]);this._active=!0,this._fn=e.fn||yC[e.type||typeof o],this._easing=Yo[e.easing]||Yo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Fl([e.to,n,r,e.from]),this._from=Fl([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class qT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ue(e))return;const n=Object.keys(Fe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const o={};for(const a of n)o[a]=s[a];(We(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=EC(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&wC(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=i.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new vC(p,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ln.add(this._chart,i),!0}}function wC(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function EC(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Uy(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function TC(t,e,n){if(n===!1)return!1;const i=Uy(t,n),r=Uy(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function SC(t){let e,n,i,r;return ue(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function KT(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function zy(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],tn(c)&&(s||e===0||Vi(e)===Vi(c))&&(e+=c)}return!h&&!i.all?0:e}function IC(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function ld(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function xC(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function AC(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function bC(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function By(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function $y(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=xC(s,o,i),d=e.length;let p;for(let m=0;m<d;++m){const v=e[m],{[l]:S,[c]:b}=v,w=v._stacks||(v._stacks={});p=w[c]=bC(r,h,S),p[a]=b,p._top=By(p,o,!0,i.type),p._bottom=By(p,o,!1,i.type);const _=p._visualValues||(p._visualValues={});_[a]=b}}function ud(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function kC(t,e){return Hs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function CC(t,e,n){return Hs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function To(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const cd=t=>t==="reset"||t==="none",Hy=(t,e)=>e?t:Object.assign({},t),PC=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:KT(n,!0),values:null};class Es{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ld(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&To(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,p,m,v)=>d==="x"?p:d==="r"?v:m,s=n.xAxisID=ae(i.xAxisID,ud(e,"x")),o=n.yAxisID=ae(i.yAxisID,ud(e,"y")),a=n.rAxisID=ae(i.rAxisID,ud(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&by(this._data,this),e._stacked&&To(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ue(n)){const r=this._cachedMeta;this._data=IC(n,r)}else if(i!==n){if(i){by(i,this);const r=this._cachedMeta;To(r),r._parsed=[]}n&&Object.isExtensible(n)&&Pk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=ld(n.vScale,n),n.stack!==i.stack&&(r=!0,To(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&($y(this,n._parsed),n._stacked=ld(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,p;if(this._parsing===!1)i._parsed=r,i._sorted=!0,p=r;else{We(r[e])?p=this.parseArrayData(i,r,e,n):ue(r[e])?p=this.parseObjectData(i,r,e,n):p=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=p[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&$y(this,p)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let p,m,v;for(p=0,m=r;p<m;++p)v=p+i,d[p]={[a]:h||s.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,p,m;for(h=0,d=r;h<d;++h)p=h+i,m=n[p],c[h]={x:s.parse(Pr(m,a),p),y:o.parse(Pr(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:KT(r,!0),values:n._stacks[e.axis]._visualValues};return zy(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=zy(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=PC(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=AC(a);let p,m;function v(){m=r[p];const S=m[a.axis];return!tn(m[e.axis])||h>S||d<S}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],tn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=SC(ae(this.options.clip,TC(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=CC(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=kC(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Ia(i);if(a)return Hy(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Fe.elements[e]),v=()=>this.getContext(i,r,n),S=c.resolveNamedOptions(p,m,v,d);return S.$shared&&(S.$shared=l,s[o]=Object.freeze(Hy(S,l))),S}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,i,n))}const c=new qT(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||cd(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){cd(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!cd(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&To(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(Es,"defaults",{}),Y(Es,"datasetElementType",null),Y(Es,"dataElementType",null);function RC(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=DT(i.sort((r,s)=>r-s))}return t._cache.$bar}function DC(t){const e=t.iScale,n=RC(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Ia(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function MC(t,e,n,i){const r=n.barThickness;let s,o;return we(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function OC(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function NC(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function GT(t,e,n,i){return We(t)?NC(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Wy(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,d,p;for(c=n,h=n+i;c<h;++c)p=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(GT(p,d,s,c));return l}function hd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function VC(t,e,n){return t!==0?Vi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function LC(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function FC(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=LC(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[qy(h,o,a,l)]=!0,r=c)),s[qy(r,o,a,l)]=!0,t.borderSkipped=s}function qy(t,e,n,i){return i?(t=jC(t,e,n),t=Ky(t,n,e)):t=Ky(t,e,n),t}function jC(t,e,n){return t===e?n:t===n?e:t}function Ky(t,e,n){return t==="start"?e:t==="end"?n:t}function UC(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class du extends Es{parsePrimitiveData(e,n,i,r){return Wy(e,n,i,r)}parseArrayData(e,n,i,r){return Wy(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let p,m,v,S;for(p=i,m=i+r;p<m;++p)S=n[p],v={},v[s.axis]=s.parse(Pr(S,c),p),d.push(GT(Pr(S,h),v,o,p));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=hd(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,r);for(let m=n;m<n+i;m++){const v=this.getParsed(m),S=s||we(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,h),w=(v._stacks||{})[a.axis],_={horizontal:c,base:S.base,enableBorderRadius:!w||hd(v._custom)||o===w._top||o===w._bottom,x:c?S.head:b.center,y:c?b.center:S.head,height:c?b.size:Math.abs(S.size),width:c?Math.abs(S.size):b.size};p&&(_.options=d||this.resolveDataElementOptions(m,e[m].active?"active":r));const x=_.options||e[m].options;FC(_,x,w,o),UC(_,x,h.ratio),this.updateElement(e[m],m,_,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(m=>m[i.axis]===l),p=d&&d[h.vScale.axis];if(we(p)||isNaN(p))return!0};for(const h of r)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[ae(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||DC(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=hd(c);let d=l[n.axis],p=0,m=i?this.applyStack(n,l,i):d,v,S;m!==d&&(p=m-d,m=d),h&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&Vi(d)!==Vi(c.barEnd)&&(p=0),p+=d);const b=!we(s)&&!h?s:p;let w=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(p+m):v=w,S=v-w,Math.abs(S)<o){S=VC(S,n,a)*o,d===a&&(w-=S/2);const _=n.getPixelForDecimal(0),x=n.getPixelForDecimal(1),R=Math.min(_,x),M=Math.max(_,x);w=Math.max(Math.min(w,M),R),v=w+S,i&&!h&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const _=Vi(S)*n.getLineWidthForValue(a)/2;w+=_,S-=_}return{size:S,base:w,head:v,center:v+S/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=ae(r.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const h=s?this._getStackCount(e):n.stackCount,d=r.barThickness==="flex"?OC(e,n,r,h*c):MC(e,n,r,h*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ae(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=d.start+d.chunk*v+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}Y(du,"id","bar"),Y(du,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(du,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function zC(t,e,n){let i=1,r=1,s=0,o=0;if(e<Be){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),p=Math.sin(l),m=(x,R,M)=>ec(x,a,l,!0)?1:Math.max(R,R*n,M,M*n),v=(x,R,M)=>ec(x,a,l,!0)?-1:Math.min(R,R*n,M,M*n),S=m(0,c,d),b=m(Ke,h,p),w=v(ve,c,d),_=v(ve+Ke,h,p);i=(S-w)/2,r=(b-_)/2,s=-(S+w)/2,o=-(b+_)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Do extends Es{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(ue(i[e])){const{key:l="value"}=this._parsing;s=c=>+Pr(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Hn(this.options.rotation-90)}_getCircumference(){return Hn(this.options.circumference)}_getRotationExtents(){let e=Be,n=-Be;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(pk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:S}=zC(d,h,l),b=(i.width-o)/p,w=(i.height-o)/m,_=Math.max(Math.min(b,w)/2,0),x=bT(this.options.radius,_),R=Math.max(x*l,0),M=(x-R)/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=S*x,r.total=this.calculateTotal(),this.outerRadius=x-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Be)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=s&&c.animateScale,m=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:S,includeOptions:b}=this._getSharedOptions(n,r);let w=this._getRotation(),_;for(_=0;_<n;++_)w+=this._circumference(_,s);for(_=n;_<n+i;++_){const x=this._circumference(_,s),R=e[_],M={x:h+this.offsetX,y:d+this.offsetY,startAngle:w,endAngle:w+x,circumference:x,outerRadius:v,innerRadius:m};b&&(M.options=S||this.resolveDataElementOptions(_,R.active?"active":r)),w+=x,this.updateElement(R,_,M,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Be*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=sg(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ae(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(Do,"id","doughnut"),Y(Do,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(Do,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(Do,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:i,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});function cr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pg{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(pg.prototype,e)}init(){}formats(){return cr()}parse(){return cr()}format(){return cr()}add(){return cr()}diff(){return cr()}startOf(){return cr()}endOf(){return cr()}}var BC={_date:pg};function $C(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?kk:Af;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),m=c(s,e,n+d);return{lo:p.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:p}=t,m=p.slice(0,h.lo+1).reverse().findIndex(S=>!we(S[d.axis]));h.lo-=Math.max(0,m);const v=p.slice(h.hi).findIndex(S=>!we(S[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function $c(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=$C(s[a],e,o,r);for(let m=d;m<=p;++m){const v=h[m];v.skip||i(v,c,m)}}}function HC(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function dd(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||$c(t,n,e,function(a,l,c){!r&&!FT(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function WC(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=PT(o,{x:e.x,y:e.y});ec(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return $c(t,n,e,s),r}function qC(t,e,n,i,r,s){let o=[];const a=HC(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!m)return;const b=a(e,v);b<l?(o=[{element:h,datasetIndex:d,index:p}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:p})}return $c(t,n,e,c),o}function fd(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?WC(t,e,n,r):qC(t,e,n,i,r,s)}function Gy(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $c(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var KC={modes:{index(t,e,n,i){const r=fr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?dd(t,r,s,i,o):fd(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?dd(t,r,s,i,o):fd(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return dd(t,r,s,i,o)},nearest(t,e,n,i){const r=fr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return fd(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=fr(e,t);return Gy(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=fr(e,t);return Gy(t,r,"y",n.intersect,i)}}};const QT=["left","top","right","bottom"];function So(t,e){return t.filter(n=>n.pos===e)}function Qy(t,e){return t.filter(n=>QT.indexOf(n.pos)===-1&&n.box.axis===e)}function Io(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function GC(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function QC(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!QT.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function YC(t,e){const n=QC(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function XC(t){const e=GC(t),n=Io(e.filter(c=>c.box.fullSize),!0),i=Io(So(e,"left"),!0),r=Io(So(e,"right")),s=Io(So(e,"top"),!0),o=Io(So(e,"bottom")),a=Qy(e,"x"),l=Qy(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:So(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Yy(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function YT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function JC(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ue(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&YT(o,s.getPadding());const a=Math.max(0,e.outerWidth-Yy(o,t,"left","right")),l=Math.max(0,e.outerHeight-Yy(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function ZC(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function eP(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Mo(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,eP(a.horizontal,e));const{same:d,other:p}=JC(e,n,a,i);c|=d&&r.length,h=h||p,l.fullSize||r.push(a)}return c&&Mo(r,e,n,i)||h}function Ul(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Xy(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;Ia(c.start)&&(o=c.start),l.fullSize?Ul(l,r.left,o,n.outerWidth-r.right-r.left,p):Ul(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;Ia(c.start)&&(s=c.start),l.fullSize?Ul(l,s,r.top,p,n.outerHeight-r.bottom-r.top):Ul(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Xt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=nn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=XC(t.boxes),l=a.vertical,c=a.horizontal;pe(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const h=l.reduce((S,b)=>b.box.options&&b.box.options.display===!1?S:S+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);YT(p,nn(i));const m=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),v=YC(l.concat(c),d);Mo(a.fullSize,m,d,v),Mo(l,m,d,v),Mo(c,m,d,v)&&Mo(l,m,d,v),ZC(m),Xy(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,Xy(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},pe(a.chartArea,S=>{const b=S.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class XT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class tP extends XT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fu="$chartjs",nP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jy=t=>t===null||t==="";function iP(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[fu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Jy(r)){const s=Fy(t,"width");s!==void 0&&(t.width=s)}if(Jy(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Fy(t,"height");s!==void 0&&(t.height=s)}return t}const JT=dC?{passive:!0}:!1;function rP(t,e,n){t&&t.addEventListener(e,n,JT)}function sP(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,JT)}function oP(t,e){const n=nP[t.type]||t.type,{x:i,y:r}=fr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function ic(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function aP(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ic(a.addedNodes,i),o=o&&!ic(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function lP(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ic(a.removedNodes,i),o=o&&!ic(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Aa=new Map;let Zy=0;function ZT(){const t=window.devicePixelRatio;t!==Zy&&(Zy=t,Aa.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function uP(t,e){Aa.size||window.addEventListener("resize",ZT),Aa.set(t,e)}function cP(t){Aa.delete(t),Aa.size||window.removeEventListener("resize",ZT)}function hP(t,e,n){const i=t.canvas,r=i&&fg(i);if(!r)return;const s=OT((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),uP(t,s),o}function pd(t,e,n){n&&n.disconnect(),e==="resize"&&cP(t)}function dP(t,e,n){const i=t.canvas,r=OT(s=>{t.ctx!==null&&n(oP(s,t))},t);return rP(i,e,r),r}class fP extends XT{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(iP(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[fu])return!1;const i=n[fu].initial;["height","width"].forEach(s=>{const o=i[s];we(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[fu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:aP,detach:lP,resize:hP}[n]||dP;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:pd,detach:pd,resize:pd}[n]||sP)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return hC(e,n,i,r)}isAttached(e){const n=e&&fg(e);return!!(n&&n.isConnected)}}function pP(t){return!dg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tP:fP}class Zn{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Zu(this.x)&&Zu(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Y(Zn,"defaults",{}),Y(Zn,"defaultRoutes");function gP(t,e){const n=t.options.ticks,i=mP(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?yP(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return vP(e,c,s,o/r),c;const h=_P(s,e,r);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(zl(e,c,h,we(m)?0:a-m,a),d=0,p=o-1;d<p;d++)zl(e,c,h,s[d],s[d+1]);return zl(e,c,h,l,we(m)?e.length:l+m),c}return zl(e,c,h),c}function mP(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function _P(t,e,n){const i=wP(t),r=e.length/n;if(!i)return Math.max(r,1);const s=Ek(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function yP(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function vP(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function zl(t,e,n,i,r){const s=ae(i,0),o=Math.min(ae(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function wP(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const EP=t=>t==="left"?"right":t==="right"?"left":t,ev=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,tv=(t,e)=>Math.min(e||t,t);function nv(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function TP(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function SP(t,e){pe(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function xo(t){return t.drawTicks?t.tickLength:0}function iv(t,e){if(!t.display)return 0;const n=yt(t.font,e),i=nn(t.padding);return(We(t.text)?t.text.length:1)*n.lineHeight+i.height}function IP(t,e){return Hs(t,{scale:e,type:"scale"})}function xP(t,e,n){return Hs(t,{tick:n,index:e,type:"tick"})}function AP(t,e,n){let i=rg(t);return(n&&e!=="right"||!n&&e==="right")&&(i=EP(i)),i}function bP(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,m,v;const S=o-r,b=a-s;if(t.isHorizontal()){if(m=pt(i,s,a),ue(n)){const w=Object.keys(n)[0],_=n[w];v=h[w].getPixelForValue(_)+S-e}else n==="center"?v=(c.bottom+c.top)/2+S-e:v=ev(t,n,e);p=a-s}else{if(ue(n)){const w=Object.keys(n)[0],_=n[w];m=h[w].getPixelForValue(_)-b+e}else n==="center"?m=(c.left+c.right)/2-b+e:m=ev(t,n,e);v=pt(i,o,r),d=n==="left"?-Ke:Ke}return{titleX:m,titleY:v,maxWidth:p,rotation:d}}class Ws extends Zn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=_n(e,Number.POSITIVE_INFINITY),n=_n(n,Number.NEGATIVE_INFINITY),i=_n(i,Number.POSITIVE_INFINITY),r=_n(r,Number.NEGATIVE_INFINITY),{min:_n(e,i),max:_n(n,r),minDefined:tn(e),maxDefined:tn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:_n(n,_n(i,n)),max:_n(i,_n(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yk(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?nv(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=gP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=be(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=tv(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=Mt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-xo(e.grid)-n.padding-iv(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=xk(Math.min(Math.asin(Mt((h.highest.height+6)/a,-1,1)),Math.asin(Mt(l/c,-1,1))-Math.asin(Mt(p/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=iv(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=xo(s)+l):(e.height=this.maxHeight,e.width=xo(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),m=i.padding*2,v=Hn(this.labelRotation),S=Math.cos(v),b=Math.sin(v);if(a){const w=i.mirror?0:b*d.width+S*p.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=i.mirror?0:S*d.width+b*p.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,h,b,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=r*e.width,m=i*n.height):(p=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)we(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=nv(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/tv(n,i));let c=0,h=0,d,p,m,v,S,b,w,_,x,R,M;for(d=0;d<n;d+=l){if(v=e[d].label,S=this._resolveTickFontOptions(d),r.font=b=S.string,w=s[b]=s[b]||{data:{},gc:[]},_=S.lineHeight,x=R=0,!we(v)&&!We(v))x=Dy(r,w.data,w.gc,x,v),R=_;else if(We(v))for(p=0,m=v.length;p<m;++p)M=v[p],!we(M)&&!We(M)&&(x=Dy(r,w.data,w.gc,x,M),R+=_);o.push(x),a.push(R),c=Math.max(x,c),h=Math.max(R,h)}SP(s,n);const O=o.indexOf(c),I=a.indexOf(h),y=E=>({width:o[E]||0,height:a[E]||0});return{first:y(0),last:y(n-1),widest:y(O),highest:y(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bk(this._alignToPixels?ur(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=xP(this.getContext(),e,i))}return this.$context||(this.$context=IP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=xo(s),m=[],v=a.setContext(this.getContext()),S=v.display?v.width:0,b=S/2,w=function(de){return ur(i,de,S)};let _,x,R,M,O,I,y,E,A,C,P,k;if(o==="top")_=w(this.bottom),I=this.bottom-p,E=_-b,C=w(e.top)+b,k=e.bottom;else if(o==="bottom")_=w(this.top),C=e.top,k=w(e.bottom)-b,I=_+b,E=this.top+p;else if(o==="left")_=w(this.right),O=this.right-p,y=_-b,A=w(e.left)+b,P=e.right;else if(o==="right")_=w(this.left),A=e.left,P=w(e.right)-b,O=_+b,y=this.left+p;else if(n==="x"){if(o==="center")_=w((e.top+e.bottom)/2+.5);else if(ue(o)){const de=Object.keys(o)[0],he=o[de];_=w(this.chart.scales[de].getPixelForValue(he))}C=e.top,k=e.bottom,I=_+b,E=I+p}else if(n==="y"){if(o==="center")_=w((e.left+e.right)/2);else if(ue(o)){const de=Object.keys(o)[0],he=o[de];_=w(this.chart.scales[de].getPixelForValue(he))}O=_-b,y=O-p,A=e.left,P=e.right}const Ee=ae(r.ticks.maxTicksLimit,d),ne=Math.max(1,Math.ceil(d/Ee));for(x=0;x<d;x+=ne){const de=this.getContext(x),he=s.setContext(de),U=a.setContext(de),W=he.lineWidth,Q=he.color,me=U.dash||[],se=U.dashOffset,_e=he.tickWidth,Ze=he.tickColor,Et=he.tickBorderDash||[],et=he.tickBorderDashOffset;R=TP(this,x,l),R!==void 0&&(M=ur(i,R,W),c?O=y=A=P=M:I=E=C=k=M,m.push({tx1:O,ty1:I,tx2:y,ty2:E,x1:A,y1:C,x2:P,y2:k,width:W,color:Q,borderDash:me,borderDashOffset:se,tickWidth:_e,tickColor:Ze,tickBorderDash:Et,tickBorderDashOffset:et}))}return this._ticksLength=d,this._borderValue=_,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=xo(i.grid),m=p+h,v=d?-h:m,S=-Hn(this.labelRotation),b=[];let w,_,x,R,M,O,I,y,E,A,C,P,k="middle";if(r==="top")O=this.bottom-v,I=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+v,I=this._getXAxisLabelAlignment();else if(r==="left"){const ne=this._getYAxisLabelAlignment(p);I=ne.textAlign,M=ne.x}else if(r==="right"){const ne=this._getYAxisLabelAlignment(p);I=ne.textAlign,M=ne.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(ue(r)){const ne=Object.keys(r)[0],de=r[ne];O=this.chart.scales[ne].getPixelForValue(de)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(ue(r)){const ne=Object.keys(r)[0],de=r[ne];M=this.chart.scales[ne].getPixelForValue(de)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const Ee=this._getLabelSizes();for(w=0,_=a.length;w<_;++w){x=a[w],R=x.label;const ne=s.setContext(this.getContext(w));y=this.getPixelForTick(w)+s.labelOffset,E=this._resolveTickFontOptions(w),A=E.lineHeight,C=We(R)?R.length:1;const de=C/2,he=ne.color,U=ne.textStrokeColor,W=ne.textStrokeWidth;let Q=I;o?(M=y,I==="inner"&&(w===_-1?Q=this.options.reverse?"left":"right":w===0?Q=this.options.reverse?"right":"left":Q="center"),r==="top"?c==="near"||S!==0?P=-C*A+A/2:c==="center"?P=-Ee.highest.height/2-de*A+A:P=-Ee.highest.height+A/2:c==="near"||S!==0?P=A/2:c==="center"?P=Ee.highest.height/2-de*A:P=Ee.highest.height-C*A,d&&(P*=-1),S!==0&&!ne.showLabelBackdrop&&(M+=A/2*Math.sin(S))):(O=y,P=(1-C)*A/2);let me;if(ne.showLabelBackdrop){const se=nn(ne.backdropPadding),_e=Ee.heights[w],Ze=Ee.widths[w];let Et=P-se.top,et=0-se.left;switch(k){case"middle":Et-=_e/2;break;case"bottom":Et-=_e;break}switch(I){case"center":et-=Ze/2;break;case"right":et-=Ze;break;case"inner":w===_-1?et-=Ze:w>0&&(et-=Ze/2);break}me={left:et,top:Et,width:Ze+se.width,height:_e+se.height,color:ne.backdropColor}}b.push({label:R,font:E,textOffset:P,options:{rotation:S,color:he,strokeColor:U,strokeWidth:W,textAlign:Q,textBaseline:k,translation:[M,O],backdrop:me}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=ur(e,this.left,o)-o/2,h=ur(e,this.right,a)+a/2,d=p=l):(d=ur(e,this.top,o)-o/2,p=ur(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&og(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;xa(i,c,0,h,l,a)}r&&ag(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=yt(i.font),o=nn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ue(n)?(l+=o.bottom,We(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=bP(this,l,n,a);xa(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:AP(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ae(e.grid&&e.grid.z,-1),r=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ws.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bl{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;PP(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,kP(e,o,i),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Fe[r]&&(delete Fe[r][i],this.override&&delete Rr[i])}}function kP(t,e,n){const i=Sa(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,i),t.defaultRoutes&&CP(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function CP(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(s,r,l,a)})}function PP(t){return"id"in t&&"defaults"in t}class RP{constructor(){this.controllers=new Bl(Es,"datasets",!0),this.elements=new Bl(Zn,"elements"),this.plugins=new Bl(Object,"plugins"),this.scales=new Bl(Ws,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):pe(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=ng(e);be(i["before"+r],[],i),n[e](i),be(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var wn=new RP;class DP{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(be(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){we(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ae(i.options&&i.options.plugins,{}),s=MP(i);return r===!1&&!n?[]:NP(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function MP(t){const e={},n=[],i=Object.keys(wn.plugins.items);for(let s=0;s<i.length;s++)n.push(wn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function OP(t,e){return!e&&t===!1?null:t===!0?{}:t}function NP(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=OP(i[l],r);c!==null&&s.push({plugin:a,options:VP(t.config,{plugin:a,local:n[l]},c,o)})}return s}function VP(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kf(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function LP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function FP(t,e){return t===e?"_index_":"_value_"}function rv(t){if(t==="x"||t==="y"||t==="r")return t}function jP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Cf(t,...e){if(rv(t))return t;for(const n of e){const i=n.axis||jP(n.position)||t.length>1&&rv(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function sv(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function UP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return sv(t,"x",n[0])||sv(t,"y",n[0])}return{}}function zP(t,e){const n=Rr[t.type]||{scales:{}},i=e.scales||{},r=kf(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Cf(o,a,UP(o,t),Fe.scales[a.type]),c=FP(l,r),h=n.scales||{};s[o]=Qo(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||kf(a,e),h=(Rr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=LP(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),Qo(s[m],[{axis:p},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Qo(a,[Fe.scales[a.type],Fe.scale])}),s}function eS(t){const e=t.options||(t.options={});e.plugins=ae(e.plugins,{}),e.scales=zP(t,e)}function tS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function BP(t){return t=t||{},t.data=tS(t.data),eS(t),t}const ov=new Map,nS=new Set;function $l(t,e){let n=ov.get(t);return n||(n=e(),ov.set(t,n),nS.add(n)),n}const Ao=(t,e,n)=>{const i=Pr(e,n);i!==void 0&&t.add(i)};class $P{constructor(e){this._config=BP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $l(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $l(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $l(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return $l(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Ao(l,e,d))),h.forEach(d=>Ao(l,r,d)),h.forEach(d=>Ao(l,Rr[s]||{},d)),h.forEach(d=>Ao(l,Fe,d)),h.forEach(d=>Ao(l,bf,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Rr[n]||{},Fe.datasets[n]||{},{type:n},Fe,bf]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=av(this._resolverCache,e,r);let l=o;if(WP(o,n)){s.$shared=!1,i=Wi(i)?i():i;const c=this.createResolver(e,i,a);l=Os(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=av(this._resolverCache,e,i);return ue(n)?Os(s,n,void 0,r):s}}function av(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:ug(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const HP=t=>ue(t)&&Object.getOwnPropertyNames(t).some(e=>Wi(t[e]));function WP(t,e){const{isScriptable:n,isIndexable:i}=UT(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Wi(a)||HP(a))||o&&We(a))return!0}return!1}var qP="4.5.1";const KP=["top","bottom","left","right","chartArea"];function lv(t,e){return t==="top"||t==="bottom"||KP.indexOf(t)===-1&&e==="x"}function uv(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function cv(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),be(n&&n.onComplete,[t],e)}function GP(t){const e=t.chart,n=e.options.animation;be(n&&n.onProgress,[t],e)}function iS(t){return dg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pu={},hv=t=>{const e=iS(t);return Object.values(pu).filter(n=>n.canvas===e).pop()};function QP(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function YP(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var di;let Hc=(di=class{static register(...e){wn.add(...e),dv()}static unregister(...e){wn.remove(...e),dv()}constructor(e,n){const i=this.config=new $P(n),r=iS(e),s=hv(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||pP(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=fk(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new DP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Rk(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],pu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ln.listen(this,"complete",cv),Ln.listen(this,"progress",GP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return we(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ly(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return My(this.canvas,this.ctx),this}stop(){return Ln.stop(this),this}resize(e,n){Ln.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ly(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pe(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Cf(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),pe(s,o=>{const a=o.options,l=a.id,c=Cf(l,a),h=ae(a.type,o.dtype);(a.position===void 0||lv(a.position,c)!==lv(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const p=wn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),pe(r,(o,a)=>{o||delete i[a]}),pe(i,o=>{Xt.configure(this,o,o.options),Xt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(uv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||kf(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=wn.getController(a),{datasetElementType:c,dataElementType:h}=Fe.datasets[a];Object.assign(l,{dataElementType:wn.getElement(h),datasetElementType:c&&wn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||pe(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(uv("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pe(this.scales,e=>{Xt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Sy(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;QP(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Sy(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],pe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Wi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ln.has(this)?this.attached&&!Ln.running(this)&&Ln.start(this):(this.draw(),cv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=mC(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&og(n,r),e.controller.draw(),r&&ag(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return FT(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=KC.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Hs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Ia(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ln.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),My(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete pu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};pe(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Yu(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=vk(e),c=YP(e,this._lastEvent,i,l);i&&(this._lastEvent=null,be(s.onHover,[e,a,this],this),l&&be(s.onClick,[e,a,this],this));const h=!Yu(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},Y(di,"defaults",Fe),Y(di,"instances",pu),Y(di,"overrides",Rr),Y(di,"registry",wn),Y(di,"version",qP),Y(di,"getChart",hv),di);function dv(){return pe(Hc.instances,t=>t._plugins.invalidate())}function XP(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,En(i-n));if(t.beginPath(),t.arc(r,s,o-c/2,i+d/2,n-d/2),a>0){const p=Math.min(c/a,En(i-n));t.arc(r,s,a+c/2,n-p/2,i+p/2,!0)}else{const p=Math.min(c/2,o*En(i-n));if(h==="round")t.arc(r,s,p,n-ve/2,i+ve/2,!0);else if(h==="bevel"){const m=2*p*p,v=-m*Math.cos(n+ve/2)+r,S=-m*Math.sin(n+ve/2)+s,b=m*Math.cos(i+ve/2)+r,w=m*Math.sin(i+ve/2)+s;t.lineTo(v,S),t.lineTo(b,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function JP(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ke,i-Ke),t.closePath(),t.clip()}function ZP(t){return lg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function eR(t,e,n,i){const r=ZP(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return Mt(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Mt(r.innerStart,0,o),innerEnd:Mt(r.innerEnd,0,o)}}function Qr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function rc(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+i+n-c,0),p=h>0?h+i+n+c:0;let m=0;const v=r-l;if(i){const ne=h>0?h-i:0,de=d>0?d-i:0,he=(ne+de)/2,U=he!==0?v*he/(he+i):v;m=(v-U)/2}const S=Math.max(.001,v*d-n/ve)/d,b=(v-S)/2,w=l+b+m,_=r-b-m,{outerStart:x,outerEnd:R,innerStart:M,innerEnd:O}=eR(e,p,d,_-w),I=d-x,y=d-R,E=w+x/I,A=_-R/y,C=p+M,P=p+O,k=w+M/C,Ee=_-O/P;if(t.beginPath(),s){const ne=(E+A)/2;if(t.arc(o,a,d,E,ne),t.arc(o,a,d,ne,A),R>0){const W=Qr(y,A,o,a);t.arc(W.x,W.y,R,A,_+Ke)}const de=Qr(P,_,o,a);if(t.lineTo(de.x,de.y),O>0){const W=Qr(P,Ee,o,a);t.arc(W.x,W.y,O,_+Ke,Ee+Math.PI)}const he=(_-O/p+(w+M/p))/2;if(t.arc(o,a,p,_-O/p,he,!0),t.arc(o,a,p,he,w+M/p,!0),M>0){const W=Qr(C,k,o,a);t.arc(W.x,W.y,M,k+Math.PI,w-Ke)}const U=Qr(I,w,o,a);if(t.lineTo(U.x,U.y),x>0){const W=Qr(I,E,o,a);t.arc(W.x,W.y,x,w-Ke,E)}}else{t.moveTo(o,a);const ne=Math.cos(E)*d+o,de=Math.sin(E)*d+a;t.lineTo(ne,de);const he=Math.cos(A)*d+o,U=Math.sin(A)*d+a;t.lineTo(he,U)}t.closePath()}function tR(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){rc(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Be||Be))}return rc(t,e,n,i,l,r),t.fill(),l}function nR(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:p,borderRadius:m}=l,v=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=p,v?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let S=e.endAngle;if(s){rc(t,e,n,i,S,r);for(let b=0;b<s;++b)t.stroke();isNaN(a)||(S=o+(a%Be||Be))}v&&JP(t,e,S),l.selfJoin&&S-o>=ve&&m===0&&h!=="miter"&&XP(t,e,S),s||(rc(t,e,n,i,S,r),t.stroke())}class Oo extends Zn{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=PT(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,v=ae(p,c-l),S=ec(o,l,c)&&l!==c,b=v>=Be||S,w=yr(a,h+m,d+m);return b&&w}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,p=(a+l+h+c)/2;return{x:i+Math.cos(d)*p,y:r+Math.sin(d)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Be?Math.floor(r/Be):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ve,r||0)),h=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,tR(n,this,h,o,a),nR(n,this,h,o,a),n.restore()}}Y(Oo,"id","arc"),Y(Oo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Y(Oo,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Oo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function rS(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,h=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function xi(t,e,n,i){return t?0:Mt(e,n,i)}function iR(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=jT(i);return{t:xi(r.top,s.top,0,n),r:xi(r.right,s.right,0,e),b:xi(r.bottom,s.bottom,0,n),l:xi(r.left,s.left,0,e)}}function rR(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=vs(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ue(r);return{topLeft:xi(!l||a.top||a.left,s.topLeft,0,o),topRight:xi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:xi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:xi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function sR(t){const e=rS(t),n=e.right-e.left,i=e.bottom-e.top,r=iR(t,n/2,i/2),s=rR(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function gd(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&rS(t,i);return a&&(r||yr(e,a.left,a.right))&&(s||yr(n,a.top,a.bottom))}function oR(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function aR(t,e){t.rect(e.x,e.y,e.w,e.h)}function md(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class gu extends Zn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=sR(this),a=oR(o.radius)?tc:aR;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,md(o,n,s)),e.clip(),a(e,md(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,md(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return gd(this,e,n,i)}inXRange(e,n){return gd(this,e,null,n)}inYRange(e,n){return gd(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(gu,"id","bar"),Y(gu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(gu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const fv=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},lR=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pv extends Zn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=be(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=yt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fv(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((v,S)=>{const b=i+n/2+s.measureText(v.text).width;(S===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(S>0?0:1)]=0,m+=h,p++),l[S]={left:0,top:m,row:p,width:b,height:r},c[c.length-1]+=b+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,m=0,v=0,S=0;return this.legendItems.forEach((b,w)=>{const{itemWidth:_,itemHeight:x}=uR(i,n,s,b,r);w>0&&m+x+2*a>h&&(d+=p+a,c.push({width:p,height:m}),v+=p+a,S++,p=m=0),l[w]={left:v,top:m,col:S,width:_,height:x},p=Math.max(p,_),m+=x+a}),d+=p,c.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ws(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=pt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=pt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;og(e,this),this._draw(),ag(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Fe.color,l=ws(e.rtl,this.left,this.width),c=yt(o.font),{padding:h}=o,d=c.size,p=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:S,itemHeight:b}=fv(o,d),w=function(O,I,y){if(isNaN(v)||v<=0||isNaN(S)||S<0)return;r.save();const E=ae(y.lineWidth,1);if(r.fillStyle=ae(y.fillStyle,a),r.lineCap=ae(y.lineCap,"butt"),r.lineDashOffset=ae(y.lineDashOffset,0),r.lineJoin=ae(y.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=ae(y.strokeStyle,a),r.setLineDash(ae(y.lineDash,[])),o.usePointStyle){const A={radius:S*Math.SQRT2/2,pointStyle:y.pointStyle,rotation:y.rotation,borderWidth:E},C=l.xPlus(O,v/2),P=I+p;LT(r,A,C,P,o.pointStyleWidth&&v)}else{const A=I+Math.max((d-S)/2,0),C=l.leftForLtr(O,v),P=vs(y.borderRadius);r.beginPath(),Object.values(P).some(k=>k!==0)?tc(r,{x:C,y:A,w:v,h:S,radius:P}):r.rect(C,A,v,S),r.fill(),E!==0&&r.stroke()}r.restore()},_=function(O,I,y){xa(r,y.text,O,I+b/2,c,{strikethrough:y.hidden,textAlign:l.textAlign(y.textAlign)})},x=this.isHorizontal(),R=this._computeTitleHeight();x?m={x:pt(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:pt(s,this.top+R+h,this.bottom-n[0].height),line:0},HT(this.ctx,e.textDirection);const M=b+h;this.legendItems.forEach((O,I)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const y=r.measureText(O.text).width,E=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),A=v+p+y;let C=m.x,P=m.y;l.setWidth(this.width),x?I>0&&C+A+h>this.right&&(P=m.y+=M,m.line++,C=m.x=pt(s,this.left+h,this.right-i[m.line])):I>0&&P+M>this.bottom&&(C=m.x=C+n[m.line].width+h,m.line++,P=m.y=pt(s,this.top+R+h,this.bottom-n[m.line].height));const k=l.x(C);if(w(k,P,O),C=Dk(E,C+v+p,x?C+A:this.right,e.rtl),_(l.x(C),P,O),x)m.x+=A+h;else if(typeof O.text!="string"){const Ee=c.lineHeight;m.y+=sS(O,Ee)+h}else m.y+=M}),WT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=yt(n.font),r=nn(n.padding);if(!n.display)return;const s=ws(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=pt(e.align,d,this.right-p);else{const v=this.columnSizes.reduce((S,b)=>Math.max(S,b.height),0);h=c+pt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=pt(a,d,d+p);o.textAlign=s.textAlign(rg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,xa(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=yt(e.font),i=nn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(yr(e,this.left,this.right)&&yr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],yr(e,r.left,r.left+r.width)&&yr(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!dR(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=lR(r,i);r&&!s&&be(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&be(n.onHover,[e,i,this],this)}else i&&be(n.onClick,[e,i,this],this)}}function uR(t,e,n,i,r){const s=cR(i,t,e,n),o=hR(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function cR(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function hR(t,e,n){let i=t;return typeof e.text!="string"&&(i=sS(e,n)),i}function sS(t,e){const n=t.text?t.text.length:0;return e*n}function dR(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fR={id:"legend",_element:pv,start(t,e,n){const i=t.legend=new pv({ctx:t.ctx,options:n,chart:t});Xt.configure(t,i,n),Xt.addBox(t,i)},stop(t){Xt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Xt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=nn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class oS extends Zn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=We(i.text)?i.text.length:1;this._padding=nn(i.padding);const s=r*yt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=pt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=pt(a,r,n),l=ve*-.5):(h=s-e,d=pt(a,n,r),l=ve*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=yt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);xa(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:rg(n.align),textBaseline:"middle",translation:[o,a]})}}function pR(t,e){const n=new oS({ctx:t.ctx,options:e,chart:t});Xt.configure(t,n,e),Xt.addBox(t,n),t.titleBlock=n}var gR={id:"title",_element:oS,start(t,e,n){pR(t,n)},stop(t){const e=t.titleBlock;Xt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Xt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const No={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Ak(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function yn(t,e){return e&&(We(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function mR(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function gv(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=yt(e.bodyFont),c=yt(e.titleFont),h=yt(e.footerFont),d=s.length,p=r.length,m=i.length,v=nn(e.padding);let S=v.height,b=0,w=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(S+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;S+=m*R+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}p&&(S+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let _=0;const x=function(R){b=Math.max(b,n.measureText(R).width+_)};return n.save(),n.font=c.string,pe(t.title,x),n.font=l.string,pe(t.beforeBody.concat(t.afterBody),x),_=e.displayColors?o+2+e.boxPadding:0,pe(i,R=>{pe(R.before,x),pe(R.lines,x),pe(R.after,x)}),_=0,n.font=h.string,pe(t.footer,x),n.restore(),b+=v.width,{width:b,height:S}}function _R(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function yR(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function vR(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),yR(c,t,e,n)&&(c="center"),c}function mv(t,e,n){const i=n.yAlign||e.yAlign||_R(t,n);return{xAlign:n.xAlign||e.xAlign||vR(t,e,n,i),yAlign:i}}function wR(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function ER(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function _v(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=vs(o);let v=wR(e,a);const S=ER(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,p)+r:a==="right"&&(v+=Math.max(d,m)+r),{x:Mt(v,0,i.width-e.width),y:Mt(S,0,i.height-e.height)}}function Hl(t,e,n){const i=nn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function yv(t){return yn([],Fn(t))}function TR(t,e,n){return Hs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function vv(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const aS={beforeTitle:Vn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Vn,beforeBody:Vn,beforeLabel:Vn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return we(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vn,afterBody:Vn,beforeFooter:Vn,footer:Vn,afterFooter:Vn};function kt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?aS[e].call(n,i):r}class Pf extends Zn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new qT(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=TR(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=kt(i,"beforeTitle",this,e),s=kt(i,"title",this,e),o=kt(i,"afterTitle",this,e);let a=[];return a=yn(a,Fn(r)),a=yn(a,Fn(s)),a=yn(a,Fn(o)),a}getBeforeBody(e,n){return yv(kt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return pe(e,s=>{const o={before:[],lines:[],after:[]},a=vv(i,s);yn(o.before,Fn(kt(a,"beforeLabel",this,s))),yn(o.lines,kt(a,"label",this,s)),yn(o.after,Fn(kt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return yv(kt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=kt(i,"beforeFooter",this,e),s=kt(i,"footer",this,e),o=kt(i,"afterFooter",this,e);let a=[];return a=yn(a,Fn(r)),a=yn(a,Fn(s)),a=yn(a,Fn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(mR(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),pe(a,h=>{const d=vv(e.callbacks,h);r.push(kt(d,"labelColor",this,h)),s.push(kt(d,"labelPointStyle",this,h)),o.push(kt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=No[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=gv(this,i),c=Object.assign({},a,l),h=mv(this.chart,i,c),d=_v(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=vs(a),{x:p,y:m}=e,{width:v,height:S}=n;let b,w,_,x,R,M;return s==="center"?(R=m+S/2,r==="left"?(b=p,w=b-o,x=R+o,M=R-o):(b=p+v,w=b+o,x=R-o,M=R+o),_=b):(r==="left"?w=p+Math.max(l,h)+o:r==="right"?w=p+v-Math.max(c,d)-o:w=this.caretX,s==="top"?(x=m,R=x-o,b=w-o,_=w+o):(x=m+S,R=x+o,b=w+o,_=w-o),M=x),{x1:b,x2:w,x3:_,y1:x,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=ws(i.rtl,this.x,this.width);for(e.x=Hl(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=yt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=yt(s.bodyFont),d=Hl(this,"left",s),p=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(s.usePointStyle){const S={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=r.leftForLtr(p,c)+c/2,w=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Oy(e,S,b,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Oy(e,S,b,w)}else{e.lineWidth=ue(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const S=r.leftForLtr(p,c),b=r.leftForLtr(r.xPlus(p,1),c-2),w=vs(o.borderRadius);Object.values(w).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,tc(e,{x:S,y:v,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tc(e,{x:b,y:v+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,v,c,l),e.strokeRect(S,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=yt(i.bodyFont);let p=d.lineHeight,m=0;const v=ws(i.rtl,this.x,this.width),S=function(y){n.fillText(y,v.x(e.x+m),e.y+p/2),e.y+=p+s},b=v.textAlign(o);let w,_,x,R,M,O,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Hl(this,b,i),n.fillStyle=i.bodyColor,pe(this.beforeBody,S),m=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,O=r.length;R<O;++R){for(w=r[R],_=this.labelTextColors[R],n.fillStyle=_,pe(w.before,S),x=w.lines,a&&x.length&&(this._drawColorBox(n,e,R,v,i),p=Math.max(d.lineHeight,l)),M=0,I=x.length;M<I;++M)S(x[M]),p=d.lineHeight;pe(w.after,S)}m=0,p=d.lineHeight,pe(this.afterBody,S),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=ws(i.rtl,this.x,this.width);for(e.x=Hl(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=yt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:v}=vs(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=No[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=gv(this,e),l=Object.assign({},o,this._size),c=mv(n,e,l),h=_v(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=nn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),HT(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),WT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Yu(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Yu(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=No[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}Y(Pf,"positioners",No);var SR={id:"tooltip",_element:Pf,positioners:No,afterInit(t,e,n){n&&(t.tooltip=new Pf({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const IR=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function xR(t,e,n,i){const r=t.indexOf(e);if(r===-1)return IR(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const AR=(t,e)=>t===null?null:Mt(Math.round(t),0,e);function wv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Rf extends Ws{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(we(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:xR(i,e,ae(n,e),this._addedLabels),AR(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return wv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(Rf,"id","category"),Y(Rf,"defaults",{ticks:{callback:wv}});function bR(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,m=s||1,v=h-1,{min:S,max:b}=e,w=!we(o),_=!we(a),x=!we(c),R=(b-S)/(d+1);let M=xy((b-S)/v/m)*m,O,I,y,E;if(M<1e-14&&!w&&!_)return[{value:S},{value:b}];E=Math.ceil(b/M)-Math.floor(S/M),E>v&&(M=xy(E*M/v/m)*m),we(l)||(O=Math.pow(10,l),M=Math.ceil(M*O)/O),r==="ticks"?(I=Math.floor(S/M)*M,y=Math.ceil(b/M)*M):(I=S,y=b),w&&_&&s&&Sk((a-o)/s,M/1e3)?(E=Math.round(Math.min((a-o)/M,h)),M=(a-o)/E,I=o,y=a):x?(I=w?o:I,y=_?a:y,E=c-1,M=(y-I)/E):(E=(y-I)/M,hu(E,Math.round(E),M/1e3)?E=Math.round(E):E=Math.ceil(E));const A=Math.max(Ay(M),Ay(I));O=Math.pow(10,we(l)?A:l),I=Math.round(I*O)/O,y=Math.round(y*O)/O;let C=0;for(w&&(p&&I!==o?(n.push({value:o}),I<o&&C++,hu(Math.round((I+C*M)*O)/O,o,Ev(o,R,t))&&C++):I<o&&C++);C<E;++C){const P=Math.round((I+C*M)*O)/O;if(_&&P>a)break;n.push({value:P})}return _&&p&&y!==a?n.length&&hu(n[n.length-1].value,a,Ev(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!_||y===a)&&n.push({value:y}),n}function Ev(t,e,{horizontal:n,minRotation:i}){const r=Hn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class kR extends Ws{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return we(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Vi(r),c=Vi(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=bR(r,s);return e.bounds==="ticks"&&Ik(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return sg(e,this.chart.options.locale,this.options.ticks.format)}}class Df extends kR{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=tn(e)?e:0,this.max=tn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Hn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(Df,"id","linear"),Y(Df,"defaults",{ticks:{callback:VT.formatters.numeric}});const Wc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rt=Object.keys(Wc);function Tv(t,e){return t-e}function Sv(t,e){if(we(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),tn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Zu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Iv(t,e,n,i){const r=Rt.length;for(let s=Rt.indexOf(t);s<r-1;++s){const o=Wc[Rt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Rt[s]}return Rt[r-1]}function CR(t,e,n,i,r){for(let s=Rt.length-1;s>=Rt.indexOf(n);s--){const o=Rt[s];if(Wc[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Rt[n?Rt.indexOf(n):0]}function PR(t){for(let e=Rt.indexOf(t)+1,n=Rt.length;e<n;++e)if(Wc[Rt[e]].common)return Rt[e]}function xv(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=ig(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function RR(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Av(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:RR(t,i,r,n)}class sc extends Ws{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new BC._date(e.adapters.date);r.init(n),Qo(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Sv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=tn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=tn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=Ck(r,s,o);return this._unit=n.unit||(i.autoSkip?Iv(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):CR(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:PR(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Av(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Mt(n,0,o),i=Mt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Iv(s.minUnit,n,i,this._getLabelCapacity(n)),a=ae(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Zu(l)||l===!0,h={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<i;p=+e.add(p,a,o),m++)xv(h,p,v);return(p===i||r.bounds==="ticks"||m===1)&&xv(h,p,v),Object.keys(h).sort(Tv).map(S=>+S)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return be(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=i[n],m=c&&d&&p&&p.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Hn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Av(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Sv(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return DT(e.sort(Tv))}}Y(sc,"id","time"),Y(sc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wl(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Af(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Af(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class bv extends sc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wl(n,this.min),this._tableRange=Wl(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Wl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Wl(this._table,i*this._tableRange+this._minPos,!0)}}Y(bv,"id","timeseries"),Y(bv,"defaults",sc.defaults);const lS="label";function kv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function DR(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function uS(t,e){t.labels=e}function cS(t,e,n=lS){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function MR(t,e=lS){const n={labels:[],datasets:[]};return uS(n,t.labels),cS(n,t.datasets,e),n}function OR(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,m=q.useRef(null),v=q.useRef(null),S=()=>{m.current&&(v.current=new Hc(m.current,{type:o,data:MR(a,s),options:l&&{...l},plugins:c}),kv(e,v.current))},b=()=>{kv(e,null),v.current&&(v.current.destroy(),v.current=null)};return q.useEffect(()=>{!r&&v.current&&l&&DR(v.current,l)},[r,l]),q.useEffect(()=>{!r&&v.current&&uS(v.current.config.data,a.labels)},[r,a.labels]),q.useEffect(()=>{!r&&v.current&&a.datasets&&cS(v.current.config.data,a.datasets,s)},[r,a.datasets]),q.useEffect(()=>{v.current&&(r?(b(),setTimeout(S)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),q.useEffect(()=>{v.current&&(b(),setTimeout(S))},[o]),q.useEffect(()=>(S(),()=>b()),[]),V.jsx("canvas",{ref:m,role:"img",height:n,width:i,...p,children:h})}const NR=q.forwardRef(OR);function hS(t,e){return Hc.register(e),q.forwardRef((n,i)=>V.jsx(NR,{...n,ref:i,type:t}))}const VR=hS("bar",du),_d=hS("doughnut",Do);Hc.register(Oo,gu,Rf,Df,SR,fR,gR);const LR=t=>{const e=t?new Date(t):new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},FR=new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),jR={done:"",not_done:"",na:""},yd=()=>({done:0,notDone:0,na:0}),ql=(t,e)=>{switch(e){case"done":t.done+=1;break;case"not_done":t.notDone+=1;break;default:t.na+=1;break}},UR=["","",""],zR=["#1ab286","#f97316","#94a3b8"],vd=t=>({labels:UR,datasets:[{data:[t.done,t.notDone,t.na],backgroundColor:zR,hoverOffset:4}]}),BR=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":FR.format(e)},Cv=t=>jR[t]??"",$R=({loading:t,monthlySummary:e,latestRecords:n,allRecords:i})=>{var y;const[r,s]=q.useState("");q.useEffect(()=>{r&&!e.some(E=>E.monthKey===r)&&s("")},[e,r]);const o=((y=e[e.length-1])==null?void 0:y.monthKey)??"",a=r||o,l=q.useMemo(()=>a?i.filter(E=>LR(E.assessmentDate)===a):i,[i,a]),c=q.useMemo(()=>a?e.filter(E=>E.monthKey===a):e,[e,a]),h=q.useMemo(()=>{const E={overall:yd(),bone:yd(),incontinence:yd()};return i.reduce((A,C)=>(ql(A.overall,C.boneProtection),ql(A.overall,C.incontinenceCare),ql(A.bone,C.boneProtection),ql(A.incontinence,C.incontinenceCare),A),E)},[i]),{overall:d,bone:p,incontinence:m}=h,v=q.useMemo(()=>vd(d),[d]),S=q.useMemo(()=>vd(p),[p]),b=q.useMemo(()=>vd(m),[m]),w=i.length,_=d.done+d.notDone+d.na,x=p.done+p.notDone+p.na,R=m.done+m.notDone+m.na,M=l.length>0,O=q.useMemo(()=>({labels:c.map(A=>A.label),datasets:[{label:"",backgroundColor:"#1ab286",data:c.map(A=>A.done)},{label:"",backgroundColor:"#f97316",data:c.map(A=>A.notDone)},{label:"",backgroundColor:"#94a3b8",data:c.map(A=>A.na)}]}),[c]);if(t)return V.jsx("p",{className:"subtle",children:"..."});if(!i.length)return V.jsx("p",{className:"subtle",children:""});const I=e.map(E=>({value:E.monthKey,label:E.label}));return V.jsxs("div",{className:"dashboard-grid",children:[V.jsxs("section",{className:"card",children:[V.jsxs("div",{className:"section-header",children:[V.jsx("h2",{children:""}),I.length>0&&V.jsxs("label",{className:"field month-filter",children:[V.jsx("span",{children:""}),V.jsx("select",{value:a,onChange:E=>s(E.target.value),children:I.map(E=>V.jsx("option",{value:E.value,children:E.label},E.value))})]})]}),V.jsx("div",{className:"chart-wrapper",children:M?V.jsx(VR,{data:O,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0}}}}):V.jsx("p",{className:"subtle",children:""})})]}),V.jsxs("section",{className:"card",children:[V.jsx("h2",{children:""}),V.jsxs("div",{className:"chart-wrapper doughnut",children:[V.jsx(_d,{data:v,options:{responsive:!0,plugins:{legend:{position:"bottom"}}}}),V.jsxs("div",{className:"totals",children:[V.jsxs("p",{children:[": ",V.jsx("strong",{children:w})]}),V.jsxs("p",{children:[": ",V.jsx("strong",{children:_})]})]})]})]}),V.jsxs("section",{className:"card",children:[V.jsx("h2",{children:"A. /"}),V.jsxs("div",{className:"chart-wrapper doughnut",children:[V.jsx(_d,{data:S,options:{responsive:!0,plugins:{legend:{position:"bottom"}}}}),V.jsxs("div",{className:"totals",children:[V.jsxs("p",{children:[": ",V.jsx("strong",{children:w})]}),V.jsxs("p",{children:[": ",V.jsx("strong",{children:x})]})]})]})]}),V.jsxs("section",{className:"card",children:[V.jsx("h2",{children:"B. "}),V.jsxs("div",{className:"chart-wrapper doughnut",children:[V.jsx(_d,{data:b,options:{responsive:!0,plugins:{legend:{position:"bottom"}}}}),V.jsxs("div",{className:"totals",children:[V.jsxs("p",{children:[": ",V.jsx("strong",{children:w})]}),V.jsxs("p",{children:[": ",V.jsx("strong",{children:R})]})]})]})]}),V.jsxs("section",{className:"card wide",children:[V.jsx("h2",{children:""}),V.jsx("div",{className:"table-wrapper",children:V.jsxs("table",{children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{children:""}),V.jsx("th",{children:""}),V.jsx("th",{children:""}),V.jsx("th",{children:""}),V.jsx("th",{children:""})]})}),V.jsx("tbody",{children:n.map(E=>{const A=E.notes||"";return V.jsxs("tr",{children:[V.jsx("td",{children:BR(E.assessmentDate||E.createdAt)}),V.jsx("td",{children:E.assessor}),V.jsx("td",{children:Cv(E.boneProtection)}),V.jsx("td",{children:Cv(E.incontinenceCare)}),V.jsx("td",{title:A,children:A})]},E.id)})})]})})]})]})},HR=({message:t,variant:e="success"})=>{const n=e==="error"?"assertive":"polite",i=e==="error"?"alert":"status";return V.jsx("div",{className:`toast ${e}`,role:i,"aria-live":n,children:t})},WR=()=>{};var Pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},qR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(n[h],n[d],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new KR;const p=s<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GR=function(t){const e=dS(t);return fS.encodeByteArray(e,!0)},oc=function(t){return GR(t).replace(/\./g,"")},pS=function(t){try{return fS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>QR().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof Pv>"u")return;const t=Pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pS(t[1]);return e&&JSON.parse(e)},qc=()=>{try{return WR()||YR()||XR()||JR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gS=t=>{var e,n;return(n=(e=qc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZR=t=>{const e=gS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mS=()=>{var t;return(t=qc())===null||t===void 0?void 0:t.config},_S=t=>{var e;return(e=qc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oc(JSON.stringify(n)),oc(JSON.stringify(o)),""].join(".")}const Jo={};function n2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?t.emulator.push(e):t.prod.push(e);return t}function i2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rv=!1;function vS(t,e){if(typeof window>"u"||typeof document>"u"||!qs(window.location.host)||Jo[t]===e||Jo[t]||Rv)return;Jo[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",s=n2().prod.length>0;function o(){const p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Rv=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=i2(i),m=n("text"),v=document.getElementById(m)||document.createElement("span"),S=n("learnmore"),b=document.getElementById(S)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(b,S);const R=c();l(_,w),x.append(_,v,b,R),document.body.appendChild(x)}s?(v.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function s2(){var t;const e=(t=qc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function l2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u2(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c2(){return!s2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h2(){try{return typeof indexedDB=="object"}catch{return!1}}function d2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="FirebaseError";class oi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=f2,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?p2(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new oi(r,a,i)}}function p2(t,e){return t.replace(g2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const g2=/\{\$([^}]+)}/g;function m2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Dv(s)&&Dv(o)){if(!Dr(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _2(t,e){const n=new y2(t,e);return n.subscribe.bind(n)}class y2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");v2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=wd),r.error===void 0&&(r.error=wd),r.complete===void 0&&(r.complete=wd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new e2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T2(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:E2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E2(t){return t===pr?void 0:t}function T2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new w2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const I2={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},x2=ie.INFO,A2={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},b2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=A2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gg{constructor(e){this.name=e,this._logLevel=x2,this._logHandler=b2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const k2=(t,e)=>e.some(n=>t instanceof n);let Mv,Ov;function C2(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wS=new WeakMap,Mf=new WeakMap,ES=new WeakMap,Ed=new WeakMap,mg=new WeakMap;function R2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Li(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wS.set(n,t)}).catch(()=>{}),mg.set(e,t),e}function D2(t){if(Mf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Mf.set(t,e)}let Of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ES.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M2(t){Of=t(Of)}function O2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Td(this),e,...n);return ES.set(i,e.sort?e.sort():[e]),Li(i)}:P2().includes(t)?function(...e){return t.apply(Td(this),e),Li(wS.get(this))}:function(...e){return Li(t.apply(Td(this),e))}}function N2(t){return typeof t=="function"?O2(t):(t instanceof IDBTransaction&&D2(t),k2(t,C2())?new Proxy(t,Of):t)}function Li(t){if(t instanceof IDBRequest)return R2(t);if(Ed.has(t))return Ed.get(t);const e=N2(t);return e!==t&&(Ed.set(t,e),mg.set(e,t)),e}const Td=t=>mg.get(t);function V2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Li(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Li(o.result),l.oldVersion,l.newVersion,Li(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const L2=["get","getKey","getAll","getAllKeys","count"],F2=["put","add","delete","clear"],Sd=new Map;function Nv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sd.get(e))return Sd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=F2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||L2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Sd.set(e,s),s}M2(t=>({...t,get:(e,n,i)=>Nv(e,n)||t.get(e,n,i),has:(e,n)=>!!Nv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(U2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function U2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nf="@firebase/app",Vv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new gg("@firebase/app"),z2="@firebase/app-compat",B2="@firebase/analytics-compat",$2="@firebase/analytics",H2="@firebase/app-check-compat",W2="@firebase/app-check",q2="@firebase/auth",K2="@firebase/auth-compat",G2="@firebase/database",Q2="@firebase/data-connect",Y2="@firebase/database-compat",X2="@firebase/functions",J2="@firebase/functions-compat",Z2="@firebase/installations",eD="@firebase/installations-compat",tD="@firebase/messaging",nD="@firebase/messaging-compat",iD="@firebase/performance",rD="@firebase/performance-compat",sD="@firebase/remote-config",oD="@firebase/remote-config-compat",aD="@firebase/storage",lD="@firebase/storage-compat",uD="@firebase/firestore",cD="@firebase/ai",hD="@firebase/firestore-compat",dD="firebase",fD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="[DEFAULT]",pD={[Nf]:"fire-core",[z2]:"fire-core-compat",[$2]:"fire-analytics",[B2]:"fire-analytics-compat",[W2]:"fire-app-check",[H2]:"fire-app-check-compat",[q2]:"fire-auth",[K2]:"fire-auth-compat",[G2]:"fire-rtdb",[Q2]:"fire-data-connect",[Y2]:"fire-rtdb-compat",[X2]:"fire-fn",[J2]:"fire-fn-compat",[Z2]:"fire-iid",[eD]:"fire-iid-compat",[tD]:"fire-fcm",[nD]:"fire-fcm-compat",[iD]:"fire-perf",[rD]:"fire-perf-compat",[sD]:"fire-rc",[oD]:"fire-rc-compat",[aD]:"fire-gcs",[lD]:"fire-gcs-compat",[uD]:"fire-fst",[hD]:"fire-fst-compat",[cD]:"fire-vertex","fire-js":"fire-js",[dD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,gD=new Map,Lf=new Map;function Lv(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ns(t){const e=t.name;if(Lf.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;Lf.set(e,t);for(const n of ac.values())Lv(n,t);for(const n of gD.values())Lv(n,t);return!0}function _g(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new $a("app","Firebase",mD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=fD;function TS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Vf,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(n||(n=mS()),!n)throw Fi.create("no-options");const s=ac.get(r);if(s){if(Dr(n,s.options)&&Dr(i,s.config))return s;throw Fi.create("duplicate-app",{appName:r})}const o=new S2(r);for(const l of Lf.values())o.addComponent(l);const a=new _D(n,i,o);return ac.set(r,a),a}function SS(t=Vf){const e=ac.get(t);if(!e&&t===Vf&&mS())return TS();if(!e)throw Fi.create("no-app",{appName:t});return e}function ji(t,e,n){var i;let r=(i=pD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(a.join(" "));return}Ns(new Mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="firebase-heartbeat-database",vD=1,ba="firebase-heartbeat-store";let Id=null;function IS(){return Id||(Id=V2(yD,vD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fi.create("idb-open",{originalErrorMessage:t.message})})),Id}async function wD(t){try{const n=(await IS()).transaction(ba),i=await n.objectStore(ba).get(xS(t));return await n.done,i}catch(e){if(e instanceof oi)ei.warn(e.message);else{const n=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function Fv(t,e){try{const i=(await IS()).transaction(ba,"readwrite");await i.objectStore(ba).put(e,xS(t)),await i.done}catch(n){if(n instanceof oi)ei.warn(n.message);else{const i=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(i.message)}}}function xS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1024,TD=30;class SD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>TD){const o=AD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ei.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jv(),{heartbeatsToSend:i,unsentEntries:r}=ID(this._heartbeatsCache.heartbeats),s=oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ei.warn(n),""}}}function jv(){return new Date().toISOString().substring(0,10)}function ID(t,e=ED){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Uv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Uv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h2()?d2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uv(t){return oc(JSON.stringify({version:2,heartbeats:t})).length}function AD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){Ns(new Mr("platform-logger",e=>new j2(e),"PRIVATE")),Ns(new Mr("heartbeat",e=>new SD(e),"PRIVATE")),ji(Nf,Vv,t),ji(Nf,Vv,"esm2017"),ji("fire-js","")}bD("");function yg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kD=AS,bS=new $a("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new gg("@firebase/auth");function CD(t,...e){lc.logLevel<=ie.WARN&&lc.warn(`Auth (${Ks}): ${t}`,...e)}function mu(t,...e){lc.logLevel<=ie.ERROR&&lc.error(`Auth (${Ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw vg(t,...e)}function An(t,...e){return vg(t,...e)}function kS(t,e,n){const i=Object.assign(Object.assign({},kD()),{[e]:n});return new $a("auth","Firebase",i).create(e,{appName:t.name})}function Ui(t){return kS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return bS.create(t,...e)}function X(t,e,...n){if(!t)throw vg(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mu(e),new Error(e)}function ni(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PD(){return zv()==="http:"||zv()==="https:"}function zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PD()||a2()||"connection"in navigator)?navigator.onLine:!0}function DD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=r2()||l2()}get(){return RD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ND=new Wa(3e4,6e4);function Kc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gs(t,e,n,i,r={}){return PS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Ha(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return o2()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&qs(t.emulatorConfig.host)&&(c.credentials="include"),CS.fetch()(await DS(t,t.config.apiHost,n,a),c)})}async function PS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},MD),e);try{const r=new VD(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Kl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kl(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kS(t,h,c);ti(t,h)}}catch(r){if(r instanceof oi)throw r;ti(t,"network-request-failed",{message:String(r)})}}async function RS(t,e,n,i,r={}){const s=await Gs(t,e,n,i,r);return"mfaPendingCredential"in s&&ti(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function DS(t,e,n,i){const r=`${e}${n}?${i}`,s=t,o=s.config.emulator?wg(t.config,r):`${t.config.apiScheme}://${r}`;return OD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class VD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(An(this.auth,"network-request-failed")),ND.get())})}}function Kl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=An(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function uc(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FD(t,e=!1){const n=Lt(t),i=await n.getIdToken(e),r=Eg(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Zo(xd(r.auth_time)),issuedAtTime:Zo(xd(r.iat)),expirationTime:Zo(xd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xd(t){return Number(t)*1e3}function Eg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return mu("JWT malformed, contained fewer than 3 sections"),null;try{const r=pS(n);return r?JSON.parse(r):(mu("Failed to decode base64 JWT payload"),null)}catch(r){return mu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Bv(t){const e=Eg(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof oi&&jD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function jD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ka(t,uc(n,{idToken:i}));X(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?MS(s.providerUserInfo):[],a=BD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function zD(t){const e=Lt(t);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function MS(t){return t.map(e=>{var{providerId:n}=e,i=yg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e){const n=await PS(t,{},async()=>{const i=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=await DS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return t.emulatorConfig&&qs(t.emulatorConfig.host)&&(l.credentials="include"),CS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HD(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",Kc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await $D(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ts;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ts,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ka(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FD(this,e)}reload(){return zD(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Ui(this.auth));const e=await this.getIdToken();return await ka(this,LD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:M,providerData:O,stsTokenManager:I}=n;X(x&&I,e,"internal-error");const y=Ts.fromJSON(this.name,I);X(typeof x=="string",e,"internal-error"),hi(d,e.name),hi(p,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),hi(m,e.name),hi(v,e.name),hi(S,e.name),hi(b,e.name),hi(w,e.name),hi(_,e.name);const E=new cn({uid:x,auth:e,email:p,emailVerified:R,displayName:d,isAnonymous:M,photoURL:v,phoneNumber:m,tenantId:S,stsTokenManager:y,createdAt:w,lastLoginAt:_});return O&&Array.isArray(O)&&(E.providerData=O.map(A=>Object.assign({},A))),b&&(E._redirectEventId=b),E}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ts;r.updateFromServerResponse(n);const s=new cn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await cc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?MS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ts;a.updateFromIdToken(i);const l=new cn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new jf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function qn(t){ni(t instanceof Function,"Expected a class definition");let e=$v.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OS.type="NONE";const Hv=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){return`firebase:${t}:${e}:${n}`}class Ss{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=_u(this.userKey,r.apiKey,s),this.fullPersistenceKey=_u("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uc(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ss(qn(Hv),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||qn(Hv);const o=_u(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await uc(e,{idToken:h}).catch(()=>{});if(!p)break;d=await cn._fromGetAccountInfoResponse(e,p,h)}else d=cn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ss(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ss(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(US(e))return"Blackberry";if(zS(e))return"Webos";if(VS(e))return"Safari";if((e.includes("chrome/")||LS(e))&&!e.includes("edge/"))return"Chrome";if(jS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function NS(t=wt()){return/firefox\//i.test(t)}function VS(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LS(t=wt()){return/crios\//i.test(t)}function FS(t=wt()){return/iemobile/i.test(t)}function jS(t=wt()){return/android/i.test(t)}function US(t=wt()){return/blackberry/i.test(t)}function zS(t=wt()){return/webos/i.test(t)}function Tg(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WD(t=wt()){var e;return Tg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qD(){return u2()&&document.documentMode===10}function BS(t=wt()){return Tg(t)||jS(t)||zS(t)||US(t)||/windows phone/i.test(t)||FS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=Wv(wt());break;case"Worker":n=`${Wv(wt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",Kc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=6;class YD{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:QD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new KD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uc(this,{idToken:e}),i=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(Ui(this));const n=e?Lt(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(Ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GD(this),n=new YD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await HD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gc(t){return Lt(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_2(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JD(t){Sg=t}function ZD(t){return Sg.loadJS(t)}function eM(){return Sg.gapiScript}function tM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t,e){const n=_g(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Dr(s,e??{}))return r;ti(r,"already-initialized")}return n.initialize({options:e})}function iM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rM(t,e,n){const i=Gc(t);X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=HS(e),{host:o,port:a}=sM(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(Dr(c,i.config.emulator)&&Dr(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,qs(o)?(yS(`${s}//${o}${l}`),vS("Auth",!0)):oM()}function HS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sM(t){const e=HS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Kv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Kv(o)}}}function Kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e){return RS(t,"POST","/v1/accounts:signInWithIdp",Kc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="http://localhost";class Or extends WS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=yg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Or(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Is(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Is(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Is(e,n)}buildRequest(){const e={requestUri:aM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends qS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends qa{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Or._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return yi.credential(n,i)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends qa{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends qa{constructor(){super("twitter.com")}static credential(e,n){return Or._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){return RS(t,"POST","/v1/accounts:signUp",Kc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await cn._fromIdTokenResponse(e,i,r),o=Gv(i);return new qi({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Gv(i);return new qi({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Gv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t){var e;if(un(t.app))return Promise.reject(Ui(t));const n=Gc(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new qi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await lM(n,{returnSecureToken:!0}),r=await qi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends oi{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new hc(e,n,i,r)}}function KS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(t,s,e,i):s})}async function cM(t,e,n=!1){const i=await ka(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e,n=!1){const{auth:i}=t;if(un(i.app))return Promise.reject(Ui(i));const r="reauthenticate";try{const s=await ka(t,KS(i,r,e,t),n);X(s.idToken,i,"internal-error");const o=Eg(s.idToken);X(o,i,"internal-error");const{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),qi._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ti(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t,e,n=!1){if(un(t.app))return Promise.reject(Ui(t));const i="signIn",r=await KS(t,i,e),s=await qi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function fM(t,e,n,i){return Lt(t).onIdTokenChanged(e,n,i)}function pM(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function gM(t,e,n,i){return Lt(t).onAuthStateChanged(e,n,i)}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=1e3,_M=10;class QS extends GS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);qD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_M):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QS.type="LOCAL";const yM=QS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends GS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YS.type="SESSION";const XS=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await vM(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ig("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function EM(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function TM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IM(){return JS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firebaseLocalStorageDb",xM=1,fc="firebaseLocalStorage",eI="fbase_key";class Ka{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yc(t,e){return t.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function AM(){const t=indexedDB.deleteDatabase(ZS);return new Ka(t).toPromise()}function Uf(){const t=indexedDB.open(ZS,xM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(fc,{keyPath:eI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(fc)?e(i):(i.close(),await AM(),e(await Uf()))})})}async function Qv(t,e,n){const i=Yc(t,!0).put({[eI]:e,value:n});return new Ka(i).toPromise()}async function bM(t,e){const n=Yc(t,!1).get(e),i=await new Ka(n).toPromise();return i===void 0?null:i.value}function Yv(t,e){const n=Yc(t,!0).delete(e);return new Ka(n).toPromise()}const kM=800,CM=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>CM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qc._getInstance(IM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TM(),!this.activeServiceWorker)return;this.sender=new wM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uf();return await Qv(e,dc,"1"),await Yv(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>bM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Yc(r,!1).getAll();return new Ka(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const PM=tI;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){return e?qn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends WS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Is(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Is(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Is(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DM(t){return dM(t.auth,new xg(t),t.bypassAuthState)}function MM(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),hM(n,new xg(t),t.bypassAuthState)}async function OM(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),cM(n,new xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return MM;default:ti(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new Wa(2e3,1e4);class ds extends nI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NM.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="pendingRedirect",yu=new Map;class LM extends nI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const i=await FM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FM(t,e){const n=zM(e),i=UM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function jM(t,e){yu.set(t._key(),e)}function UM(t){return qn(t._redirectPersistence)}function zM(t){return _u(VM,t.config.apiKey,t.name)}async function BM(t,e,n=!1){if(un(t.app))return Promise.reject(Ui(t));const i=Gc(t),r=RM(i,e),o=await new LM(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=10*60*1e3;class HM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!iI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(An(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$M&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(e))}saveEventToCache(e){this.cachedEventUids.add(Xv(e)),this.lastProcessedEventTime=Date.now()}}function Xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e={}){return Gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GM=/^https?/;async function QM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qM(t);for(const n of e)try{if(YM(n))return}catch{}ti(t,"unauthorized-domain")}function YM(t){const e=Ff(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!GM.test(n))return!1;if(KM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Wa(3e4,6e4);function Jv(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JM(t){return new Promise((e,n)=>{var i,r,s;function o(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(An(t,"network-request-failed"))},timeout:XM.get()})}if(!((r=(i=bn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{const a=tM("iframefcb");return bn()[a]=()=>{gapi.load?o():n(An(t,"network-request-failed"))},ZD(`${eM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw vu=null,e})}let vu=null;function ZM(t){return vu=vu||JM(t),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=new Wa(5e3,15e3),tO="__/auth/iframe",nO="emulator/auth/iframe",iO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sO(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wg(e,nO):`https://${t.config.authDomain}/${tO}`,i={apiKey:e.apiKey,appName:t.name,v:Ks},r=rO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ha(i).slice(1)}`}async function oO(t){const e=await ZM(t),n=bn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:sO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=An(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},eO.get());function l(){bn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lO=500,uO=600,cO="_blank",hO="http://localhost";class Zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dO(t,e,n,i=lO,r=uO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aO),{width:i.toString(),height:r.toString(),top:s,left:o}),c=wt().toLowerCase();n&&(a=LS(c)?cO:n),NS(c)&&(e=e||hO,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(WD(c)&&a!=="_self")return fO(e||"",a),new Zv(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new Zv(d)}function fO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="__/auth/handler",gO="emulator/auth/handler",mO=encodeURIComponent("fac");async function e0(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ks,eventId:r};if(e instanceof qS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",m2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof qa){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${mO}=${encodeURIComponent(l)}`:"";return`${_O(t)}?${Ha(a).slice(1)}${c}`}function _O({config:t}){return t.emulator?wg(t,gO):`https://${t.authDomain}/${pO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class yO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XS,this._completeRedirectFn=BM,this._overrideRedirectResult=jM}async _openPopup(e,n,i,r){var s;ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await e0(e,n,i,Ff(),r);return dO(e,o,Ig())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await e0(e,n,i,Ff(),r);return EM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ni(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await oO(e),i=new HM(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ad,{type:Ad},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Ad];o!==void 0&&n(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BS()||VS()||Tg()}}const vO=yO;var t0="@firebase/auth",n0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TO(t){Ns(new Mr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},c=new XD(i,r,s,l);return iM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ns(new Mr("auth-internal",e=>{const n=Gc(e.getProvider("auth").getImmediate());return(i=>new wO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(t0,n0,EO(t)),ji(t0,n0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=5*60,IO=_S("authIdTokenMaxAge")||SO;let i0=null;const xO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>IO)return;const r=n==null?void 0:n.token;i0!==r&&(i0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AO(t=SS()){const e=_g(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nM(t,{popupRedirectResolver:vO,persistence:[PM,yM,XS]}),i=_S("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=xO(s.toString());pM(n,o,()=>o(n.currentUser)),fM(n,a=>o(a))}}const r=gS("auth");return r&&rM(n,`http://${r}`),n}function bO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=An("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",bO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TO("Browser");var kO="firebase",CO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(kO,CO,"app");var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,rI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function E(){}E.prototype=y.prototype,I.D=y.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(A,C,P){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return y.prototype[C].apply(A,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,y,E){E||(E=0);var A=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)A[C]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(C=0;16>C;++C)A[C]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=I.g[0],E=I.g[1],C=I.g[2];var P=I.g[3],k=y+(P^E&(C^P))+A[0]+3614090360&4294967295;y=E+(k<<7&4294967295|k>>>25),k=P+(C^y&(E^C))+A[1]+3905402710&4294967295,P=y+(k<<12&4294967295|k>>>20),k=C+(E^P&(y^E))+A[2]+606105819&4294967295,C=P+(k<<17&4294967295|k>>>15),k=E+(y^C&(P^y))+A[3]+3250441966&4294967295,E=C+(k<<22&4294967295|k>>>10),k=y+(P^E&(C^P))+A[4]+4118548399&4294967295,y=E+(k<<7&4294967295|k>>>25),k=P+(C^y&(E^C))+A[5]+1200080426&4294967295,P=y+(k<<12&4294967295|k>>>20),k=C+(E^P&(y^E))+A[6]+2821735955&4294967295,C=P+(k<<17&4294967295|k>>>15),k=E+(y^C&(P^y))+A[7]+4249261313&4294967295,E=C+(k<<22&4294967295|k>>>10),k=y+(P^E&(C^P))+A[8]+1770035416&4294967295,y=E+(k<<7&4294967295|k>>>25),k=P+(C^y&(E^C))+A[9]+2336552879&4294967295,P=y+(k<<12&4294967295|k>>>20),k=C+(E^P&(y^E))+A[10]+4294925233&4294967295,C=P+(k<<17&4294967295|k>>>15),k=E+(y^C&(P^y))+A[11]+2304563134&4294967295,E=C+(k<<22&4294967295|k>>>10),k=y+(P^E&(C^P))+A[12]+1804603682&4294967295,y=E+(k<<7&4294967295|k>>>25),k=P+(C^y&(E^C))+A[13]+4254626195&4294967295,P=y+(k<<12&4294967295|k>>>20),k=C+(E^P&(y^E))+A[14]+2792965006&4294967295,C=P+(k<<17&4294967295|k>>>15),k=E+(y^C&(P^y))+A[15]+1236535329&4294967295,E=C+(k<<22&4294967295|k>>>10),k=y+(C^P&(E^C))+A[1]+4129170786&4294967295,y=E+(k<<5&4294967295|k>>>27),k=P+(E^C&(y^E))+A[6]+3225465664&4294967295,P=y+(k<<9&4294967295|k>>>23),k=C+(y^E&(P^y))+A[11]+643717713&4294967295,C=P+(k<<14&4294967295|k>>>18),k=E+(P^y&(C^P))+A[0]+3921069994&4294967295,E=C+(k<<20&4294967295|k>>>12),k=y+(C^P&(E^C))+A[5]+3593408605&4294967295,y=E+(k<<5&4294967295|k>>>27),k=P+(E^C&(y^E))+A[10]+38016083&4294967295,P=y+(k<<9&4294967295|k>>>23),k=C+(y^E&(P^y))+A[15]+3634488961&4294967295,C=P+(k<<14&4294967295|k>>>18),k=E+(P^y&(C^P))+A[4]+3889429448&4294967295,E=C+(k<<20&4294967295|k>>>12),k=y+(C^P&(E^C))+A[9]+568446438&4294967295,y=E+(k<<5&4294967295|k>>>27),k=P+(E^C&(y^E))+A[14]+3275163606&4294967295,P=y+(k<<9&4294967295|k>>>23),k=C+(y^E&(P^y))+A[3]+4107603335&4294967295,C=P+(k<<14&4294967295|k>>>18),k=E+(P^y&(C^P))+A[8]+1163531501&4294967295,E=C+(k<<20&4294967295|k>>>12),k=y+(C^P&(E^C))+A[13]+2850285829&4294967295,y=E+(k<<5&4294967295|k>>>27),k=P+(E^C&(y^E))+A[2]+4243563512&4294967295,P=y+(k<<9&4294967295|k>>>23),k=C+(y^E&(P^y))+A[7]+1735328473&4294967295,C=P+(k<<14&4294967295|k>>>18),k=E+(P^y&(C^P))+A[12]+2368359562&4294967295,E=C+(k<<20&4294967295|k>>>12),k=y+(E^C^P)+A[5]+4294588738&4294967295,y=E+(k<<4&4294967295|k>>>28),k=P+(y^E^C)+A[8]+2272392833&4294967295,P=y+(k<<11&4294967295|k>>>21),k=C+(P^y^E)+A[11]+1839030562&4294967295,C=P+(k<<16&4294967295|k>>>16),k=E+(C^P^y)+A[14]+4259657740&4294967295,E=C+(k<<23&4294967295|k>>>9),k=y+(E^C^P)+A[1]+2763975236&4294967295,y=E+(k<<4&4294967295|k>>>28),k=P+(y^E^C)+A[4]+1272893353&4294967295,P=y+(k<<11&4294967295|k>>>21),k=C+(P^y^E)+A[7]+4139469664&4294967295,C=P+(k<<16&4294967295|k>>>16),k=E+(C^P^y)+A[10]+3200236656&4294967295,E=C+(k<<23&4294967295|k>>>9),k=y+(E^C^P)+A[13]+681279174&4294967295,y=E+(k<<4&4294967295|k>>>28),k=P+(y^E^C)+A[0]+3936430074&4294967295,P=y+(k<<11&4294967295|k>>>21),k=C+(P^y^E)+A[3]+3572445317&4294967295,C=P+(k<<16&4294967295|k>>>16),k=E+(C^P^y)+A[6]+76029189&4294967295,E=C+(k<<23&4294967295|k>>>9),k=y+(E^C^P)+A[9]+3654602809&4294967295,y=E+(k<<4&4294967295|k>>>28),k=P+(y^E^C)+A[12]+3873151461&4294967295,P=y+(k<<11&4294967295|k>>>21),k=C+(P^y^E)+A[15]+530742520&4294967295,C=P+(k<<16&4294967295|k>>>16),k=E+(C^P^y)+A[2]+3299628645&4294967295,E=C+(k<<23&4294967295|k>>>9),k=y+(C^(E|~P))+A[0]+4096336452&4294967295,y=E+(k<<6&4294967295|k>>>26),k=P+(E^(y|~C))+A[7]+1126891415&4294967295,P=y+(k<<10&4294967295|k>>>22),k=C+(y^(P|~E))+A[14]+2878612391&4294967295,C=P+(k<<15&4294967295|k>>>17),k=E+(P^(C|~y))+A[5]+4237533241&4294967295,E=C+(k<<21&4294967295|k>>>11),k=y+(C^(E|~P))+A[12]+1700485571&4294967295,y=E+(k<<6&4294967295|k>>>26),k=P+(E^(y|~C))+A[3]+2399980690&4294967295,P=y+(k<<10&4294967295|k>>>22),k=C+(y^(P|~E))+A[10]+4293915773&4294967295,C=P+(k<<15&4294967295|k>>>17),k=E+(P^(C|~y))+A[1]+2240044497&4294967295,E=C+(k<<21&4294967295|k>>>11),k=y+(C^(E|~P))+A[8]+1873313359&4294967295,y=E+(k<<6&4294967295|k>>>26),k=P+(E^(y|~C))+A[15]+4264355552&4294967295,P=y+(k<<10&4294967295|k>>>22),k=C+(y^(P|~E))+A[6]+2734768916&4294967295,C=P+(k<<15&4294967295|k>>>17),k=E+(P^(C|~y))+A[13]+1309151649&4294967295,E=C+(k<<21&4294967295|k>>>11),k=y+(C^(E|~P))+A[4]+4149444226&4294967295,y=E+(k<<6&4294967295|k>>>26),k=P+(E^(y|~C))+A[11]+3174756917&4294967295,P=y+(k<<10&4294967295|k>>>22),k=C+(y^(P|~E))+A[2]+718787259&4294967295,C=P+(k<<15&4294967295|k>>>17),k=E+(P^(C|~y))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+P&4294967295}i.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var E=y-this.blockSize,A=this.B,C=this.h,P=0;P<y;){if(C==0)for(;P<=E;)r(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<y;)if(A[C++]=I.charCodeAt(P++),C==this.blockSize){r(this,A),C=0;break}}else for(;P<y;)if(A[C++]=I[P++],C==this.blockSize){r(this,A),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var E=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=E&255,E/=256;for(this.u(I),I=Array(16),y=E=0;4>y;++y)for(var A=0;32>A;A+=8)I[E++]=this.g[y]>>>A&255;return I};function s(I,y){var E=a;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=y(I)}function o(I,y){this.h=y;for(var E=[],A=!0,C=I.length-1;0<=C;C--){var P=I[C]|0;A&&P==y||(E[C]=P,A=!1)}this.g=E}var a={};function l(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return b(c(-I));for(var y=[],E=1,A=0;I>=E;A++)y[A]=I/E|0,E*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return b(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(y,8)),A=d,C=0;C<I.length;C+=8){var P=Math.min(8,I.length-C),k=parseInt(I.substring(C,C+P),y);8>P?(P=c(Math.pow(y,P)),A=A.j(P).add(c(k))):(A=A.j(E),A=A.add(c(k)))}return A}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-b(this).m();for(var I=0,y=1,E=0;E<this.g.length;E++){var A=this.i(E);I+=(0<=A?A:4294967296+A)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(S(this))return"-"+b(this).toString(I);for(var y=c(Math.pow(I,6)),E=this,A="";;){var C=R(E,y).g;E=w(E,C.j(y));var P=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=C,v(E))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=w(this,I),S(I)?-1:v(I)?0:1};function b(I){for(var y=I.g.length,E=[],A=0;A<y;A++)E[A]=~I.g[A];return new o(E,~I.h).add(p)}t.abs=function(){return S(this)?b(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),E=[],A=0,C=0;C<=y;C++){var P=A+(this.i(C)&65535)+(I.i(C)&65535),k=(P>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);A=k>>>16,P&=65535,k&=65535,E[C]=k<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(I,y){return I.add(b(y))}t.j=function(I){if(v(this)||v(I))return d;if(S(this))return S(I)?b(this).j(b(I)):b(b(this).j(I));if(S(I))return b(this.j(b(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,E=[],A=0;A<2*y;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var C=0;C<I.g.length;C++){var P=this.i(A)>>>16,k=this.i(A)&65535,Ee=I.i(C)>>>16,ne=I.i(C)&65535;E[2*A+2*C]+=k*ne,_(E,2*A+2*C),E[2*A+2*C+1]+=P*ne,_(E,2*A+2*C+1),E[2*A+2*C+1]+=k*Ee,_(E,2*A+2*C+1),E[2*A+2*C+2]+=P*Ee,_(E,2*A+2*C+2)}for(A=0;A<y;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=y;A<2*y;A++)E[A]=0;return new o(E,0)};function _(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function x(I,y){this.g=I,this.h=y}function R(I,y){if(v(y))throw Error("division by zero");if(v(I))return new x(d,d);if(S(I))return y=R(b(I),y),new x(b(y.g),b(y.h));if(S(y))return y=R(I,b(y)),new x(b(y.g),y.h);if(30<I.g.length){if(S(I)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var E=p,A=y;0>=A.l(I);)E=M(E),A=M(A);var C=O(E,1),P=O(A,1);for(A=O(A,2),E=O(E,2);!v(A);){var k=P.add(A);0>=k.l(I)&&(C=C.add(E),P=k),A=O(A,1),E=O(E,1)}return y=w(I,C.j(y)),new x(C,y)}for(C=d;0<=I.l(y);){for(E=Math.max(1,Math.floor(I.m()/y.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=c(E),k=P.j(y);S(k)||0<k.l(I);)E-=A,P=c(E),k=P.j(y);v(P)&&(P=p),C=C.add(P),I=w(I,k)}return new x(C,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),E=[],A=0;A<y;A++)E[A]=this.i(A)&I.i(A);return new o(E,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),E=[],A=0;A<y;A++)E[A]=this.i(A)|I.i(A);return new o(E,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),E=[],A=0;A<y;A++)E[A]=this.i(A)^I.i(A);return new o(E,this.h^I.h)};function M(I){for(var y=I.g.length+1,E=[],A=0;A<y;A++)E[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(E,I.h)}function O(I,y){var E=y>>5;y%=32;for(var A=I.g.length-E,C=[],P=0;P<A;P++)C[P]=0<y?I.i(P+E)>>>y|I.i(P+E+1)<<32-y:I.i(P+E);return new o(C,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,zi=o}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sI,Vo,oI,wu,zf,aI,lI,uI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gl=="object"&&Gl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,f){if(f)e:{var g=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var D=u[T];if(!(D in g))break e;g=g[D]}u=u[u.length-1],T=g[u],f=f(T),f!=T&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,T=!1,D={next:function(){if(!T&&g<u.length){var N=g++;return{value:f(N,u[N]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(T,D,N){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[D].apply(T,z)}}function S(u){const f=u.length;if(0<f){const g=Array(f);for(let T=0;T<f;T++)g[T]=u[T];return g}return[]}function b(u,f){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(l(T)){const D=u.length||0,N=T.length||0;u.length=D+N;for(let z=0;z<N;z++)u[D+z]=T[z]}else u.push(T)}}class w{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(u,f,g){for(const T in u)f.call(g,u[T],T,u)}function I(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function y(u){const f={};for(const g in u)f[g]=u[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let g,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(g in T)u[g]=T[g];for(let N=0;N<E.length;N++)g=E[N],Object.prototype.hasOwnProperty.call(T,g)&&(u[g]=T[g])}}function C(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function P(u){a.setTimeout(()=>{throw u},0)}function k(){var u=W;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ee{constructor(){this.h=this.g=null}add(f,g){const T=ne.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var ne=new w(()=>new de,u=>u.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let he,U=!1,W=new Ee,Q=()=>{const u=a.Promise.resolve(void 0);he=()=>{u.then(me)}};var me=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(g){P(g)}var f=ne;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}U=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Et(u,f){if(_e.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{R(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Et.aa.h.call(this)}}v(Et,_e);var et={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),L1=0;function F1(u,f,g,T,D){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=D,this.key=++L1,this.da=this.fa=!1}function Za(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function el(u){this.src=u,this.g={},this.h=0}el.prototype.add=function(u,f,g,T,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var z=hh(u,f,T,D);return-1<z?(f=u[z],g||(f.fa=!1)):(f=new F1(f,this.src,N,!!T,D),f.fa=g,u.push(f)),f};function ch(u,f){var g=f.type;if(g in u.g){var T=u.g[g],D=Array.prototype.indexOf.call(T,f,void 0),N;(N=0<=D)&&Array.prototype.splice.call(T,D,1),N&&(Za(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function hh(u,f,g,T){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==f&&N.capture==!!g&&N.ha==T)return D}return-1}var dh="closure_lm_"+(1e6*Math.random()|0),fh={};function um(u,f,g,T,D){if(Array.isArray(f)){for(var N=0;N<f.length;N++)um(u,f[N],g,T,D);return null}return g=dm(g),u&&u[Mn]?u.K(f,g,c(T)?!!T.capture:!1,D):j1(u,f,g,!1,T,D)}function j1(u,f,g,T,D,N){if(!f)throw Error("Invalid event type");var z=c(D)?!!D.capture:!!D,ye=gh(u);if(ye||(u[dh]=ye=new el(u)),g=ye.add(f,g,T,z,N),g.proxy)return g;if(T=U1(),g.proxy=T,T.src=u,T.listener=g,u.addEventListener)Ze||(D=z),D===void 0&&(D=!1),u.addEventListener(f.toString(),T,D);else if(u.attachEvent)u.attachEvent(hm(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function U1(){function u(g){return f.call(u.src,u.listener,g)}const f=z1;return u}function cm(u,f,g,T,D){if(Array.isArray(f))for(var N=0;N<f.length;N++)cm(u,f[N],g,T,D);else T=c(T)?!!T.capture:!!T,g=dm(g),u&&u[Mn]?(u=u.i,f=String(f).toString(),f in u.g&&(N=u.g[f],g=hh(N,g,T,D),-1<g&&(Za(N[g]),Array.prototype.splice.call(N,g,1),N.length==0&&(delete u.g[f],u.h--)))):u&&(u=gh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=hh(f,g,T,D)),(g=-1<u?f[u]:null)&&ph(g))}function ph(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Mn])ch(f.i,u);else{var g=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(g,T,u.capture):f.detachEvent?f.detachEvent(hm(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=gh(f))?(ch(g,u),g.h==0&&(g.src=null,f[dh]=null)):Za(u)}}}function hm(u){return u in fh?fh[u]:fh[u]="on"+u}function z1(u,f){if(u.da)u=!0;else{f=new Et(f,this);var g=u.listener,T=u.ha||u.src;u.fa&&ph(u),u=g.call(T,f)}return u}function gh(u){return u=u[dh],u instanceof el?u:null}var mh="__closure_events_fn_"+(1e9*Math.random()>>>0);function dm(u){return typeof u=="function"?u:(u[mh]||(u[mh]=function(f){return u.handleEvent(f)}),u[mh])}function lt(){se.call(this),this.i=new el(this),this.M=this,this.F=null}v(lt,se),lt.prototype[Mn]=!0,lt.prototype.removeEventListener=function(u,f,g,T){cm(this,u,f,g,T)};function Tt(u,f){var g,T=u.F;if(T)for(g=[];T;T=T.F)g.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new _e(f,u);else if(f instanceof _e)f.target=f.target||u;else{var D=f;f=new _e(T,u),A(f,D)}if(D=!0,g)for(var N=g.length-1;0<=N;N--){var z=f.g=g[N];D=tl(z,T,!0,f)&&D}if(z=f.g=u,D=tl(z,T,!0,f)&&D,D=tl(z,T,!1,f)&&D,g)for(N=0;N<g.length;N++)z=f.g=g[N],D=tl(z,T,!1,f)&&D}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],T=0;T<g.length;T++)Za(g[T]);delete u.g[f],u.h--}}this.F=null},lt.prototype.K=function(u,f,g,T){return this.i.add(String(u),f,!1,g,T)},lt.prototype.L=function(u,f,g,T){return this.i.add(String(u),f,!0,g,T)};function tl(u,f,g,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,N=0;N<f.length;++N){var z=f[N];if(z&&!z.da&&z.capture==g){var ye=z.listener,tt=z.ha||z.src;z.fa&&ch(u.i,z),D=ye.call(tt,T)!==!1&&D}}return D&&!T.defaultPrevented}function fm(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function pm(u){u.g=fm(()=>{u.g=null,u.i&&(u.i=!1,pm(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class B1 extends se{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:pm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(u){se.call(this),this.h=u,this.g={}}v(eo,se);var gm=[];function mm(u){O(u.g,function(f,g){this.g.hasOwnProperty(g)&&ph(f)},u),u.g={}}eo.prototype.N=function(){eo.aa.N.call(this),mm(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _h=a.JSON.stringify,$1=a.JSON.parse,H1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function yh(){}yh.prototype.h=null;function _m(u){return u.h||(u.h=u.i())}function ym(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vh(){_e.call(this,"d")}v(vh,_e);function wh(){_e.call(this,"c")}v(wh,_e);var rr={},vm=null;function nl(){return vm=vm||new lt}rr.La="serverreachability";function wm(u){_e.call(this,rr.La,u)}v(wm,_e);function no(u){const f=nl();Tt(f,new wm(f))}rr.STAT_EVENT="statevent";function Em(u,f){_e.call(this,rr.STAT_EVENT,u),this.stat=f}v(Em,_e);function St(u){const f=nl();Tt(f,new Em(f,u))}rr.Ma="timingevent";function Tm(u,f){_e.call(this,rr.Ma,u),this.size=f}v(Tm,_e);function io(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ro(){this.g=!0}ro.prototype.xa=function(){this.g=!1};function W1(u,f,g,T,D,N){u.info(function(){if(u.g)if(N)for(var z="",ye=N.split("&"),tt=0;tt<ye.length;tt++){var ce=ye[tt].split("=");if(1<ce.length){var ut=ce[0];ce=ce[1];var ct=ut.split("_");z=2<=ct.length&&ct[1]=="type"?z+(ut+"="+ce+"&"):z+(ut+"=redacted&")}}else z=null;else z=N;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+f+`
`+g+`
`+z})}function q1(u,f,g,T,D,N,z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+f+`
`+g+`
`+N+" "+z})}function $r(u,f,g,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+G1(u,g)+(T?" "+T:"")})}function K1(u,f){u.info(function(){return"TIMEOUT: "+f})}ro.prototype.info=function(){};function G1(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var T=g[u];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return _h(g)}catch{return f}}var il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Eh;function rl(){}v(rl,yh),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},Eh=new rl;function ai(u,f,g,T){this.j=u,this.i=f,this.l=g,this.R=T||1,this.U=new eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Im}function Im(){this.i=null,this.g="",this.h=!1}var xm={},Th={};function Sh(u,f,g){u.L=1,u.v=ll(On(f)),u.m=g,u.P=!0,Am(u,null)}function Am(u,f){u.F=Date.now(),sl(u),u.A=On(u.v);var g=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Um(g.i,"t",T),u.C=0,g=u.j.J,u.h=new Im,u.g=r_(u.j,g?f:null,!u.m),0<u.O&&(u.M=new B1(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,T=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(gm[0]=D.toString()),D=gm);for(var N=0;N<D.length;N++){var z=um(g,D[N],T||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),no(),W1(u.i,u.u,u.A,u.l,u.R,u.m)}ai.prototype.ca=function(u){u=u.target;const f=this.M;f&&Nn(u)==3?f.j():this.Y(u)},ai.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Nn(this.g);var f=this.g.Ba();const qr=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Km(this.g)))){this.J||ct!=4||f==7||(f==8||0>=qr?no(3):no(2)),Ih(this);var g=this.g.Z();this.X=g;t:if(bm(this)){var T=Km(this.g);u="";var D=T.length,N=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),so(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(N&&f==D-1)});T.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,q1(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,tt=this.g;if((ye=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ye)){var ce=ye;break t}}ce=null}if(g=ce)$r(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,g);else{this.o=!1,this.s=3,St(12),sr(this),so(this);break e}}if(this.P){g=!0;let rn;for(;!this.J&&this.C<z.length;)if(rn=Q1(this,z),rn==Th){ct==4&&(this.s=4,St(14),g=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==xm){this.s=4,St(15),$r(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else $r(this.i,this.l,rn,null),xh(this,rn);if(bm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||z.length!=0||this.h.h||(this.s=1,St(16),g=!1),this.o=this.o&&g,!g)$r(this.i,this.l,z,"[Invalid Chunked Response]"),sr(this),so(this);else if(0<z.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Rh(ut),ut.M=!0,St(11))}}else $r(this.i,this.l,z,null),xh(this,z);ct==4&&sr(this),this.o&&!this.J&&(ct==4?e_(this.j,this):(this.o=!1,sl(this)))}else dx(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),sr(this),so(this)}}}catch{}finally{}};function bm(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Q1(u,f){var g=u.C,T=f.indexOf(`
`,g);return T==-1?Th:(g=Number(f.substring(g,T)),isNaN(g)?xm:(T+=1,T+g>f.length?Th:(f=f.slice(T,T+g),u.C=T+g,f)))}ai.prototype.cancel=function(){this.J=!0,sr(this)};function sl(u){u.S=Date.now()+u.I,km(u,u.I)}function km(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=io(p(u.ba,u),f)}function Ih(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ai.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(K1(this.i,this.A),this.L!=2&&(no(),St(17)),sr(this),this.s=2,so(this)):km(this,this.S-u)};function so(u){u.j.G==0||u.J||e_(u.j,u)}function sr(u){Ih(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,mm(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function xh(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Ah(g.h,u))){if(!u.K&&Ah(g.h,u)&&g.G==3){try{var T=g.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)pl(g),dl(g);else break e;Ph(g),St(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=io(p(g.Za,g),6e3));if(1>=Rm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ar(g,11)}else if((u.K||g.g==u)&&pl(g),!_(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let ce=D[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const ut=ce[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=ce[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const qr=ce[5];qr!=null&&typeof qr=="number"&&0<qr&&(T=1.5*qr,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const rn=u.g;if(rn){const ml=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var N=T.h;N.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(bh(N,N.h),N.h=null))}if(T.D){const Dh=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(T.ya=Dh,xe(T.I,T.D,Dh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var z=u;if(T.qa=i_(T,T.J?T.ia:null,T.W),z.K){Dm(T.h,z);var ye=z,tt=T.L;tt&&(ye.I=tt),ye.B&&(Ih(ye),sl(ye)),T.g=z}else Jm(T);0<g.i.length&&fl(g)}else ce[0]!="stop"&&ce[0]!="close"||ar(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?ar(g,7):Ch(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}no(4)}catch{}}var Y1=class{constructor(u,f){this.g=u,this.map=f}};function Cm(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rm(u){return u.h?1:u.g?u.g.size:0}function Ah(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function bh(u,f){u.g?u.g.add(f):u.h=f}function Dm(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Cm.prototype.cancel=function(){if(this.i=Mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Mm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return S(u.i)}function X1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,T=0;T<g;T++)f.push(u[T]);return f}f=[],g=0;for(T in u)f[g++]=u[T];return f}function J1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const T in u)f[g++]=T;return f}}}function Om(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=J1(u),T=X1(u),D=T.length,N=0;N<D;N++)f.call(void 0,T[N],g&&g[N],u)}var Nm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z1(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var T=u[g].indexOf("="),D=null;if(0<=T){var N=u[g].substring(0,T);D=u[g].substring(T+1)}else N=u[g];f(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function or(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof or){this.h=u.h,ol(this,u.j),this.o=u.o,this.g=u.g,al(this,u.s),this.l=u.l;var f=u.i,g=new lo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Vm(this,g),this.m=u.m}else u&&(f=String(u).match(Nm))?(this.h=!1,ol(this,f[1]||"",!0),this.o=oo(f[2]||""),this.g=oo(f[3]||"",!0),al(this,f[4]),this.l=oo(f[5]||"",!0),Vm(this,f[6]||"",!0),this.m=oo(f[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}or.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ao(f,Lm,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ao(f,Lm,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ao(g,g.charAt(0)=="/"?nx:tx,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ao(g,rx)),u.join("")};function On(u){return new or(u)}function ol(u,f,g){u.j=g?oo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function al(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Vm(u,f,g){f instanceof lo?(u.i=f,sx(u.i,u.h)):(g||(f=ao(f,ix)),u.i=new lo(f,u.h))}function xe(u,f,g){u.i.set(f,g)}function ll(u){return xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function oo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ao(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,ex),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ex(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Lm=/[#\/\?@]/g,tx=/[#\?:]/g,nx=/[#\?]/g,ix=/[#\?@]/g,rx=/#/g;function lo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function li(u){u.g||(u.g=new Map,u.h=0,u.i&&Z1(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=lo.prototype,t.add=function(u,f){li(this),this.i=null,u=Hr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function Fm(u,f){li(u),f=Hr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function jm(u,f){return li(u),f=Hr(u,f),u.g.has(f)}t.forEach=function(u,f){li(this),this.g.forEach(function(g,T){g.forEach(function(D){u.call(f,D,T,this)},this)},this)},t.na=function(){li(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let T=0;T<f.length;T++){const D=u[T];for(let N=0;N<D.length;N++)g.push(f[T])}return g},t.V=function(u){li(this);let f=[];if(typeof u=="string")jm(this,u)&&(f=f.concat(this.g.get(Hr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return li(this),this.i=null,u=Hr(this,u),jm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Um(u,f,g){Fm(u,f),0<g.length&&(u.i=null,u.g.set(Hr(u,f),S(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var T=f[g];const N=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var D=N;z[T]!==""&&(D+="="+encodeURIComponent(String(z[T]))),u.push(D)}}return this.i=u.join("&")};function Hr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function sx(u,f){f&&!u.j&&(li(u),u.i=null,u.g.forEach(function(g,T){var D=T.toLowerCase();T!=D&&(Fm(this,T),Um(this,D,g))},u)),u.j=f}function ox(u,f){const g=new ro;if(a.Image){const T=new Image;T.onload=m(ui,g,"TestLoadImage: loaded",!0,f,T),T.onerror=m(ui,g,"TestLoadImage: error",!1,f,T),T.onabort=m(ui,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=m(ui,g,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function ax(u,f){const g=new ro,T=new AbortController,D=setTimeout(()=>{T.abort(),ui(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(N=>{clearTimeout(D),N.ok?ui(g,"TestPingServer: ok",!0,f):ui(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),ui(g,"TestPingServer: error",!1,f)})}function ui(u,f,g,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(g)}catch{}}function lx(){this.g=new H1}function ux(u,f,g){const T=g||"";try{Om(u,function(D,N){let z=D;c(D)&&(z=_h(D)),f.push(T+N+"="+encodeURIComponent(z))})}catch(D){throw f.push(T+"type="+encodeURIComponent("_badmap")),D}}function ul(u){this.l=u.Ub||null,this.j=u.eb||!1}v(ul,yh),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(u){return function(){return u}}({});function cl(u,f){lt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(cl,lt),t=cl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,co(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?uo(this):co(this),this.readyState==3&&zm(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,uo(this))},t.Qa=function(u){this.g&&(this.response=u,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,co(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function co(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bm(u){let f="";return O(u,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function kh(u,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Bm(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):xe(u,f,g))}function Oe(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Oe,lt);var cx=/^https?$/i,hx=["POST","PUT"];t=Oe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Eh.g(),this.v=this.o?_m(this.o):_m(Eh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(N){$m(this,N);return}if(u=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)g.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const N of T.keys())g.set(N,T.get(N));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hx,f,void 0))||T||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,z]of g)this.g.setRequestHeader(N,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qm(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){$m(this,N)}};function $m(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Hm(u),hl(u)}function Hm(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wm(this):this.bb())},t.bb=function(){Wm(this)};function Wm(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)fm(u.Ea,0,u);else if(Tt(u,"readystatechange"),Nn(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=z===0){var D=String(u.D).match(Nm)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),T=!cx.test(D?D.toLowerCase():"")}g=T}if(g)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var N=2<Nn(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Hm(u)}}finally{hl(u)}}}}function hl(u,f){if(u.g){qm(u);const g=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Tt(u,"ready");try{g.onreadystatechange=T}catch{}}}function qm(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),$1(f)}};function Km(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dx(u){const f={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_(u[T]))continue;var g=C(u[T]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const N=f[D]||[];f[D]=N,N.push(g)}I(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Gm(u){this.Aa=0,this.i=[],this.j=new ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,u),this.cb=ho("retryDelaySeedMs",1e4,u),this.Wa=ho("forwardChannelMaxRetries",2,u),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Cm(u&&u.concurrentRequestLimit),this.Da=new lx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gm.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,T){St(0),this.W=u,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=i_(this,null,this.W),fl(this)};function Ch(u){if(Qm(u),u.G==3){var f=u.U++,g=On(u.I);if(xe(g,"SID",u.K),xe(g,"RID",f),xe(g,"TYPE","terminate"),fo(u,g),f=new ai(u,u.j,f),f.L=2,f.v=ll(On(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=r_(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sl(f)}n_(u)}function dl(u){u.g&&(Rh(u),u.g.cancel(),u.g=null)}function Qm(u){dl(u),u.u&&(a.clearTimeout(u.u),u.u=null),pl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fl(u){if(!Pm(u.h)&&!u.s){u.s=!0;var f=u.Ga;he||Q(),U||(he(),U=!0),W.add(f,u),u.B=0}}function fx(u,f){return Rm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=io(p(u.Ga,u,f),t_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new ai(this,this.j,u);let N=this.o;if(this.S&&(N?(N=y(N),A(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Xm(this,D,f),g=On(this.I),xe(g,"RID",u),xe(g,"CVER",22),this.D&&xe(g,"X-HTTP-Session-Id",this.D),fo(this,g),N&&(this.O?f="headers="+encodeURIComponent(String(Bm(N)))+"&"+f:this.m&&kh(g,this.m,N)),bh(this.h,D),this.Ua&&xe(g,"TYPE","init"),this.P?(xe(g,"$req",f),xe(g,"SID","null"),D.T=!0,Sh(D,g,null)):Sh(D,g,f),this.G=2}}else this.G==3&&(u?Ym(this,u):this.i.length==0||Pm(this.h)||Ym(this))};function Ym(u,f){var g;f?g=f.l:g=u.U++;const T=On(u.I);xe(T,"SID",u.K),xe(T,"RID",g),xe(T,"AID",u.T),fo(u,T),u.m&&u.o&&kh(T,u.m,u.o),g=new ai(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Xm(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),bh(u.h,g),Sh(g,T,f)}function fo(u,f){u.H&&O(u.H,function(g,T){xe(f,T,g)}),u.l&&Om({},function(g,T){xe(f,T,g)})}function Xm(u,f,g){g=Math.min(u.i.length,g);var T=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){const z=["count="+g];N==-1?0<g?(N=D[0].g,z.push("ofs="+N)):N=0:z.push("ofs="+N);let ye=!0;for(let tt=0;tt<g;tt++){let ce=D[tt].g;const ut=D[tt].map;if(ce-=N,0>ce)N=Math.max(0,D[tt].g-100),ye=!1;else try{ux(ut,z,"req"+ce+"_")}catch{T&&T(ut)}}if(ye){T=z.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,T}function Jm(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;he||Q(),U||(he(),U=!0),W.add(f,u),u.v=0}}function Ph(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=io(p(u.Fa,u),t_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Zm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=io(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),dl(this),Zm(this))};function Rh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Zm(u){u.g=new ai(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=On(u.qa);xe(f,"RID","rpc"),xe(f,"SID",u.K),xe(f,"AID",u.T),xe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&xe(f,"TO",u.ja),xe(f,"TYPE","xmlhttp"),fo(u,f),u.m&&u.o&&kh(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=ll(On(f)),g.m=null,g.P=!0,Am(g,u)}t.Za=function(){this.C!=null&&(this.C=null,dl(this),Ph(this),St(19))};function pl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function e_(u,f){var g=null;if(u.g==f){pl(u),Rh(u),u.g=null;var T=2}else if(Ah(u.h,f))g=f.D,Dm(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;T=nl(),Tt(T,new Tm(T,g)),fl(u)}else Jm(u);else if(D=f.s,D==3||D==0&&0<f.X||!(T==1&&fx(u,f)||T==2&&Ph(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),D){case 1:ar(u,5);break;case 4:ar(u,10);break;case 3:ar(u,6);break;default:ar(u,2)}}}function t_(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function ar(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),T=u.Xa;const D=!T;T=new or(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ol(T,"https"),ll(T),D?ox(T.toString(),g):ax(T.toString(),g)}else St(2);u.G=0,u.l&&u.l.sa(f),n_(u),Qm(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function n_(u){if(u.G=0,u.ka=[],u.l){const f=Mm(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function i_(u,f,g){var T=g instanceof or?On(g):new or(g);if(T.g!="")f&&(T.g=f+"."+T.g),al(T,T.s);else{var D=a.location;T=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var N=new or(null);T&&ol(N,T),f&&(N.g=f),D&&al(N,D),g&&(N.l=g),T=N}return g=u.D,f=u.ya,g&&f&&xe(T,g,f),xe(T,"VER",u.la),fo(u,T),T}function r_(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Oe(new ul({eb:g})):new Oe(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function s_(){}t=s_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gl(){}gl.prototype.g=function(u,f){return new Ft(u,f)};function Ft(u,f){lt.call(this),this.g=new Gm(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wr(this)}v(Ft,lt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Ch(this.g)},Ft.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=_h(u),u=g);f.i.push(new Y1(f.Ya++,u)),f.G==3&&fl(f)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Ch(this.g),delete this.g,Ft.aa.N.call(this)};function o_(u){vh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(o_,vh);function a_(){wh.call(this),this.status=1}v(a_,wh);function Wr(u){this.g=u}v(Wr,s_),Wr.prototype.ua=function(){Tt(this.g,"a")},Wr.prototype.ta=function(u){Tt(this.g,new o_(u))},Wr.prototype.sa=function(u){Tt(this.g,new a_)},Wr.prototype.ra=function(){Tt(this.g,"b")},gl.prototype.createWebChannel=gl.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,uI=function(){return new gl},lI=function(){return nl()},aI=rr,zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,wu=il,Sm.COMPLETE="complete",oI=Sm,ym.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Vo=ym,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,sI=Oe}).apply(typeof Gl<"u"?Gl:typeof self<"u"?self:typeof window<"u"?window:{});const s0="@firebase/firestore",o0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new gg("@firebase/firestore");function Yr(){return Nr.logLevel}function B(t,...e){if(Nr.logLevel<=ie.DEBUG){const n=e.map(Ag);Nr.debug(`Firestore (${Qs}): ${t}`,...n)}}function ii(t,...e){if(Nr.logLevel<=ie.ERROR){const n=e.map(Ag);Nr.error(`Firestore (${Qs}): ${t}`,...n)}}function Ki(t,...e){if(Nr.logLevel<=ie.WARN){const n=e.map(Ag);Nr.warn(`Firestore (${Qs}): ${t}`,...n)}}function Ag(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,cI(t,i,n)}function cI(t,e,n){let i=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ii(i),new Error(i)}function fe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||cI(e,r,i)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class RO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DO{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string",31837,{l:i}),new hI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class MO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new MO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const i=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=VO(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ee(t,e){return t<e?-1:t>e?1:0}function Bf(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return ee(i,r);{const s=dI(),o=LO(s.encode(l0(t,n)),s.encode(l0(e,n)));return o!==0?o:ee(i,r)}}n+=i>65535?2:1}return ee(t.length,e.length)}function l0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function LO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function Vs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="__name__";class Tn{constructor(e,n,i){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&G(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Tn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ee(e.length,n.length)}static compareSegments(e,n){const i=Tn.isNumericId(e),r=Tn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Tn.extractNumericId(e).compare(Tn.extractNumericId(n)):Bf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}}class Te extends Tn{construct(e,n,i){return new Te(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const FO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Tn{construct(e,n,i){return new rt(e,n,i)}static isValidIdentifier(e){return FO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u0}static keyField(){return new rt([u0])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Te.fromString(e))}static fromName(e){return new K(Te.fromString(e).popFirst(5))}static empty(){return new K(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jO(t,e,n,i){if(e===!0&&i===!0)throw new $(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c0(t){if(!K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function h0(t){if(K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function ea(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xc(t);throw new $(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ga(t,e){if(!pI(t))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(r&&typeof o!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-62135596800,f0=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*f0);return new Se(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<d0)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f0}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ga(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:$e("string",Se._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Se(0,0))}static max(){return new J(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function UO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Se(n+1,0):new Se(n,i));return new Gi(r,K.empty(),e)}function zO(t){return new Gi(t.readTime,t.key,Ca)}class Gi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Gi(J.min(),K.empty(),Ca)}static max(){return new Gi(J.max(),K.empty(),Ca)}}function BO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==$O)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function WO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Jc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=-1;function Zc(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function qO(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="";function KO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=p0(e)),e=GO(t.get(n),e);return p0(e)}function GO(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case gI:n+="";break;default:n+=s}}return n}function p0(t){return t+gI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??it.RED,this.left=r??it.EMPTY,this.right=s??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new it(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return it.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m0(this.data.getIterator())}getIteratorFrom(e){return new m0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class m0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new Qe(rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _I("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=QO.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yi(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="server_timestamp",vI="__type__",wI="__previous_value__",EI="__local_write_time__";function Cg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[vI])===null||n===void 0?void 0:n.stringValue)===yI}function eh(t){const e=t.mapValue.fields[wI];return Cg(e)?eh(e):e}function Pa(t){const e=Qi(t.mapValue.fields[EI].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,i,r,s,o,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const gc="(default)";class Ra{constructor(e,n){this.projectId=e,this.database=n||gc}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===gc}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="__type__",XO="__max__",Yl={mapValue:{}},SI="__vector__",mc="value";function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cg(t)?4:ZO(t)?9007199254740991:JO(t)?10:11:G(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Qi(r.timestampValue),a=Qi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Yi(r.bytesValue).isEqual(Yi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ve(r.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(r.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ve(r.integerValue)===Ve(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ve(r.doubleValue),a=Ve(s.doubleValue);return o===a?pc(o)===pc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(g0(o)!==g0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function Da(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Xi(t),i=Xi(e);if(n!==i)return ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _0(t.timestampValue,e.timestampValue);case 4:return _0(Pa(t),Pa(e));case 5:return Bf(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yi(s),l=Yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ee(a[c],l[c]);if(h!==0)return h}return ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ee(Ve(s.latitude),Ve(o.latitude));return a!==0?a:ee(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},m=(a=d[mc])===null||a===void 0?void 0:a.arrayValue,v=(l=p[mc])===null||l===void 0?void 0:l.arrayValue,S=ee(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:y0(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yl.mapValue&&o===Yl.mapValue)return 0;if(s===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Bf(l[d],h[d]);if(p!==0)return p;const m=Ls(a[l[d]],c[h[d]]);if(m!==0)return m}return ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function _0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Qi(t),i=Qi(e),r=ee(n.seconds,i.seconds);return r!==0?r:ee(n.nanos,i.nanos)}function y0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ls(n[r],i[r]);if(s)return s}return ee(n.length,i.length)}function Fs(t){return $f(t)}function $f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Qi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=$f(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${$f(n.fields[o])}`;return r+"}"}(t.mapValue):G(61005,{value:t})}function Eu(t){switch(Xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(t);return e?16+Eu(e):16;case 5:return 2*t.stringValue.length;case 6:return Yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Eu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return jr(i.fields,(s,o)=>{r+=s.length+Eu(o)}),r}(t.mapValue);default:throw G(13486,{value:t})}}function v0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hf(t){return!!t&&"integerValue"in t}function Pg(t){return!!t&&"arrayValue"in t}function w0(t){return!!t&&"nullValue"in t}function E0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function JO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[TI])===null||n===void 0?void 0:n.stringValue)===SI}function ta(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ta(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ta(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Tu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){jr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Gt(ta(this.value))}}function II(t){const e=[];return jr(t.fields,(n,i)=>{const r=new rt([n]);if(Tu(i)){const s=II(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,J.min(),J.min(),J.min(),Gt.empty(),0)}static newFoundDocument(e,n,i,r){return new _t(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new _t(e,2,n,J.min(),J.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,J.min(),J.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.position=e,this.inclusive=n}}function T0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=K.comparator(K.fromName(o.referenceValue),n.key):i=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function S0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function eN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class ze extends xI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nN(e,n,i):n==="array-contains"?new sN(e,i):n==="in"?new oN(e,i):n==="not-in"?new aN(e,i):n==="array-contains-any"?new lN(e,i):new ze(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iN(e,i):new rN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends xI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new gn(e,n)}matches(e){return AI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AI(t){return t.op==="and"}function bI(t){return tN(t)&&AI(t)}function tN(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Wf(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(bI(t))return t.filters.map(e=>Wf(e)).join(",");{const e=t.filters.map(n=>Wf(n)).join(",");return`${t.op}(${e})`}}function kI(t,e){return t instanceof ze?function(i,r){return r instanceof ze&&i.op===r.op&&i.field.isEqual(r.field)&&Dn(i.value,r.value)}(t,e):t instanceof gn?function(i,r){return r instanceof gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&kI(o,r.filters[a]),!0):!1}(t,e):void G(19439)}function CI(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(CI).join(" ,")+"}"}(t):"Filter"}class nN extends ze{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class iN extends ze{constructor(e,n){super(e,"in",n),this.keys=PI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rN extends ze{constructor(e,n){super(e,"not-in",n),this.keys=PI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class sN extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pg(n)&&Da(n.arrayValue,this.value)}}class oN extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class aN extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class lN extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Da(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function I0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new uN(t,e,n,i,r,s,o)}function Rg(t){const e=Z(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Wf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fs(i)).join(",")),e.Pe=n}return e.Pe}function Dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S0(t.startAt,e.startAt)&&S0(t.endAt,e.endAt)}function qf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cN(t,e,n,i,r,s,o,a){return new Js(t,e,n,i,r,s,o,a)}function Mg(t){return new Js(t)}function x0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RI(t){return t.collectionGroup!==null}function na(t){const e=Z(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Ma(s,i))}),n.has(rt.keyField().canonicalString())||e.Te.push(new Ma(rt.keyField(),i))}return e.Te}function kn(t){const e=Z(t);return e.Ie||(e.Ie=hN(e,na(t))),e.Ie}function hN(t,e){if(t.limitType==="F")return I0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ma(r.field,s)});const n=t.endAt?new _c(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new _c(t.startAt.position,t.startAt.inclusive):null;return I0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Kf(t,e){const n=t.filters.concat([e]);return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yc(t,e,n){return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function th(t,e){return Dg(kn(t),kn(e))&&t.limitType===e.limitType}function DI(t){return`${Rg(kn(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>CI(r)).join(", ")}]`),Zc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fs(r)).join(",")),`Target(${i})`}(kn(t))}; limitType=${t.limitType})`}function nh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):K.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of na(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=T0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,na(i),r)||i.endAt&&!function(o,a,l){const c=T0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,na(i),r))}(t,e)}function dN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MI(t){return(e,n)=>{let i=!1;for(const r of na(t)){const s=fN(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function fN(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ls(l,c):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return mI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new Me(K.comparator);function ri(){return pN}const OI=new Me(K.comparator);function Lo(...t){let e=OI;for(const n of t)e=e.insert(n.key,n);return e}function NI(t){let e=OI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function vr(){return ia()}function VI(){return ia()}function ia(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const gN=new Me(K.comparator),mN=new Qe(K.comparator);function re(...t){let e=mN;for(const n of t)e=e.add(n);return e}const _N=new Qe(ee);function yN(){return _N}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function LI(t){return{integerValue:""+t}}function vN(t,e){return qO(e)?LI(e):Og(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function wN(t,e,n){return t instanceof Oa?function(r,s){const o={fields:{[vI]:{stringValue:yI},[EI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Cg(s)&&(s=eh(s)),s&&(o.fields[wI]=s),{mapValue:o}}(n,e):t instanceof Na?jI(t,e):t instanceof Va?UI(t,e):function(r,s){const o=FI(r,s),a=A0(o)+A0(r.Ee);return Hf(o)&&Hf(r.Ee)?LI(a):Og(r.serializer,a)}(t,e)}function EN(t,e,n){return t instanceof Na?jI(t,e):t instanceof Va?UI(t,e):n}function FI(t,e){return t instanceof vc?function(i){return Hf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Oa extends ih{}class Na extends ih{constructor(e){super(),this.elements=e}}function jI(t,e){const n=zI(e);for(const i of t.elements)n.some(r=>Dn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Va extends ih{constructor(e){super(),this.elements=e}}function UI(t,e){let n=zI(e);for(const i of t.elements)n=n.filter(r=>!Dn(r,i));return{arrayValue:{values:n}}}class vc extends ih{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function A0(t){return Ve(t.integerValue||t.doubleValue)}function zI(t){return Pg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.field=e,this.transform=n}}function SN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Na&&r instanceof Na||i instanceof Va&&r instanceof Va?Vs(i.elements,r.elements,Dn):i instanceof vc&&r instanceof vc?Dn(i.Ee,r.Ee):i instanceof Oa&&r instanceof Oa}(t.transform,e.transform)}class IN{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rh{}function BI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new HI(t.key,Gn.none()):new Qa(t.key,t.data,Gn.none());{const n=t.data,i=Gt.empty();let r=new Qe(rt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new zr(t.key,i,new hn(r.toArray()),Gn.none())}}function xN(t,e,n){t instanceof Qa?function(r,s,o){const a=r.value.clone(),l=k0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(r,s,o){if(!Su(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=k0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll($I(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,i){return t instanceof Qa?function(s,o,a,l){if(!Su(s.precondition,o))return a;const c=s.value.clone(),h=C0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof zr?function(s,o,a,l){if(!Su(s.precondition,o))return a;const c=C0(s.fieldTransforms,l,o),h=o.data;return h.setAll($I(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Su(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=FI(i.transform,r||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(i.field,s))}return n||null}function b0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vs(i,r,(s,o)=>SN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends rh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zr extends rh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $I(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function k0(t,e,n){const i=new Map;fe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,EN(o,a,n[r]))}return i}function C0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,wN(s,o,e))}return i}class HI extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bN extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&xN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=VI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=BI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(n,i)=>b0(n,i))&&Vs(this.baseMutations,e.baseMutations,(n,i)=>b0(n,i))}}class Ng{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return gN}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Ng(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,oe;function RN(t){switch(t){case L.OK:return G(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function WI(t){if(t===void 0)return ii("GRPC error has no .code"),L.UNKNOWN;switch(t){case je.OK:return L.OK;case je.CANCELLED:return L.CANCELLED;case je.UNKNOWN:return L.UNKNOWN;case je.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case je.INTERNAL:return L.INTERNAL;case je.UNAVAILABLE:return L.UNAVAILABLE;case je.UNAUTHENTICATED:return L.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case je.NOT_FOUND:return L.NOT_FOUND;case je.ALREADY_EXISTS:return L.ALREADY_EXISTS;case je.PERMISSION_DENIED:return L.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case je.ABORTED:return L.ABORTED;case je.OUT_OF_RANGE:return L.OUT_OF_RANGE;case je.UNIMPLEMENTED:return L.UNIMPLEMENTED;case je.DATA_LOSS:return L.DATA_LOSS;default:return G(39323,{code:t})}}(oe=je||(je={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new zi([4294967295,4294967295],0);function P0(t){const e=dI().encode(t),n=new rI;return n.update(e),new Uint8Array(n.digest())}function R0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,i],0),new zi([r,s],0)]}class Vg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(i<0)throw new Fo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=zi.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(zi.fromNumber(i)));return r.compare(DN)===1&&(r=new zi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=P0(e),[i,r]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vg(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=P0(e),[i,r]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);this.we(o)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new sh(J.min(),r,new Me(ee),ri(),re())}}class Ya{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ya(i,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class qI{constructor(e,n){this.targetId=e,this.De=n}}class KI{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class D0{constructor(){this.ve=0,this.Ce=M0(),this.Fe=at.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=re(),n=re(),i=re();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:G(38017,{changeType:s})}}),new Ya(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=M0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class MN{constructor(e){this.We=e,this.Ge=new Map,this.ze=ri(),this.je=Xl(),this.Je=Xl(),this.He=new Me(ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(qf(s))if(i===0){const o=new K(s.path);this.Xe(n,o,_t.newNoDocument(o,J.min()))}else fe(i===1,20013,{expectedCount:i});else{const o=this.ot(n);if(o!==i){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Yi(i).toUint8Array()}catch(l){if(l instanceof _I)return Ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Vg(o,r,s)}catch(l){return Ki(l instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&qf(a.target)){const l=new K(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,_t.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let i=re();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const r=new sh(e,n,this.He,this.ze,i);return this.ze=ri(),this.je=Xl(),this.Je=Xl(),this.He=new Me(ee),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new D0,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qe(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qe(ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new D0),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Xl(){return new Me(K.comparator)}function M0(){return new Me(K.comparator)}const ON={asc:"ASCENDING",desc:"DESCENDING"},NN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VN={and:"AND",or:"OR"};class LN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gf(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FN(t,e){return wc(t,e.toTimestamp())}function Cn(t){return fe(!!t,49232),J.fromTimestamp(function(n){const i=Qi(n);return new Se(i.seconds,i.nanos)}(t))}function Lg(t,e){return Qf(t,e).canonicalString()}function Qf(t,e){const n=function(r){return new Te(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QI(t){const e=Te.fromString(t);return fe(e1(e),10190,{key:e.toString()}),e}function Yf(t,e){return Lg(t.databaseId,e.path)}function bd(t,e){const n=QI(e);if(n.get(1)!==t.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(XI(n))}function YI(t,e){return Lg(t.databaseId,e)}function jN(t){const e=QI(t);return e.length===4?Te.emptyPath():XI(e)}function Xf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XI(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O0(t,e,n){return{name:Yf(t,e),fields:n.value.mapValue.fields}}function UN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(fe(h===void 0||typeof h=="string",58123),at.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?L.UNKNOWN:WI(c.code);return new $(h,c.message||"")}(o);n=new KI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=bd(t,i.document.name),s=Cn(i.document.updateTime),o=i.document.createTime?Cn(i.document.createTime):J.min(),a=new Gt({mapValue:{fields:i.document.fields}}),l=_t.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Iu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=bd(t,i.document),s=i.readTime?Cn(i.readTime):J.min(),o=_t.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=bd(t,i.document),s=i.removedTargetIds||[];n=new Iu([],s,r,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new PN(r,s),a=i.targetId;n=new qI(a,o)}}return n}function zN(t,e){let n;if(e instanceof Qa)n={update:O0(t,e.key,e.value)};else if(e instanceof HI)n={delete:Yf(t,e.key)};else if(e instanceof zr)n={update:O0(t,e.key,e.data),updateMask:YN(e.fieldMask)};else{if(!(e instanceof bN))return G(16599,{Rt:e.type});n={verify:Yf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:o.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:FN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G(27497)}(t,e.precondition)),n}function BN(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(r,s){let o=r.updateTime?Cn(r.updateTime):Cn(s);return o.isEqual(J.min())&&(o=Cn(s)),new IN(o,r.transformResults||[])}(n,e))):[]}function $N(t,e){return{documents:[YI(t,e.path)]}}function HN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=YI(t,r);const s=function(c){if(c.length!==0)return ZI(gn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Jr(p.field),direction:KN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Gf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:r}}function WN(t){let e=jN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){fe(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=JI(d);return p instanceof gn&&bI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(v){return new Ma(Zr(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Zc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new _c(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new _c(m,p)}(n.endAt)),cN(e,r,o,s,a,"F",l,c)}function qN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zr(n.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zr(n.unaryFilter.field);return ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zr(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zr(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(Zr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(i=>JI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function KN(t){return ON[t]}function GN(t){return NN[t]}function QN(t){return VN[t]}function Jr(t){return{fieldPath:t.canonicalString()}}function Zr(t){return rt.fromServerFormat(t.fieldPath)}function ZI(t){return t instanceof ze?function(n){if(n.op==="=="){if(E0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NAN"}};if(w0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NAN"}};if(w0(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(n.field),op:GN(n.op),value:n.value}}}(t):t instanceof gn?function(n){const i=n.getFilters().map(r=>ZI(r));return i.length===1?i[0]:{compositeFilter:{op:QN(n.op),filters:i}}}(t):G(54877,{filter:t})}function YN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function e1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,i,r,s=J.min(),o=J.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.gt=e}}function JN(t){const e=WN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.Dn=new eV}addToCollectionParentIndex(e,n){return this.Dn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Gi.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class eV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Qe(Te.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},t1=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(t1,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new js(0)}static ur(){return new js(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LruGarbageCollector",tV=1048576;function L0([t,e],[n,i]){const r=ee(t,n);return r===0?ee(e,i):r}class nV{constructor(e){this.Tr=e,this.buffer=new Qe(L0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();L0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(V0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xs(n)?B(V0,"Ignoring IndexedDB error during garbage collection: ",n):await Ys(n)}await this.Rr(3e5)})}}class rV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Jc.ue);const i=new nV(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(N0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Yr()<=ie.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function sV(t,e){return new rV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ra(i.mutation,r,hn.empty(),Se.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=re()){const r=vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Lo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=vr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,re()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ri();const o=ia(),a=function(){return ia()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof zr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ra(h.mutation,c,h.mutation.getFieldMask(),Se.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new aV(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ia();let r=new Me((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||hn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||re()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=VI();h.forEach(p=>{if(!s.has(p)){const m=BI(n.get(p),i.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(vr());let a=Ca,l=s;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,re())).next(h=>({batchId:a,changes:NI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let r=Lo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(d,p){return new Js(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=Lo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ra(h.mutation,c,hn.empty(),Se.now()),nh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return F.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Cn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:JN(r.bundledQuery),readTime:Cn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.overlays=new Me(K.comparator),this.kr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=vr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=vr(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Me((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=vr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=vr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return F.resolve(a)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new CN(n,i));let s=this.kr.get(n);s===void 0&&(s=re(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.qr=new Qe(Ye.Qr),this.$r=new Qe(Ye.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Ye(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new K(new Te([])),i=new Ye(n,e),r=new Ye(n,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new K(new Te([])),i=new Ye(n,e),r=new Ye(n,e+1);let s=re();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ye(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return K.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Ye.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kN(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Yr=this.Yr.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?kg:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ye(n,0),r=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{const a=this.Zr(o.Hr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qe(ee);return n.forEach(r=>{const s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),F.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;K.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new K(s),0);let a=new Qe(ee);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Hr)),!0)},o),F.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){fe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return F.forEach(n.mutations,r=>{const s=new Ye(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new Ye(n,0),r=this.Yr.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.ni=e,this.docs=function(){return new Me(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let i=ri();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():_t.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ri();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BO(zO(h),i)<=0||(r.has(h.key)||nh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){G(9500)}ri(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new pV(this)}getSize(e){return F.resolve(this.size)}}class pV extends oV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.persistence=e,this.ii=new Ur(n=>Rg(n),Dg),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Fg,this.targetCount=0,this._i=js.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),F.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new js(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.hr(n),F.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.ai={},this.overlays={},this.ui=new Jc(0),this.ci=!1,this.ci=!0,this.li=new hV,this.referenceDelegate=e(this),this.hi=new gV(this),this.indexManager=new ZN,this.remoteDocumentCache=function(r){return new fV(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new XN(n),this.Ti=new uV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new dV(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);const r=new mV(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return F.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class mV extends HO{constructor(e){super(),this.currentSequenceNumber=e}}class jg{constructor(e){this.persistence=e,this.Ai=new Fg,this.Ri=null}static Vi(e){return new jg(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,i=>{const r=K.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return F.or([()=>F.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ec{constructor(e,n){this.persistence=e,this.gi=new Ur(i=>KO(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=sV(this,n)}static Vi(e,n){return new Ec(e,n)}Ii(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return F.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?F.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(i++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eu(e.data.value)),n}Sr(e,n,i){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return F.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=re(),r=re();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ug(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return c2()?8:WO(wt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new _V;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Yr()<=ie.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Yr()<=ie.DEBUG&&B("QueryEngine","Query:",Xr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Yr()<=ie.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):F.resolve())}ps(e,n){if(x0(n))return F.resolve(null);let i=kn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=yc(n,null,"F"),i=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=re(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,yc(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,i,r){return x0(n)||r.isEqual(J.min())?F.resolve(null):this.gs.getDocuments(e,i).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,i,r)?F.resolve(null):(Yr()<=ie.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xr(n)),this.vs(e,o,n,UO(r,Ca)).next(a=>a))})}bs(e,n){let i=new Qe(MI(e));return n.forEach((r,s)=>{nh(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return Yr()<=ie.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.gs.getDocumentsMatchingQuery(e,n,Gi.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="LocalStore",vV=3e8;class wV{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Me(ee),this.Ms=new Ur(s=>Rg(s),Dg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function EV(t,e,n,i){return new wV(t,e,n,i)}async function i1(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=re();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function TV(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=F.resolve();return p.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(S=>{const b=c.docVersions.get(v);fe(b!==null,48541),S.version.compareTo(b)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function r1(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function SV(t,e){const n=Z(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(S,b,w){return S.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=vV?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,h)&&a.push(n.hi.updateTargetData(s,m))});let l=ri(),c=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(IV(s,o,e.documentUpdates).next(h=>{l=h.Ls,c=h.ks})),!i.isEqual(J.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=r,s))}function IV(t,e,n){let i=re(),r=re();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ri();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B(zg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:r}})}function xV(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=kg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function AV(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.hi.allocateTargetId(i).next(o=>(r=new Ai(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Jf(t,e,n){const i=Z(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Xs(o))throw o;B(zg,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function F0(t,e,n){const i=Z(t);let r=J.min(),s=re();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Z(l),p=d.Ms.get(h);return p!==void 0?F.resolve(d.Fs.get(p)):d.hi.getTargetData(c,h)}(i,o,kn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:re())).next(a=>(bV(i,dN(e),a),{documents:a,qs:s})))}function bV(t,e,n){let i=t.xs.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class j0{constructor(){this.activeTargetIds=yN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kV{constructor(){this.Fo=new j0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new j0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="ConnectivityMonitor";class z0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(U0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){B(U0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function Zf(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="RestConnection",PV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===gc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const o=Zf(),a=this.Go(e,n.toUriEncodedString());B(kd,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,r,s);const{host:c}=new URL(a),h=qs(c);return this.jo(e,a,l,i,h).then(d=>(B(kd,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ki(kd,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Jo(e,n,i,r,s,o){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=PV[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class MV extends RV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const o=Zf();return new Promise((a,l)=>{const c=new sI;c.setWithCredentials(!0),c.listenOnce(oI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wu.NO_ERROR:const d=c.getResponseJson();B(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case wu.TIMEOUT:B(ft,`RPC '${e}' ${o} timed out`),l(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case wu.HTTP_ERROR:const p=c.getStatus();if(B(ft,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const S=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(v.status);l(new $(S,v.message))}else l(new $(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(L.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{B(ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);B(ft,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,i,15)})}P_(e,n,i){const r=Zf(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uI(),a=lI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");B(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.T_(d);let p=!1,m=!1;const v=new DV({Ho:b=>{m?B(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(p||(B(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),B(ft,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},Yo:()=>d.close()}),S=(b,w,_)=>{b.listen(w,x=>{try{_(x)}catch(R){setTimeout(()=>{throw R},0)}})};return S(d,Vo.EventType.OPEN,()=>{m||(B(ft,`RPC '${e}' stream ${r} transport opened.`),v.s_())}),S(d,Vo.EventType.CLOSE,()=>{m||(m=!0,B(ft,`RPC '${e}' stream ${r} transport closed`),v.__(),this.I_(d))}),S(d,Vo.EventType.ERROR,b=>{m||(m=!0,Ki(ft,`RPC '${e}' stream ${r} transport errored. Name:`,b.name,"Message:",b.message),v.__(new $(L.UNAVAILABLE,"The operation could not be completed")))}),S(d,Vo.EventType.MESSAGE,b=>{var w;if(!m){const _=b.data[0];fe(!!_,16349);const x=_,R=(x==null?void 0:x.error)||((w=x[0])===null||w===void 0?void 0:w.error);if(R){B(ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let O=function(E){const A=je[E];if(A!==void 0)return WI(A)}(M),I=R.message;O===void 0&&(O=L.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),m=!0,v.__(new $(O,I)),d.close()}else B(ft,`RPC '${e}' stream ${r} received:`,_),v.a_(_)}}),S(a,aI.STAT_EVENT,b=>{b.stat===zf.PROXY?B(ft,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===zf.NOPROXY&&B(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){return new LN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="PersistentStream";class o1{constructor(e,n,i,r,s,o,a,l){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new s1(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new $(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return B(B0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(B(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OV extends o1{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=UN(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Cn(o.readTime):J.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Xf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=qf(l)?{documents:$N(s,l)}:{query:HN(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=GI(s,o.resumeToken);const c=Gf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=wc(s,o.snapshotVersion.toTimestamp());const c=Gf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=qN(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Xf(this.serializer),n.removeTarget=e,this.k_(n)}}class NV extends o1{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=BN(e.writeResults,e.commitTime),i=Cn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Xf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>zN(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{}class LV extends VV{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Qf(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(L.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Qf(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class FV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ii(n),this._a=!1):B("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="RemoteStore";class jV{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{Br(this)&&(B(Vr,"Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.Ia.add(4),await Xa(c),c.Aa.set("Unknown"),c.Ia.delete(4),await ah(c)}(this))})}),this.Aa=new FV(i,r)}}async function ah(t){if(Br(t))for(const e of t.da)await e(!0)}async function Xa(t){for(const e of t.da)await e(!1)}function a1(t,e){const n=Z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Wg(n)?Hg(n):Zs(n).x_()&&$g(n,e))}function Bg(t,e){const n=Z(t),i=Zs(n);n.Ta.delete(e),i.x_()&&l1(n,e),n.Ta.size===0&&(i.x_()?i.B_():Br(n)&&n.Aa.set("Unknown"))}function $g(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(t).H_(e)}function l1(t,e){t.Ra.$e(e),Zs(t).Y_(e)}function Hg(t){t.Ra=new MN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Zs(t).start(),t.Aa.aa()}function Wg(t){return Br(t)&&!Zs(t).M_()&&t.Ta.size>0}function Br(t){return Z(t).Ia.size===0}function u1(t){t.Ra=void 0}async function UV(t){t.Aa.set("Online")}async function zV(t){t.Ta.forEach((e,n)=>{$g(t,e)})}async function BV(t,e){u1(t),Wg(t)?(t.Aa.la(e),Hg(t)):t.Aa.set("Unknown")}async function $V(t,e,n){if(t.Aa.set("Online"),e instanceof KI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))}(t,e)}catch(i){B(Vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Tc(t,i)}else if(e instanceof Iu?t.Ra.Ye(e):e instanceof qI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{const i=await r1(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),l1(s,l);const d=new Ai(h.target,l,c,h.sequenceNumber);$g(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){B(Vr,"Failed to raise snapshot:",i),await Tc(t,i)}}async function Tc(t,e,n){if(!Xs(e))throw e;t.Ia.add(1),await Xa(t),t.Aa.set("Offline"),n||(n=()=>r1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(Vr,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await ah(t)})}function c1(t,e){return e().catch(n=>Tc(t,n,e))}async function lh(t){const e=Z(t),n=Ji(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kg;for(;HV(e);)try{const r=await xV(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,WV(e,r)}catch(r){await Tc(e,r)}h1(e)&&d1(e)}function HV(t){return Br(t)&&t.Pa.length<10}function WV(t,e){t.Pa.push(e);const n=Ji(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function h1(t){return Br(t)&&!Ji(t).M_()&&t.Pa.length>0}function d1(t){Ji(t).start()}async function qV(t){Ji(t).na()}async function KV(t){const e=Ji(t);for(const n of t.Pa)e.X_(n.mutations)}async function GV(t,e,n){const i=t.Pa.shift(),r=Ng.from(i,e,n);await c1(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await lh(t)}async function QV(t,e){e&&Ji(t).Z_&&await async function(i,r){if(function(o){return RN(o)&&o!==L.ABORTED}(r.code)){const s=i.Pa.shift();Ji(i).N_(),await c1(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await lh(i)}}(t,e),h1(t)&&d1(t)}async function $0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),B(Vr,"RemoteStore received new credentials");const i=Br(n);n.Ia.add(3),await Xa(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await ah(n)}async function YV(t,e){const n=Z(t);e?(n.Ia.delete(2),await ah(n)):e||(n.Ia.add(2),await Xa(n),n.Aa.set("Unknown"))}function Zs(t){return t.Va||(t.Va=function(n,i,r){const s=Z(n);return s.ia(),new OV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:UV.bind(null,t),e_:zV.bind(null,t),n_:BV.bind(null,t),J_:$V.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Wg(t)?Hg(t):t.Aa.set("Unknown")):(await t.Va.stop(),u1(t))})),t.Va}function Ji(t){return t.ma||(t.ma=function(n,i,r){const s=Z(n);return s.ia(),new NV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:qV.bind(null,t),n_:QV.bind(null,t),ea:KV.bind(null,t),ta:GV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await lh(t)):(await t.ma.stop(),t.Pa.length>0&&(B(Vr,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new qg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kg(t,e){if(ii("AsyncQueue",`${e}: ${t}`),Xs(t))return new $(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{static emptySet(e){return new xs(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Lo(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.fa=new Me(K.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Us{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Us(e,n,xs.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class JV{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=W0(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(i)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function W0(){return new Ur(t=>DI(t),th)}async function ZV(t,e){const n=Z(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new XV,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Kg(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Gg(n)}async function eL(t,e){const n=Z(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tL(t,e){const n=Z(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&Gg(n)}function nL(t,e,n){const i=Z(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function Gg(t){t.Da.forEach(e=>{e.next()})}var ep,q0;(q0=ep||(ep={})).Fa="default",q0.Cache="cache";class iL{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Us(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.key=e}}class p1{constructor(e){this.key=e}}class rL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=re(),this.mutatedKeys=re(),this.Xa=MI(e),this.eu=new xs(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new H0,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=nh(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;p&&m?p.data.isEqual(m.data)?v!==S&&(i.track({type:3,doc:m}),b=!0):this.iu(p,m)||(i.track({type:2,doc:m}),b=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),b=!0):p&&!m&&(i.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,d)=>function(m,v){const S=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:b})}};return S(m)-S(v)}(h.type,d.type)||this.Xa(h.doc,d.doc)),this.su(i),r=r!=null&&r;const a=n&&!r?this.ou():[],l=this.Za.size===0&&this.current&&!r?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Us(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new H0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=re(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new p1(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new f1(i))}),n}uu(e){this.Ha=e.qs,this.Za=re();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Us.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qg="SyncEngine";class sL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class oL{constructor(e){this.key=e,this.lu=!1}}class aL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ur(a=>DI(a),th),this.Tu=new Map,this.Iu=new Set,this.du=new Me(K.comparator),this.Eu=new Map,this.Au=new Fg,this.Ru={},this.Vu=new Map,this.mu=js.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lL(t,e,n=!0){const i=w1(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await g1(i,e,n,!0),r}async function uL(t,e){const n=w1(t);await g1(n,e,!0,!1)}async function g1(t,e,n,i){const r=await AV(t.localStore,kn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await cL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&a1(t.remoteStore,r),a}async function cL(t,e,n,i,r){t.gu=(d,p,m)=>async function(S,b,w,_){let x=b.view.nu(w);x.Ds&&(x=await F0(S.localStore,b.query,!1).then(({documents:I})=>b.view.nu(I,x)));const R=_&&_.targetChanges.get(b.targetId),M=_&&_.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(x,S.isPrimaryClient,R,M);return G0(S,b.targetId,O._u),O.snapshot}(t,d,p,m);const s=await F0(t.localStore,e,!0),o=new rL(e,s.qs),a=o.nu(s.documents),l=Ya.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);G0(t,n,c._u);const h=new sL(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function hL(t,e,n){const i=Z(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!th(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Jf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Bg(i.remoteStore,r.targetId),tp(i,r.targetId)}).catch(Ys)):(tp(i,r.targetId),await Jf(i.localStore,r.targetId,!0))}async function dL(t,e){const n=Z(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Bg(n.remoteStore,i.targetId))}async function fL(t,e,n){const i=wL(t);try{const r=await function(o,a){const l=Z(o),c=Se.now(),h=a.reduce((m,v)=>m.add(v.key),re());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ri(),S=re();return l.Os.getEntries(m,h).next(b=>{v=b,v.forEach((w,_)=>{_.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(b=>{d=b;const w=[];for(const _ of a){const x=AN(_,d.get(_.key).overlayedDocument);x!=null&&w.push(new zr(_.key,x,II(x.value.mapValue),Gn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(m,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:NI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Me(ee)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ja(i,r.changes),await lh(i.remoteStore)}catch(r){const s=Kg(r,"Failed to persist write");n.reject(s)}}async function m1(t,e){const n=Z(t);try{const i=await SV(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Eu.get(s);o&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?fe(o.lu,14607):r.removedDocuments.size>0&&(fe(o.lu,42227),o.lu=!1))}),await Ja(n,i,e)}catch(i){await Ys(i)}}function K0(t,e,n){const i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.wa)p.va(a)&&(c=!0)}),c&&Gg(l)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pL(t,e,n){const i=Z(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let o=new Me(K.comparator);o=o.insert(s,_t.newNoDocument(s,J.min()));const a=re().add(s),l=new sh(J.min(),new Map,new Me(ee),o,a);await m1(i,l),i.du=i.du.remove(s),i.Eu.delete(e),Yg(i)}else await Jf(i.localStore,e,!1).then(()=>tp(i,e,n)).catch(Ys)}async function gL(t,e){const n=Z(t),i=e.batch.batchId;try{const r=await TV(n.localStore,e);y1(n,i,null),_1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ja(n,r)}catch(r){await Ys(r)}}async function mL(t,e,n){const i=Z(t);try{const r=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(fe(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);y1(i,e,n),_1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ja(i,r)}catch(r){await Ys(r)}}function _1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function y1(t,e,n){const i=Z(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||v1(t,i)})}function v1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Yg(t))}function G0(t,e,n){for(const i of n)i instanceof f1?(t.Au.addReference(i.key,e),_L(t,i)):i instanceof p1?(B(Qg,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||v1(t,i.key)):G(19791,{yu:i})}function _L(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(B(Qg,"New document in limbo: "+n),t.Iu.add(i),Yg(t))}function Yg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new K(Te.fromString(e)),i=t.mu.next();t.Eu.set(i,new oL(n)),t.du=t.du.insert(n,i),a1(t.remoteStore,new Ai(kn(Mg(n.path)),i,"TargetPurposeLimboResolution",Jc.ue))}}async function Ja(t,e,n){const i=Z(t),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,l)=>{o.push(i.gu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Ug.Es(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.hu.J_(r),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,p=>F.forEach(p.Is,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>F.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Xs(d))throw d;B(zg,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.Fs.get(p),v=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(v);h.Fs=h.Fs.insert(p,S)}}}(i.localStore,s))}async function yL(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){B(Qg,"User change. New user:",e.toKey());const i=await i1(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new $(L.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ja(n,i.Bs)}}function vL(t,e){const n=Z(t),i=n.Eu.get(e);if(i&&i.lu)return re().add(i.key);{let r=re();const s=n.Tu.get(e);if(!s)return r;for(const o of s){const a=n.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function w1(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=m1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pL.bind(null,e),e.hu.J_=tL.bind(null,e.eventManager),e.hu.pu=nL.bind(null,e.eventManager),e}function wL(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mL.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return EV(this.persistence,new yV,e.initialUser,this.serializer)}Du(e){return new n1(jg.Vi,this.serializer)}bu(e){return new kV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class EL extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){fe(this.persistence.referenceDelegate instanceof Ec,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iV(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new n1(i=>Ec.Vi(i,n),this.serializer)}}class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yL.bind(null,this.syncEngine),await YV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JV}()}createDatastore(e){const n=oh(e.databaseInfo.databaseId),i=function(s){return new MV(s)}(e.databaseInfo);return function(s,o,a,l){return new LV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new jV(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>K0(this.syncEngine,n,0),function(){return z0.C()?new z0:new CV}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new aL(r,s,o,a,l,c);return h&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Z(r);B(Vr,"RemoteStore shutting down."),s.Ia.add(5),await Xa(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class SL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=gt.UNAUTHENTICATED,this.clientId=bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{B(Zi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(B(Zi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Pd(t,e){t.asyncQueue.verifyOperationInProgress(),B(Zi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await i1(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Ki("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Ki("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function Q0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IL(t);B(Zi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>$0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>$0(e.remoteStore,r)),t._onlineComponents=e}async function IL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Zi,"Using user provided OfflineComponentProvider");try{await Pd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===L.FAILED_PRECONDITION||r.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await Pd(t,new Sc)}}else B(Zi,"Using default OfflineComponentProvider"),await Pd(t,new EL(void 0));return t._offlineComponents}async function E1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Zi,"Using user provided OnlineComponentProvider"),await Q0(t,t._uninitializedComponentsProvider._online)):(B(Zi,"Using default OnlineComponentProvider"),await Q0(t,new np))),t._onlineComponents}function xL(t){return E1(t).then(e=>e.syncEngine)}async function Y0(t){const e=await E1(t),n=e.eventManager;return n.onListen=lL.bind(null,e.syncEngine),n.onUnlisten=hL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firestore.googleapis.com",J0=!0;class Z0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S1,this.ssl=J0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:J0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tV)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PO;switch(i.type){case"firstParty":return new OO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=X0.get(n);i&&(B("ComponentProvider","Removing Datastore"),X0.delete(n),i.terminate())}(this),Promise.resolve()}}function AL(t,e,n,i={}){var r;t=ea(t,uh);const s=qs(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(yS(`https://${l}`),vS("Firestore",!0)),o.host!==S1&&o.host!==l&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:i});if(!Dr(c,a)&&(t._setSettings(c),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=gt.MOCK_USER;else{h=t2(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gt(p)}t._authCredentials=new RO(new hI(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class Ge{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ga(n,Ge._jsonSchema))return new Ge(e,i||null,new K(Te.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:$e("string",Ge._jsonSchemaVersion),referencePath:$e("string")};class Bi extends ir{constructor(e,n,i){super(e,n,Mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new K(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function ip(t,e,...n){if(t=Lt(t),fI("collection","path",e),t instanceof uh){const i=Te.fromString(e,...n);return h0(i),new Bi(t,null,i)}{if(!(t instanceof Ge||t instanceof Bi))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return h0(i),new Bi(t.firestore,null,i)}}function bL(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=bg.newId()),fI("doc","path",e),t instanceof uh){const i=Te.fromString(e,...n);return c0(i),new Ge(t,null,new K(i))}{if(!(t instanceof Ge||t instanceof Bi))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return c0(i),new Ge(t.firestore,t instanceof Bi?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="AsyncQueue";class tw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new s1(this,"async_queue_retry"),this.oc=()=>{const i=Cd();i&&B(ew,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Cd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Cd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Sr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Xs(e))throw e;B(ew,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,ii("INTERNAL UNHANDLED ERROR: ",nw(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=qg.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&G(47125,{hc:nw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function nw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ic extends uh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new tw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tw(e),this._firestoreClient=void 0,await e}}}function kL(t,e){const n=typeof t=="object"?t:SS(),i=typeof t=="string"?t:gc,r=_g(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=ZR("firestore");s&&AL(r,...s)}return r}function I1(t){if(t._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CL(t),t._firestoreClient}function CL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new YO(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,T1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new SL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(at.fromBase64String(e))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ga(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:$e("string",Qt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pn._jsonSchemaVersion}}static fromJSON(e){if(Ga(e,Pn._jsonSchema))return new Pn(e.latitude,e.longitude)}}Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:$e("string",Pn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ga(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rn(e.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:$e("string",Rn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=/^__.*__$/;class RL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}function x1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:t})}}class Zg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Zg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(x1(this.Ec)&&PL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class DL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||oh(e)}Dc(e,n,i,r=!1){return new Zg({Ec:e,methodName:n,bc:i,path:rt.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function A1(t){const e=t._freezeSettings(),n=oh(t._databaseId);return new DL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ML(t,e,n,i,r,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);C1("Data must be an object, but it was:",o,i);const a=b1(i,o);let l,c;if(s.merge)l=new hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=NL(e,d,n);if(!o.contains(p))throw new $(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);LL(h,p)||h.push(p)}l=new hn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new RL(new Gt(a),l,c)}class em extends Jg{_toFieldTransform(e){return new TN(e.path,new Oa)}isEqual(e){return e instanceof em}}function OL(t,e,n,i=!1){return tm(n,t.Dc(i?4:3,e))}function tm(t,e){if(k1(t=Lt(t)))return C1("Unsupported field value:",e,t),b1(t,e);if(t instanceof Jg)return function(i,r){if(!x1(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=tm(a,r.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Se.fromDate(i);return{timestampValue:wc(r.serializer,s)}}if(i instanceof Se){const s=new Se(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wc(r.serializer,s)}}if(i instanceof Pn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qt)return{bytesValue:GI(r.serializer,i._byteString)};if(i instanceof Ge){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Rn)return function(o,a){return{mapValue:{fields:{[TI]:{stringValue:SI},[mc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return Og(a.serializer,c)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${Xc(i)}`)}(t,e)}function b1(t,e){const n={};return mI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(i,r)=>{const s=tm(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function k1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Pn||t instanceof Qt||t instanceof Ge||t instanceof Jg||t instanceof Rn)}function C1(t,e,n){if(!k1(n)||!pI(n)){const i=Xc(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function NL(t,e,n){if((e=Lt(e))instanceof Xg)return e._internalPath;if(typeof e=="string")return P1(t,e);throw xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const VL=new RegExp("[~\\*/\\[\\]]");function P1(t,e,n){if(e.search(VL)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xg(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new $(L.INVALID_ARGUMENT,a+t+l)}function LL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FL extends R1{data(){return super.data()}}function nm(t,e){return typeof e=="string"?P1(t,e):e instanceof Xg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class rm extends im{}function rw(t,e,...n){let i=[];e instanceof im&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof om).length,a=s.filter(l=>l instanceof sm).length;if(o>1||o>0&&a>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class sm extends rm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new sm(e,n,i)}_apply(e){const n=this._parse(e);return D1(e._query,n),new ir(e.firestore,e.converter,Kf(e._query,n))}_parse(e){const n=A1(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){aw(d,h);const v=[];for(const S of d)v.push(ow(l,s,S));p={arrayValue:{values:v}}}else p=ow(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||aw(d,h),p=OL(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class om extends im{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new om(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)D1(o,l),o=Kf(o,l)}(e._query,n),new ir(e.firestore,e.converter,Kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class am extends rm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new am(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ma(s,o)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Js(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function sw(t,e="asc"){const n=e,i=nm("orderBy",t);return am._create(i,n)}class lm extends rm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new lm(e,n,i)}_apply(e){return new ir(e.firestore,e.converter,yc(e._query,this._limit,this._limitType))}}function UL(t){return lm._create("limit",t,"F")}function ow(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RI(e)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Te.fromString(n));if(!K.isDocumentKey(i))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return v0(t,new K(i))}if(n instanceof Ge)return v0(t,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(n)}.`)}function aw(t,e){if(!Array.isArray(t)||t.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D1(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zL{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return jr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[mc].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ve(o.doubleValue));return new Rn(s)}convertGeoPoint(e){return new Pn(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Te.fromString(e);fe(e1(i),9688,{name:e});const r=new Ra(i.get(1),i.get(3)),s=new K(i.popFirst(5));return r.isEqual(n)||ii(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ir extends R1{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(nm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ir._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ir._jsonSchema={type:$e("string",Ir._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class xu extends Ir{data(e={}){return super.data(e)}}class As{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new jo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xu(this._firestore,this._userDataWriter,i.key,i,new jo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new xu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new jo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new jo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$L(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=As._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $L(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}As._jsonSchemaVersion="firestore/querySnapshot/1.0",As._jsonSchema={type:$e("string",As._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class M1 extends zL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function HL(t,e){const n=ea(t.firestore,Ic),i=bL(t),r=BL(t.converter,e);return WL(n,[ML(A1(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Gn.exists(!1))]).then(()=>i)}function lw(t,...e){var n,i,r;t=Lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iw(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Ge)c=ea(t.firestore,Ic),h=Mg(t._key.path),l={next:d=>{e[o]&&e[o](qL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ea(t,ir);c=ea(d.firestore,Ic),h=d._query;const p=new M1(c);l={next:m=>{e[o]&&e[o](new As(c,p,d,m))},error:e[o+1],complete:e[o+2]},jL(t._query)}return function(p,m,v,S){const b=new TL(S),w=new iL(m,b,v);return p.asyncQueue.enqueueAndForget(async()=>ZV(await Y0(p),w)),()=>{b.Ou(),p.asyncQueue.enqueueAndForget(async()=>eL(await Y0(p),w))}}(I1(c),h,a,l)}function WL(t,e){return function(i,r){const s=new Sr;return i.asyncQueue.enqueueAndForget(async()=>fL(await xL(i),r,s)),s.promise}(I1(t),e)}function qL(t,e,n){const i=n.docs.get(e._key),r=new M1(t);return new Ir(t,r,e._key,i,new jo(n.hasPendingWrites,n.fromCache),e.converter)}function KL(){return new em("serverTimestamp")}(function(e,n=!0){(function(r){Qs=r})(Ks),Ns(new Mr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ic(new DO(i.getProvider("auth-internal")),new NO(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ji(s0,o0,e),ji(s0,o0,"esm2017")})();const GL={apiKey:"AIzaSyAoUetB-F1yqNHO5JvvQAU7NsFs6vubO80",authDomain:"skincare-app-ver8.firebaseapp.com",projectId:"skincare-app-ver8",storageBucket:"skincare-app-ver8.firebasestorage.app",messagingSenderId:"453585186003",appId:"1:453585186003:web:cb5745705f72a873df3826"},O1=TS(GL),uw=AO(O1),rp=kL(O1),QL=async t=>{const e=ip(rp,"evaluations"),n=Se.fromDate(new Date(t.assessmentDate));return HL(e,{assessor:t.assessor,boneProtection:t.boneProtection,incontinenceCare:t.incontinenceCare,notes:t.notes,assessmentDate:n,createdAt:KL(),createdBy:t.createdBy})},N1=q.createContext({user:null,loading:!0}),YL=({children:t})=>{const[e,n]=q.useState(null),[i,r]=q.useState(!0);return q.useEffect(()=>gM(uw,o=>{o?(n(o),r(!1)):uM(uw).catch(a=>{console.error("Anonymous sign-in failed",a),r(!1)})}),[]),V.jsx(N1.Provider,{value:{user:e,loading:i},children:t})},XL=()=>q.useContext(N1),JL=new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"short"}),ZL=t=>{const e=new Map;return t.forEach(n=>{const i=n.assessmentDate||n.createdAt,r=i?new Date(i):new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,o=JL.format(r);e.has(s)||e.set(s,{monthKey:s,label:o,total:0,done:0,notDone:0,na:0});const a=e.get(s);a.total+=1,a.done+=+(n.boneProtection==="done")+ +(n.incontinenceCare==="done"),a.notDone+=+(n.boneProtection==="not_done")+ +(n.incontinenceCare==="not_done"),a.na+=+(n.boneProtection==="na")+ +(n.incontinenceCare==="na")}),Array.from(e.values()).sort((n,i)=>n.monthKey.localeCompare(i.monthKey))},eF=10,cw=t=>typeof t=="string"?t.trim():"",hw=t=>{var o,a,l,c,h,d;const e=t.data(),n=cw(e.assessor),i=cw(e.notes),r=((a=(o=e.assessmentDate)==null?void 0:o.toDate)==null?void 0:a.call(o))??e.assessmentDate??((c=(l=e.createdAt)==null?void 0:l.toDate)==null?void 0:c.call(l)),s=((d=(h=e.createdAt)==null?void 0:h.toDate)==null?void 0:d.call(h))??new Date;return{id:t.id,assessor:n||"",boneProtection:e.boneProtection??"na",incontinenceCare:e.incontinenceCare??"na",notes:i,assessmentDate:(r instanceof Date?r:new Date(r)).toISOString(),createdAt:s instanceof Date?s.toISOString():new Date(s).toISOString(),createdBy:e.createdBy}},tF=()=>{const[t,e]=q.useState([]),[n,i]=q.useState([]),[r,s]=q.useState(null),[o,a]=q.useState(!0),[l,c]=q.useState(!0);q.useEffect(()=>{const d=ip(rp,"evaluations"),p=rw(d,sw("createdAt","desc"),UL(eF)),m=lw(p,v=>{e(v.docs.map(hw)),a(!1)},v=>{console.error(v),s("Firestore"),a(!1)});return()=>m()},[]),q.useEffect(()=>{const d=ip(rp,"evaluations"),p=rw(d,sw("createdAt","desc")),m=lw(p,v=>{i(v.docs.map(hw)),c(!1)},v=>{console.error(v),s("Firestore"),c(!1)});return()=>m()},[]);const h=q.useMemo(()=>ZL(n),[n]);return{latestRecords:t,allRecords:n,monthlySummary:h,loading:o||l,error:r}},nF=()=>{const[t,e]=q.useState("form"),[n,i]=q.useState(!1),[r,s]=q.useState(null),o=q.useRef(null),{user:a,loading:l}=XL(),{latestRecords:c,allRecords:h,monthlySummary:d,error:p,loading:m}=tF(),v=q.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),S=q.useCallback((_,x="success")=>{v(),s({message:_,variant:x}),o.current=setTimeout(()=>s(null),3500)},[v]);q.useEffect(()=>v,[v]),q.useEffect(()=>{p&&S(p,"error")},[p,S]);const b=q.useMemo(()=>{const _=new Set(h.map(x=>x.assessor));return Array.from(_).sort()},[h]),w=async _=>{if(a){i(!0);try{await QL({..._,createdBy:a.uid}),S("","success")}catch(x){console.error(x),S("","error")}finally{i(!1)}}};return l?V.jsx("div",{className:"page",children:V.jsx("p",{className:"subtle",children:"..."})}):V.jsxs("div",{className:"page",children:[V.jsxs("header",{className:"app-header",children:[V.jsxs("div",{children:[V.jsx("h1",{children:"Skin Care Tracker ver.8"}),V.jsx("p",{className:"subtle",children:"BMI18.5/"})]}),V.jsxs("nav",{className:"tab-nav",children:[V.jsx("button",{type:"button",className:t==="form"?"active":"",onClick:()=>e("form"),children:""}),V.jsx("button",{type:"button",className:t==="dashboard"?"active":"",onClick:()=>e("dashboard"),children:""})]})]}),t==="form"?V.jsx(Hb,{assessorOptions:b,onSave:w,loading:n}):V.jsx($R,{loading:m,monthlySummary:d,latestRecords:c,allRecords:h}),r&&V.jsx("div",{className:"toast-container",children:V.jsx(HR,{message:r.message,variant:r.variant})})]})},iF=()=>V.jsx(YL,{children:V.jsx(nF,{})}),V1=document.getElementById("root");if(!V1)throw new Error("Root container not found");Rd.createRoot(V1).render(V.jsx(Dx.StrictMode,{children:V.jsx(iF,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(t=>console.error("SW registration failed",t))});
//# sourceMappingURL=index-BfGh1ln6.js.map
